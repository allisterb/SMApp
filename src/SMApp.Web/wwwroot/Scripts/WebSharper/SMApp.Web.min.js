(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;a=self;b=a.SMApp=a.SMApp||{};c=b.Web=b.Web||{};d=c.ClientExtensions=c.ClientExtensions||{};e=d.SweetAlert=d.SweetAlert||{};f=c._Html=c._Html||{};g=c.htmModule=c.htmModule||{};h=a.StartupCode$SMApp_Web$ClientExtensions=a.StartupCode$SMApp_Web$ClientExtensions||{};i=c.TypingDNA=c.TypingDNA||{};j=i.SaveResponse=i.SaveResponse||{};k=i.UserResponse=i.UserResponse||{};l=i.VerifyResponse=i.VerifyResponse||{};m=c.Bs=c.Bs||{};n=b.NLU=b.NLU||{};o=n.Witai=n.Witai||{};p=o.Utterance=o.Utterance||{};q=o.Intent=o.Intent||{};r=o.Entity=o.Entity||{};s=o.Trait=o.Trait||{};t=o["Utterance'"]=o["Utterance'"]||{};u=o["Value'"]=o["Value'"]||{};v=c.NLG=c.NLG||{};w=a.StartupCode$SMApp_Web$NLG=a.StartupCode$SMApp_Web$NLG||{};x=c.NLU=c.NLU||{};y=x.Intent=x.Intent||{};z=x.Trait=x.Trait||{};A=x.Entity=x.Entity||{};B=x.Utterance=x.Utterance||{};C=x.Voice=x.Voice||{};D=C["Entity'"]=C["Entity'"]||{};E=x.Text=x.Text||{};F=E["Utterance'"]=E["Utterance'"]||{};G=E["Intent'"]=E["Intent'"]||{};H=E["Entity'"]=E["Entity'"]||{};I=E["Trait'"]=E["Trait'"]||{};J=x.Domain=x.Domain||{};K=a.StartupCode$SMApp_Web$NLU=a.StartupCode$SMApp_Web$NLU||{};L=c.CUI=c.CUI||{};M=L.MicState=L.MicState||{};N=L.ClientState=L.ClientState||{};O=L.Interpreter=L.Interpreter||{};P=L.CUI=L.CUI||{};Q=c.Dialogue=c.Dialogue||{};R=c.Question=c.Question||{};S=c.QuestionType=c.QuestionType||{};T=c.DialogueModule=c.DialogueModule||{};U=c.Questions=c.Questions||{};V=c.User=c.User||{};W=a.StartupCode$SMApp_Web$User=a.StartupCode$SMApp_Web$User||{};X=c.Symptoms=c.Symptoms||{};Y=a.StartupCode$SMApp_Web$Symptoms=a.StartupCode$SMApp_Web$Symptoms||{};Z=c.Main=c.Main||{};_0=a.StartupCode$SMApp_Web$Main=a.StartupCode$SMApp_Web$Main||{};_1=c.Client=c.Client||{};_2=a.StartupCode$SMApp_Web$Client=a.StartupCode$SMApp_Web$Client||{};_3=a.SMApp$Web_GeneratedPrintf=a.SMApp$Web_GeneratedPrintf||{};_4=a.GeneratedPrintf=a.GeneratedPrintf||{};_5=a.WebSharper;_6=_5&&_5.Arrays;_7=a.SweetAlert;_8=a.IntelliFactory;_9=_8&&_8.Runtime;_=_5&&_5.Operators;$=_5&&_5.UI;ba=$&&$.Doc;bb=$&&$.AttrProxy;bc=$&&$.Client;bd=bc&&bc.Templates;be=_5&&_5.Utils;bf=a.console;bg=a.jQuery;bh=_5&&_5.Strings;bi=_5&&_5.List;bj=_5&&_5.Seq;bk=$&&$.AttrModule;bl=_5&&_5.Concurrency;bm=_5&&_5.Random;bn=_5&&_5.Collections;bo=bn&&bn.Map;bp=_5&&_5.JavaScript;bq=bp&&bp.Pervasives;br=_5&&_5.ClientSideJson;bs=br&&br.Provider;bt=a.JSON;bu=a.SDK;bv=_5&&_5.Unchecked;bw=_5&&_5.Remoting;bx=bw&&bw.AjaxRemotingProvider;by=a.Wit;bz=a.document;bA=bn&&bn.Dictionary;d.getCameraCanvas=function(){return a.getCameraCanvas();};d.stopCamera=function(){return a.stopCamera();};d.startCamera=function(bB,bC){return a.startCamera(bB,bC);};d.speechSynthesis=function(){return a.speechSynthesis;};d.lastMicData=function(){return a.lastMicData;};d.Terminal=function(){return a.$("#term").terminal();};d.enableTerminal=function(){return a.$("#term").terminal().enable();};d.disableTerminal=function(){return a.$("#term").terminal().disable();};d.boxesWithTitles=function(bB){return _6.map(function(bC){var bD;bD={};bD.titleText=bC;return bD;},bB);};d.confirmQuestionBox=function(){_7.clickConfirm();};d.questionBox=function(bB,bC,bD,bE,bF,bG,bH){var bI,bJ,bK,bL,bM,bN;bI=(bJ=bE==null?(bK={},bK.titleText=bB,bK.text=bC,bK.icon="question",bK.html="<div></div>",bK.allowOutsideClick=false,bK):(bL=bE.$0[0],(bM={},bM.titleText=bB,bM.text=bC,bM.icon="question",bM.width=a.String(bL),bM.html=(((_9.Curried3(function(bO,bP,bQ){return bO("<div class=\"swal2-content-custom\" style=\"width:"+a.String(bP)+"px;height:"+a.String(bQ)+"px\"></div>");}))(a.id))(bL))(bE.$0[1]),bM.allowOutsideClick=false,bM)),(bF!=null?bF.$0(bJ):void 0,bD!=null&&bD.$==1?(bN=bD.$0,(bJ.progressSteps=_6.ofSeq(_.range(1,_6.length(bN))),_7.mixin(bJ).queue(_6.create(_6.length(bN),bJ)))):_7.fire(bJ)));bG!=null?bG.$0():void 0;bI.then(bH);};e.get_QueueBoxes=function(){var bB;bB=_7.mixin({});return function(bC){return bB.queue(bC);};};d.getDialogueBoxInput=function(){return _6.get(a.jQuery(".swal2-input").get(),0);};d.getDialogueBoxCanvas=function(){return _6.get(a.jQuery("canvas.swal2-content").get(),0);};d.getDialogueBoxContent=function(){return _6.get(a.jQuery("#swal2-content").get(),0).firstChild;};d.createDialogueBoxCanvas=function(){return d.createCanvas("camera","640","480",_6.get(a.jQuery("#swal2-content").get(),0).firstChild);};d.createCanvas=function(bB,bC,bD,bE){var bF;bF=ba.Element("canvas",[d.eid(bB),bb.Create("width",bC),bb.Create("height",bD)],[]);bd.LoadLocalTemplates("");ba.Run(bE,bF);return bE.firstChild;};d.elementHTML=function(bB){return bB.innerHTML;};d.createElement=function(bB){var bC;bC=self.document.createElement("div");self.document.appendChild(bC);bd.LoadLocalTemplates("");ba.RunAppend(bC,bB);};d.getContainer=function(){return _6.get(a.jQuery("#container").get(),0).firstChild;};d.container=function(bB){return ba.Element("div",[d.cls("container")],bB);};d.dindex=function(bB){return bb.Create("data-index",a.String(bB));};d.cls=function(bB){return bb.Create("class",bB);};d.eid=function(bB){return bb.Create("id",bB);};d.getMic=function(){return _6.get(a.jQuery("#microphone").get(),0);};d.terminalOutput=function(){return _6.get(a.jQuery(".terminal-output").get(),0);};d.toLower=function(bB){return bB.toLowerCase();};d.debug=function(bB,bC){d.info((((_9.Curried3(function(bD,bE,bF){return bD("DEBUG: "+be.toSafe(bE)+": "+be.prettyPrint(bF));}))(a.id))(bB.toUpperCase()))(bC));};d.error=function(bB){bf.error(bB);};d.info=function(bB){bf.info(bB);};d.jserror=function(bB){bg.error(bB);};d.toArray=function(bB){return _6.map(a.id,bg.makeArray(bB));};d["Terminal.EchoHtml'"]=function(bB,bC){bB.pause();bB.echo(bC,d.rawOpt());bB.resume();};d["Terminal.Echo'"]=function(bB,bC){bB.pause();bB.echo(bC);bB.resume();};d.rawOpt=function(){h.$cctor();return h.rawOpt;};f=c._Html=_9.Class({toString:function(){return f.toString(this);}},null,f);f.toString=function(bB){function bC(bD){return function(bE){var bF,bG,bH,bI,bJ,bK,bL;bG=bh.replicate(bD," ");switch(bE.$==0?bE.$1.$==1?bE.$1.$0.$==2?bE.$1.$1.$==0?(bF=[bE.$1.$0.$0,bE.$0],1):(bF=[bE.$1,bE.$0],2):(bF=[bE.$1,bE.$0],2):(bF=[bE.$1,bE.$0],2):bE.$==2?(bF=bE.$0,3):(bF=[bE.$0,bE.$1],0)){case 0:return bF[0]+"=\""+bF[1]+"\"";case 1:bH=bF[1];return bG+"<"+bH+">"+bF[0]+"</"+bH+">\r\n";case 2:bI=bF[1];bJ=bi.partition(function(bM){return bM.$==1;},bF[0]);bK=bJ[1];bL=bJ[0];return bK.$==0?bG+"<"+bI+(bL.$===0?"":" "+bh.concat(" ",bi.ofSeq(bj.delay(function(){return bj.map(function(bM){return(bC(0))(bM);},bL);}))))+"/>\r\n":bG+"<"+bI+(bL.$===0?"":" "+bh.concat(" ",bi.ofSeq(bj.delay(function(){return bj.map(function(bM){return(bC(0))(bM);},bL);}))))+">\r\n"+bh.concat("",bi.ofSeq(bj.delay(function(){return bj.map(function(bM){return(bC(bD+1))(bM);},bK);})))+bG+"</"+bI+">\r\n";case 3:return bG+bF+"\r\n";}};}return(bC(0))(bB);};g.alt=function(bB){return new f({$:1,$0:"alt",$1:bB});};g.src=function(bB){return new f({$:1,$0:"src",$1:bB});};g.cls=function(bB){return new f({$:1,$0:"class",$1:bB});};g.str=function(bB){return f.toString(bB);};g.op_PercentEquals=function(bB,bC){return new f({$:1,$0:bB,$1:bC});};g.op_Splice=function(bB){var bC;return bi.ofArray([new f({$:2,$0:(bC=bB,a.String(bC))})]);};g.strong=function(){h.$cctor();return h.strong;};g.h4=function(){h.$cctor();return h.h4;};g.h3=function(){h.$cctor();return h.h3;};g.h2=function(){h.$cctor();return h.h2;};g.h1=function(){h.$cctor();return h.h1;};g.li=function(){h.$cctor();return h.li;};g.ul=function(){h.$cctor();return h.ul;};g.th=function(){h.$cctor();return h.th;};g.td=function(){h.$cctor();return h.td;};g.tr=function(){h.$cctor();return h.tr;};g.a=function(){h.$cctor();return h.a;};g.p=function(){h.$cctor();return h.p;};g.area=function(){h.$cctor();return h.area;};g.map=function(){h.$cctor();return h.map;};g.img=function(){h.$cctor();return h.img;};g.tfoot=function(){h.$cctor();return h.tfoot;};g.tbody=function(){h.$cctor();return h.tbody;};g.thead=function(){h.$cctor();return h.thead;};g.table=function(){h.$cctor();return h.table;};g.span=function(){h.$cctor();return h.span;};g.section=function(){h.$cctor();return h.section;};g.br=function(){h.$cctor();return h.br;};g.div=function(){h.$cctor();return h.div;};g.body=function(){h.$cctor();return h.body;};g.style=function(){h.$cctor();return h.style;};g.title=function(){h.$cctor();return h.title;};g.head=function(){h.$cctor();return h.head;};g.html=function(){h.$cctor();return h.html;};g.elem=function(bB,bC){return new f({$:0,$0:bB,$1:bC});};h.$cctor=function(){var bB;h.$cctor=a.ignore;h.rawOpt=(bB={},bB.raw=true,bB);h.html=function(bC){return g.elem("html",bC);};h.head=function(bC){return g.elem("head",bC);};h.title=function(bC){return g.elem("title",bC);};h.style=function(bC){return g.elem("style",bC);};h.body=function(bC){return g.elem("body",bC);};h.div=function(bC){return g.elem("div",bC);};h.br=function(bC){return g.elem("br",bC);};h.section=function(bC){return g.elem("section",bC);};h.span=function(bC){return g.elem("span",bC);};h.table=function(bC){return g.elem("table",bC);};h.thead=function(bC){return g.elem("thead",bC);};h.tbody=function(bC){return g.elem("tbody",bC);};h.tfoot=function(bC){return g.elem("tfoot",bC);};h.img=function(bC){return g.elem("img",bC);};h.map=function(bC){return g.elem("map",bC);};h.area=function(bC){return g.elem("area",bC);};h.p=function(bC){return g.elem("p",bC);};h.a=function(bC){return g.elem("a",bC);};h.tr=function(bC){return g.elem("tr",bC);};h.td=function(bC){return g.elem("td",bC);};h.th=function(bC){return g.elem("th",bC);};h.ul=function(bC){return g.elem("ul",bC);};h.li=function(bC){return g.elem("li",bC);};h.h1=function(bC){return g.elem("h1",bC);};h.h2=function(bC){return g.elem("h1",bC);};h.h3=function(bC){return g.elem("h1",bC);};h.h4=function(bC){return g.elem("h1",bC);};h.strong=function(bC){return g.elem("strong",bC);};};j.New=function(bB,bC,bD,bE){return{name:bB,message:bC,message_code:bD,status:bE};};k.New=function(bB,bC,bD,bE,bF){return{message:bB,message_code:bC,success:bD,count:bE,status:bF};};l.New=function(bB,bC,bD,bE,bF,bG){return{message:bB,message_code:bC,success:bD,result:bE,score:bF,confidence:bG};};m.Radio=function(bB,bC,bD,bE,bF){return ba.Element("div",new bi.T({$:1,$0:d.cls("radio"),$1:bC}),[ba.Element("label",bE,[ba.Radio(bF,true,bD),ba.TextNode(bB)])]);};m.checkbox=function(bB,bC,bD,bE,bF){return ba.Element("div",new bi.T({$:1,$0:d.cls("checkbox"),$1:bC}),[ba.Element("label",bE,[ba.CheckBox(bF,bD),ba.TextNode(bB)])]);};m.textArea=function(bB,bC,bD,bE,bF){return ba.Element("div",new bi.T({$:1,$0:d.cls("form-group"),$1:bC}),[ba.Element("label",bE,[ba.TextNode(bB)]),ba.InputArea(new bi.T({$:1,$0:d.cls("form-control"),$1:bF}),bD)]);};m.inputPassword=function(bB,bC,bD,bE,bF){return ba.Element("div",new bi.T({$:1,$0:d.cls("form-group"),$1:bC}),[ba.Element("label",bE,[ba.TextNode(bB)]),ba.PasswordBox(new bi.T({$:1,$0:d.cls("form-control"),$1:bF}),bD)]);};m.input=function(bB,bC,bD,bE,bF){return ba.Element("div",new bi.T({$:1,$0:d.cls("form-group"),$1:bC}),[ba.Element("label",bE,[ba.TextNode(bB)]),ba.Input([d.cls("form-control"),bF],bD)]);};m.btnSecondary=function(bB,bC,bD){return ba.Element("button",[d.eid(bB),d.cls("btn btn-secondary"),bk.Handler("click",bD)],[ba.TextNode(bC)]);};m.btnPrimary=function(bB,bC,bD){return ba.Element("button",[d.eid(bB),d.cls("btn btn-primary"),bk.Handler("click",bD)],[ba.TextNode(bC)]);};p.New=function(bB,bC,bD,bE){return{text:bB,intents:bC,entities:bD,traits:bE};};q.New=function(bB,bC,bD){return{id:bB,name:bC,confidence:bD};};r.New=function(bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL){return{id:bB,name:bC,role:bD,start:bE,end:bF,body:bG,confidence:bH,entities:bI,suggested:bJ,value:bK,type:bL};};s.New=function(bB,bC,bD){return{id:bB,value:bC,confidence:bD};};t.New=function(bB){return{intent:bB};};u.New=function(bB){return{value:bB};};o.getMeaning2=function(bB,bC){function bD(bE,bF){var bG;bg.ajax((bG={},bG.url=(function(bH){return function(bI){return bH("https://api.wit.ai/message?q="+be.toSafe(bI));};}(a.id))(bC),bG.type="GET",bG.beforeSend=function(bH){return bH.setRequestHeader("Authorization","Bearer "+bB);},bG.success=function(bH){return bE(bH);},bG.error=function(bH){return bF(new a.Error(bH.responseText));},bG));}return bl.FromContinuations(function(bE,bF,bG){return bD.apply(null,[bE,bF,bG]);});};o.getMeaning=function(bB,bC,bD,bE){var bF;bg.ajax((bF={},bF.url=(function(bG){return function(bH){return bG("https://api.wit.ai/message?q="+be.toSafe(bH));};}(a.id))(bC),bF.type="GET",bF.beforeSend=function(bG){return bG.setRequestHeader("Authorization","Bearer "+bB);},bF.success=bD,bF.error=bE,bF));};v.waitAddPhrases=function(){w.$cctor();return w.waitAddPhrases;};v.waitRetrievePhrases=function(){w.$cctor();return w.waitRetrievePhrases;};v.helpPhrases=function(){w.$cctor();return w.helpPhrases;};v.helloUserPhrases=function(){w.$cctor();return w.helloUserPhrases;};v.helloPhrases=function(){w.$cctor();return w.helloPhrases;};v["getRandomPhrase'"]=function(bB){return v.replace_tok("$0","",bj.nth(v.rng().Next(0,bB.get_Length()),bB));};v.getRandomPhrase=function(bB,bC){return v.replace_tok("$0",bC,bj.nth(v.rng().Next(0,bB.get_Length()),bB));};v.replace_tok=function(bB,bC,bD){return bh.Replace(bD,bB,bC);};v.rng=function(){w.$cctor();return w.rng;};w.$cctor=function(){w.$cctor=a.ignore;w.rng=new bm.New();w.helloPhrases=bi.ofArray(["Welcome!","Welcome, my name is Selma.","Welcome to Selma. How can I help?","Hello this is Selma, how can I help?","Hello, I am Selma. How can I help?","Hello, I am Selma. How may I help you now?","I'm Selma. Tell me your name so we can get started."]);w.helloUserPhrases=bi.ofArray(["Hello $0, welcome back.","Welcome $0, nice to see you again.","Hello $0.","Good to see you $0.","Hello $0, nice to see you."]);w.helpPhrases=bi.ofArray(["What can I help you with $0?"]);w.waitRetrievePhrases=bi.ofArray(["Ok, let me check that $0 for you","Please wait while I check that $0 for you.","Wait while I check that $0.","Ok let me see if I can find that $0."]);w.waitAddPhrases=bi.ofArray(["Ok, let me add that $0 for you","Please wait while I add that $0 for you.","Wait while I add that $0.","I'll add that $0 now."]);};y=x.Intent=_9.Class({toString:function(){return(((_9.Curried3(function(bB,bC,bD){return bB("Intent("+be.toSafe(bC)+", "+_3.p$2(bD)+")");}))(a.id))(this.get_Name()))(this.get_Confidence());},get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,y);z=x.Trait=_9.Class({toString:function(){return(((_9.Curried3(function(bB,bC,bD){return bB("Trait("+be.toSafe(bC)+", "+be.prettyPrint(bD)+")");}))(a.id))(this.get_Name()))(this.get_Value());},get_Confidence:function(){return this.$2;},get_Value:function(){return this.$1;},get_Name:function(){return this.$0;}},null,z);A=x.Entity=_9.Class({toString:function(){return(((((_9.Curried(function(bB,bC,bD,bE,bF){return bB("Entity("+be.toSafe(bC)+", "+be.toSafe(bD)+", "+be.toSafe(bE)+", "+_3.p$2(bF)+")");},5))(a.id))(this.get_Name()))(this.get_Role()))(this.get_Value()))(this.get_Confidence());},get_Confidence:function(){return this.$3;},get_Value:function(){return this.$2;},get_Role:function(){return this.$1;},get_Name:function(){return this.$0;}},null,A);B=x.Utterance=_9.Class({toString:function(){return((((_9.Curried(function(bB,bC,bD,bE){return bB(_3.p(bC)+" "+_3.p$3(bD)+" "+_3.p$5(bE));},4))(a.id))(this.get_Intent()))(this.get_Traits()))(this.get_Entities());},get_Entities:function(){var bB;bB=this.$3;return bB!=null?{$:1,$0:bi.sortBy(function(bC){return bC.get_Name();},bB.$0)}:null;},get_Traits:function(){var bB;bB=this.$2;return bB!=null?{$:1,$0:bi.sortBy(function(bC){return bC.get_Name();},bB.$0)}:null;},get_Intent:function(){return this.$1;},get_Text:function(){return this.$0;}},null,B);D.New=function(bB,bC,bD,bE,bF){return{body:bB,end:bC,start:bD,suggested:bE,value:bF};};C["Intent'"]=function(bB,bC){return!(bC.intent==null)?{$:1,$0:new y({$:0,$0:d.toLower(bC.intent.value),$1:null})}:null;};C["Trait'"]=function(bB){return!(bB.domain==null)?{$:1,$0:new z({$:0,$0:"domain",$1:d.toLower(bB.domain.value),$2:null})}:!(bB.dialogue_act==null)?{$:1,$0:new z({$:0,$0:"dialogue_act",$1:d.toLower(bB.dialogue_act.value),$2:null})}:null;};C["Entity'$1"]=function(bB){return!(bB.contact==null)?{$:1,$0:new A({$:0,$0:"contact",$1:"",$2:d.toLower(bB.contact.value),$3:null})}:null;};F=E["Utterance'"]=_9.Class({get_TopIntent:function(){return bi.head(bi.sortBy(function(bB){return bB.get_Confidence();},this.get_Intents()));},get_Traits:function(){return this.$3;},get_Entities:function(){return this.$2;},get_Intents:function(){return this.$1;},get_Text:function(){return this.$0;}},null,F);G=E["Intent'"]=_9.Class({get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,G);H=E["Entity'"]=_9.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,H);I=E["Trait'"]=_9.Class({get_Value:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2];}},null,I);E.HasUtterance=function(bB){var bC,bD,bE,bF,bG,bH;return bB!=null&&bB.$==1&&(bB.$0.$2.get_Length()>0&&(bC=[bB.$0.$2,bB.$0.$1,bB,bB.$0.$0,bB.$0.$3],true))?(bD=bC[0],(bE=bC[2],(bF=bC[4],(bG=bC[1].$==0?null:{$:1,$0:new y({$:0,$0:bE.$0.get_TopIntent().get_Name(),$1:{$:1,$0:bE.$0.get_TopIntent().get_Confidence()}})},(bH=bD.$==0?null:{$:1,$0:bi.map(function(bI){return new A({$:0,$0:bI.get_Name(),$1:d.toLower(bI.get_Role()),$2:bI.get_Value(),$3:{$:1,$0:bI.get_Confidence()}});},bi.filter(function(bI){return bI.get_Confidence()>E.entityConfidenceThreshold();},bD))},{$:1,$0:new B({$:0,$0:bC[3],$1:bG,$2:bF.$==0?null:{$:1,$0:bi.map(function(bI){return new z({$:0,$0:d.toLower(bI.get_Name()),$1:bI.get_Value(),$2:{$:1,$0:bI.get_Confidence()}});},bi.filter(function(bI){return bI.get_Confidence()>E.entityConfidenceThreshold();},bF))},$3:bH})}))))):null;};E.entityConfidenceThreshold=function(){K.$cctor();return K.entityConfidenceThreshold;};E.set_entityConfidenceThreshold=function(bB){K.$cctor();K.entityConfidenceThreshold=bB;};E.intentConfidenceThreshold=function(){K.$cctor();return K.intentConfidenceThreshold;};E.set_intentConfidenceThreshold=function(bB){K.$cctor();K.intentConfidenceThreshold=bB;};E.getUtterance2=function(bB){var bC;bC=null;return bl.Delay(function(){return bl.Bind(o.getMeaning2("4Y2BLQY5TWLIN7HFIV264S53MY4PCUAT",bB),function(bD){d.debug("NLU",(function(bE){return function(bF){return bE("Wit.ai returned "+_4.p(bF)+" ");};}(a.id))(bD));return bl.Return(new F({$:0,$0:bB,$1:bi.ofArray(_6.map(function(bE){return new G({$:0,$0:bE.name,$1:bE.confidence});},bD.intents)),$2:bi.map(function(bE){return new H({$:0,$0:bE.name,$1:bE.confidence,$2:bE.role,$3:bE.value});},bi.ofSeq(bj.concat(bj.map(function(bE){return bE[1];},bo.ToSeq(bD.entities))))),$3:bi.ofSeq(bj.map(function(bE){var bF;bF=bE[1];return new I({$:0,$0:bE[0],$1:_6.get(bF,0).confidence,$2:_6.get(bF,0).value});},bo.ToSeq(bD.traits)))}));});});};E.getUtterance=function(bB,bC){o.getMeaning("OOGDHEQL7JZRQASXN2N2GHFUKGO3SCNV",bB,function(bD){var bE,bF;d.debug("NLU",(function(bG){return function(bH){return bG("Wit.ai returned: "+be.prettyPrint(bH));};}(a.id))(bD));bE=!(bD.intents==null)?bi.ofArray(_6.map(function(bG){return new G({$:0,$0:bG.name,$1:bG.confidence});},bD.intents)):bi.T.Empty;bF=!(bD.traits==null)?bi.ofSeq(bj.concat(bi.map(function(bG){return _6.map(function(bH){return new I({$:0,$0:bG,$1:bH.confidence,$2:bH.value});},bq.GetJS(bD.traits,[bG]));},bi.filter(function(bG){return!(bq.GetJS(bD.traits,[bG])==null);},E.trait_types())))):bi.T.Empty;return bC({$:1,$0:new F({$:0,$0:bB,$1:bE,$2:!(bD.entities==null)?bi.ofSeq(bj.concat(bi.map(function(bG){return _6.map(function(bH){return new H({$:0,$0:bH.name,$1:bH.confidence,$2:bH.role,$3:bH.value});},bq.GetJS(bD.entities,[bG]));},bi.filter(function(bG){return!(bq.GetJS(bD.entities,[bG])==null);},E.entity_types())))):bi.T.Empty,$3:bF})});},function(bD,bE,bF){d.error((((_9.Curried3(function(bG,bH,bI){return bG("Wit.ai returned: "+be.prettyPrint(bH)+" "+be.prettyPrint(bI));}))(a.id))(bE))(bF));return bC(null);});};E.trait_types=function(){K.$cctor();return K.trait_types;};E.entity_types=function(){K.$cctor();return K.entity_types;};E.QuickJournal=function(bB){var bC;return bB==="help"||(bB==="help me"||(bB==="what's this?"||bB==="huh"))?{$:1,$0:new B({$:0,$0:"help",$1:{$:1,$0:new y({$:0,$0:"help",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickNumber=function(bB){var bC,bD,bE;return(bD=E.One(bB),bD!=null&&bD.$==1?(bC=bD.$0,true):(bE=E.Two(bB),bE!=null&&bE.$==1&&(bC=bE.$0,true)))?{$:1,$0:bC}:null;};E.Five=function(bB){var bC;return bB==="5"||bB==="five"?{$:1,$0:new B({$:0,$0:"five",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bi.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"five",$3:{$:1,$0:1}})])}})}:null;};E.Four=function(bB){var bC;return bB==="4"||bB==="four"?{$:1,$0:new B({$:0,$0:"four",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bi.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"four",$3:{$:1,$0:1}})])}})}:null;};E.Three=function(bB){var bC;return bB==="3"||bB==="three"?{$:1,$0:new B({$:0,$0:"three",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bi.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"three",$3:{$:1,$0:1}})])}})}:null;};E.Two=function(bB){var bC;return bB==="2"||bB==="two"?{$:1,$0:new B({$:0,$0:"two",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bi.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"two",$3:{$:1,$0:1}})])}})}:null;};E.One=function(bB){var bC;return bB==="1"||bB==="one"?{$:1,$0:new B({$:0,$0:"one",$1:{$:1,$0:new y({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bi.ofArray([new A({$:0,$0:"wit/ordinal",$1:"",$2:"one",$3:{$:1,$0:1}})])}})}:null;};E.QuickNo=function(bB){var bC;return bB==="no"||(bB==="nope"||(bB==="no way"||(bB==="nah"||(bB==="don't do it"||bB==="stop"))))?{$:1,$0:new B({$:0,$0:"no",$1:{$:1,$0:new y({$:0,$0:"reject",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickYes=function(bB){var bC;return bB==="yes"||(bB==="ok"||(bB==="sure"||(bB==="yeah"||(bB==="yep"||(bB==="uh huh"||(bB==="go ahead"||bB==="go"))))))?{$:1,$0:new B({$:0,$0:"yes",$1:{$:1,$0:new y({$:0,$0:"verify",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickHelp=function(bB){var bC;return bB==="help"||(bB==="help me"||(bB==="what's this?"||bB==="huh"))?{$:1,$0:new B({$:0,$0:"help",$1:{$:1,$0:new y({$:0,$0:"help",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.QuickHello=function(bB){var bC;return bB==="hello"||(bB==="hey"||(bB==="yo"||bB==="hi"))?{$:1,$0:new B({$:0,$0:"hello",$1:{$:1,$0:new y({$:0,$0:"greet",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};E.Voices=function(bB){return bB==="voices"?{$:1,$0:null}:null;};E.Debug=function(bB){return bB==="debug"?{$:1,$0:null}:null;};E.Blank=function(bB){return bB===""?{$:1,$0:null}:null;};J.Study=function(bB){return bB.get_Traits()!=null?{$:0,$0:null}:{$:1,$0:null};};x.StrA=function(bB){if(bB!=null&&bB.$==1)try{return{$:1,$0:((bs.DecodeArray(bs.Id()))())(bt.parse(bB.$0))};}catch(bC){return null;}else return null;};x.PStr=function(bB){var bC;return bB!=null&&bB.$==1&&(typeof bB.$0=="string"&&(bC=bB.$0,true))?{$:1,$0:bC}:null;};x.No=function(bB){var bC,bD;return(bD=x.Intent$1("reject",bB),bD!=null&&bD.$==1&&(bD.$0[0]==null&&(bD.$0[1]==null&&(bC=bB,true))))?{$:1,$0:bC}:null;};x.Yes=function(bB){var bC,bD;return(bD=x.Intent$1("verify",bB),bD!=null&&bD.$==1&&(bD.$0[0]==null&&(bD.$0[1]==null&&(bC=bB,true))))?{$:1,$0:bC}:null;};x.EntityManyofMany=function(bB,bC){return{$:1,$0:bo.OfArray(_6.ofSeq(bi.map(function(bD){return bi.exists(function(bE){return bE.get_Role()===bD;},bC)?[bD,{$:1,$0:bi.filter(function(bE){return bE.get_Role()===bD;},bC)}]:[bD,null];},bB)))};};x.EntityManyOf1=function(bB,bC){var bD;return bC!=null&&bC.$==1&&(bi.exists(function(bE){return bE.get_Role()===bB;},bC.$0)&&(bD=bC.$0,true))?{$:1,$0:bi.filter(function(bE){return bE.get_Role()===bB;},bD)}:null;};x.Entity1OfAny=function(bB,bC){var bD;return bC!=null&&bC.$==1&&(bi.exists(function(bE){return bE.get_Role()===bB;},bC.$0)&&(bD=bC.$0,true))?{$:1,$0:bi.head(bi.sortBy(function(bE){return bE.get_Role();},bi.filter(function(bE){return bE.get_Role()===bB;},bD)))}:null;};x.Entity1Of1=function(bB,bC){var bD,bE;return bC!=null&&bC.$==1&&(bC.$0.$==1&&(bC.$0.$1.$==0&&((bE=bC.$0.$0,bE.get_Role()===bB||bE.get_Name()===bB)&&(bD=bC.$0.$0,true))))?{$:1,$0:bD}:null;};x.Intent$1=function(bB,bC){return bC.get_Intent()!=null&&bC.get_Intent().$0.get_Name()===bB?{$:1,$0:[bC.get_Traits(),bC.get_Entities()]}:null;};K.$cctor=function(){K.$cctor=a.ignore;K.entity_types=bi.ofArray(["wit$contact:name","wit$datetime:datetime","term:subject","term:object","term:verb"]);K.trait_types=bi.ofArray(["domain","dialogue_act"]);K.intentConfidenceThreshold=0.85;K.entityConfidenceThreshold=0.85;};M.MicReady={$:5};M.MicAudioEnd={$:4};M.MicAudioStart={$:3};M.MicDisconnected={$:2};M.MicConnecting={$:1};M.MicNotInitialized={$:0};N.ClientUnderstand={$:2};N.ClientReady={$:1};N.ClientNotInitialzed={$:0};O=L.Interpreter=_9.Class({get_Options:function(){return(this.get_Unwrap())[2];},get_Text:function(){return(this.get_Unwrap())[1];},get_Voice:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1[0],this.$1[1]];}},null,O);P=L.CUI=_9.Class({SayVoices:function(){var bB,bC,bD;bB=this;bC=a.speechSynthesis.getVoices();!(bC==null)?(bD=d.toArray(bC),bB.Say((function(bE){return function(bF){return bE("There are currently "+a.String(bF)+" voices installed on this computer or device.");};}(a.id))(_6.length(bD))),_6.iteri(function(bE,bF){return bB.Say(((((_9.Curried(function(bG,bH,bI,bJ){return bG("Voice "+a.String(bH)+". Name: "+be.toSafe(bI)+", Local: "+be.prettyPrint(bJ)+".");},4))(a.id))(bE))(bF.name))(bF.localService));},bD)):void 0;},Wait:function(bB){this.Wait$1(function(){bl.Start(bB,null);});},Wait$1:function(bB){this["Echo'"]("please wait...");this.Term.pause();bB();this.Term.resume();},sayRandom:function(bB,bC){this.Say(v.getRandomPhrase(bB,bC));},SayAngry:function(bB){var bC,bD;bC=this;bl.Start((bD=null,bl.Delay(function(){return bl.Combine(a.speechSynthesis.speaking?(a.speechSynthesis.cancel(),bu.chime(),bl.Zero()):bl.Zero(),bl.Delay(function(){a.addMessage(bC.Avatar,bB,"","");bC.Avatar.processMessages(0);return bl.Zero();}));})),null);},SayDoc:function(bB){var bC,bD,bE;bC=_6.get(bg(".terminal-output").get(),0).childNodes.length;bD=ba.Element("div",[d.cls("terminal-command"),d.dindex(bC+1)],[bB]);bE=d.terminalOutput();bd.LoadLocalTemplates("");ba.RunAppend(bE,bD);},Say:function(bB){var bC,bD;bC=this;bl.Start((bD=null,bl.Delay(function(){return bl.Combine(a.speechSynthesis.speaking?(bu.chime(),bl.Zero()):bl.Zero(),bl.Delay(function(){bC.Avatar.addMessage(bB);bC.Avatar.processMessages(0);return bl.Zero();}));})),null);},Debug:function(bB,bC){d.debug(bB,bC);},"EchoHtml'":function(bB){var bC,bD;bC=(bD={},bD.raw=true,bD);this.Term.disable();this.Term.echo(bB,bC);this.Term.enable();},"Echo'":function(bB){this.Term.disable();this.Term.echo(bB);this.Term.enable();}},null,P);P.New=function(bB,bC,bD,bE,bF,bG,bH){return new P({Voice:bB,Mic:bC,Term:bD,Avatar:bE,Caption:bF,AudioHandlers:bG,TypingDNA:bH});};Q=c.Dialogue=_9.Class({get_Utterances:function(){return this.$4;},get_Output:function(){return this.$3;},get_DialogueQuestions:function(){return this.$2;},get_Props:function(){return this.$1;},get_Cui:function(){return this.$0;}},null,Q);R=c.Question=_9.Class({toString:function(){return((((_9.Curried(function(bB,bC,bD,bE){return bB("Name: "+be.toSafe(bC)+" Module: "+be.toSafe(bD)+" Type: "+_3.p$8(bE)+" ");},4))(a.id))(this.get_Name()))(this.get_Module()))(this.get_Type());},get_Target:function(){return this.$4;},get_Params:function(){return this.$3;},get_Type:function(){return this.$2;},get_Module:function(){return this.$1;},get_Name:function(){return this.$0;}},null,R);S.ConceptCompletion={$:3};S.Disjunctive={$:2};S.Verification={$:1};T["Response'_"]=function(bB,bC,bD){var bE,bF,bG,bH,bI,bJ,bK,bL;return(bF=T.PropNotSet_(bB,"user",bD),bF!=null&&bF.$==1?(bG=T.Form(bB,bC,bF.$0),bG!=null&&bG.$==1?(bE=bG.$0,true):(bH=T.PropNotSet_(bB,"user",bD),bH!=null&&bH.$==1&&(bI=T.NotForm(bB,bC,bH.$0),bI!=null&&bI.$==1&&(bE=bI.$0,true)))):(bJ=T.PropNotSet_(bB,"user",bD),bJ!=null&&bJ.$==1&&(bK=T.NotForm(bB,bC,bJ.$0),bK!=null&&bK.$==1&&(bE=bK.$0,true))))?(bL=T.have(bB,bC)?{$:1,$0:T.prop(bB,bC)}:null,bE.get_Text()!==""?{$:1,$0:[bE,{$:1,$0:bE.get_Text()},bL]}:{$:1,$0:[bE,null,bL]}):null;};T.Response_=function(bB,bC,bD){var bE,bF,bG,bH,bI,bJ,bK,bL;return(bF=T.PropSet_(bB,"user",bD),bF!=null&&bF.$==1?(bG=T.Form(bB,bC,bF.$0),bG!=null&&bG.$==1?(bE=bG.$0,true):(bH=T.PropSet_(bB,"user",bD),bH!=null&&bH.$==1&&(bI=T.NotForm(bB,bC,bH.$0),bI!=null&&bI.$==1&&(bE=bI.$0,true)))):(bJ=T.PropSet_(bB,"user",bD),bJ!=null&&bJ.$==1&&(bK=T.NotForm(bB,bC,bJ.$0),bK!=null&&bK.$==1&&(bE=bK.$0,true))))?(bL=T.have(bB,bC)?{$:1,$0:T.prop(bB,bC)}:null,bE.get_Text()!==""?{$:1,$0:[bE,{$:1,$0:bE.get_Text()},bL]}:{$:1,$0:[bE,null,bL]}):null;};T.NotForm=function(bB,bC,bD){return bB.get_DialogueQuestions().length>0&&(bB.get_DialogueQuestions())[0].get_Name()===bC&&bD.get_Text()!==""?{$:1,$0:bD}:null;};T.Form=function(bB,bC,bD){return bB.get_DialogueQuestions().length>0&&(bB.get_DialogueQuestions())[0].get_Name()===bC&&bD.get_Intent()!=null&&bD.get_Intent().$0.get_Name()===bC&&bv.Equals(bD.get_Intent().$0.get_Confidence(),{$:1,$0:1})&&bv.Equals(bD.get_Traits(),null)&&bv.Equals(bD.get_Entities(),null)?{$:1,$0:bD}:null;};T["User'_"]=function(bB,bC){var bD,bE;return(bE=T.PropNotSet_(bB,"user",bC),bE!=null&&bE.$==1&&(bB.get_DialogueQuestions().length===0&&(bD=bE.$0,true)))?{$:1,$0:bD}:null;};T.User_=function(bB,bC){var bD,bE;return(bE=T.PropSet_(bB,"user",bC),bE!=null&&bE.$==1&&(bB.get_DialogueQuestions().length===0&&(bD=bE.$0,true)))?{$:1,$0:bD}:null;};T.PropNotSet_=function(bB,bC,bD){return!T.have(bB,bC)?{$:1,$0:bD}:null;};T.PropSet_=function(bB,bC,bD){return T.have(bB,bC)?{$:1,$0:bD}:null;};T.Agenda_=function(bB,bC,bD,bE){return bB.get_DialogueQuestions().length>0&&(bB.get_DialogueQuestions())[0].get_Module()===bD?{$:1,$0:null}:null;};T.debugInterpreterEnd=function(bB,bC,bD){bC(((((_9.Curried(function(bE,bF,bG,bH){return bE(be.toSafe(bF)+" ending utterances:"+be.prettyPrint(bG)+", questions: "+be.prettyPrint(bH)+".");},4))(a.id))(bD))(bB.get_Utterances()))(bB.get_DialogueQuestions()));};T.debugInterpreterStart=function(bB,bC,bD){bC(((((_9.Curried(function(bE,bF,bG,bH){return bE(be.toSafe(bF)+" starting utterances:"+be.prettyPrint(bG)+", questions: "+be.prettyPrint(bH)+".");},4))(a.id))(bD))(bB.get_Utterances()))(bB.get_DialogueQuestions()));};T.frame=function(bB){return bi.ofSeq(bj.take(bB.length>=5?5:bB.length,bB));};T.didNotUnderstand=function(bB,bC,bD){bC((function(bE){return function(bF){return bE(be.toSafe(bF)+" interpreter did not understand utterance.");};}(a.id))(bD));T.popu(bB,bC);T.say(bB,"Sorry I didn't understand what you meant.");};T.endt=function(bB,bC,bD,bE){T.popu(bB,bC);T.popq(bB,bC);T.have(bB,bD)?T.remove(bB,bC,bD):void 0;bC((function(bF){return function(bG){return bF("End turn "+be.toSafe(bG)+".");};}(a.id))(bD));bE();};T.cancel=function(bB,bC,bD){var bE;bE=(bB.get_DialogueQuestions())[0];bE.get_Name()!==bD?(((_9.Curried3(function(bF,bG,bH){return bF(_3.p$9(bG)+" at the top of the stack does not have the name "+be.toSafe(bH)+".");}))(_.FailWith))(bE))(bD):void 0;T.popq(bB,bC);bC((function(bF){return function(bG){return bF("Cancel "+_3.p$9(bG)+".");};}(a.id))(bE));};T.trigger=function(bB,bC,bD,bE,bF){T.pushu(bB,bC,new B({$:0,$0:bt.stringify(bF),$1:{$:1,$0:new y({$:0,$0:bE,$1:{$:1,$0:1}})},$2:null,$3:null}));bD(bB);};T.handle=function(bB,bC,bD,bE){T.popu(bB,bC);bC((function(bF){return function(bG){return bF("Handle utterance "+be.toSafe(bG)+".");};}(a.id))(bD));bE();};T.dispatch=function(bB,bC,bD,bE){bC(((((_9.Curried(function(bF,bG,bH,bI){return bF("Dispatch to module "+be.toSafe(bG)+" utterances: "+be.prettyPrint(bH)+" questions: "+be.prettyPrint(bI)+".");},4))(a.id))(bD))(bB.get_Utterances()))(bB.get_DialogueQuestions()));bE(bB);};T.popq=function(bB,bC){var bD;bD=bB.get_DialogueQuestions().shift();bC((function(bE){return function(bF){return bE("Pop "+_3.p$9(bF)+".");};}(a.id))(bD));};T.pushq=function(bB,bC,bD){bB.get_DialogueQuestions().unshift(bD);bC((function(bE){return function(bF){return bE("Push "+_3.p$9(bF)+".");};}(a.id))(bD));};T.popu=function(bB,bC){var bD;bD=bB.get_Utterances().shift();bC((function(bE){return function(bF){return bE("Pop "+_3.p$7(bF)+".");};}(a.id))(bD));};T.pushu=function(bB,bC,bD){bC((function(bE){return function(bF){return bE("Push "+_3.p$7(bF)+".");};}(a.id))(bD));bB.get_Utterances().unshift(bD);};T.remove=function(bB,bC,bD){bC((function(bE){return function(bF){return bE("Remove property "+be.toSafe(bF)+".");};}(a.id))(bD));bB.get_Props().Remove(bD);};T.add=function(bB,bC,bD,bE){bB.get_Props().Add(bD,bE);bC((((_9.Curried3(function(bF,bG,bH){return bF("Add property "+be.toSafe(bG)+":"+be.prettyPrint(bH)+".");}))(a.id))(bD))(bE));};T.prop=function(bB,bC){return bB.get_Props().ContainsKey(bC)?bB.get_Props().get_Item(bC):(function(bD){return function(bE){return bD("The "+be.toSafe(bE)+" dialogue property does not exist.");};}(_.FailWith))(bC);};T.have=function(bB,bC){return bB.get_Props().ContainsKey(bC);};T["sayRandom'"]=function(bB,bC){T.sayRandom(bB,bC,"");};T.sayRandom=function(bB,bC,bD){var bE;bE=v.getRandomPhrase(bC,bD);bB.get_Output().unshift(bE);bB.get_Cui().Say(bE);};T.say=function(bB,bC){bB.get_Output().unshift(bC);T["say'"](bB,bC);};T["say'"]=function(bB,bC){bB.get_Cui().Say(bC);};T.echo=function(bB,bC){(bB.get_Cui())["EchoHtml'"](bC);};U.ask=function(bB,bC,bD){var bE,bF,bG,bH;function bI(bN){T.say(bB,bN);}function bJ(bN){bN.input="text";bN.showCancelButton=true;bN.confirmButtonText="Ok";}function bK(bN){bN.confirmButtonClass="invisible";bN.showCancelButton=true;}function bL(){var bN;bN=d.createDialogueBoxCanvas();d.startCamera(self.document.body,bN);}function bM(bN){var bO,bP;bO=bN[0];bP=bN[1];d.questionBox("Biometric Authentication","",{$:1,$0:d.boxesWithTitles(["2","3"])},{$:1,$0:[640,480]},{$:1,$0:bJ},{$:1,$0:bL},function(bQ){var bR,bS,bT,bU;bQ.isConfirmed?(bR=bB.get_Cui().TypingDNA.getTypingPattern((bS={},bS.type=1,bS.text=bH,bS.caseSensitive=false,bS)),bT=bQ.value,bU=d.getCameraCanvas().toDataURL(),bC((function(bV){return function(bW){return bV("User image is "+be.toSafe(bW)+"...");};}(a.id))(bh.Substring(bU,0,10))),d.stopCamera(),bC((((_9.Curried3(function(bV,bW,bX){return bV("User entered typing pattern "+be.toSafe(bW)+" for text "+be.toSafe(bX));}))(a.id))(bR))(bT)),bT.toLowerCase()!==bH.toLowerCase()?(bI("Sorry you did not enter the passphrase correctly. Please try again."),bM([bO,bP])):d.questionBox("Biometric Authentication","",null,null,{$:1,$0:bK},{$:1,$0:function(){d.getDialogueBoxContent().appendChild(d.getMic());bB.get_Cui().AudioHandlers.Add("VoiceAuthentication",function(bV){bt.stringify(((bs.Id())())(bV));d.confirmQuestionBox();});}},function(bV){if(!bV.isConfirmed){bB.get_Cui().AudioHandlers.Remove("VoiceAuthentication");bI("OK but you must login for me to help you.");}})):bI("OK but you must login for me to help you.");});}T.pushq(bB,bC,bD);bE=bD.get_Type();bE.$==0?(bF=bD.get_Target(),bG=bD.get_Name(),bH=(function(bN){return function(bO){return bN("Hello my name is "+be.toSafe(bO)+" and I am an administrator");};}(a.id))(bE.$0),bI((function(bN){return function(bO){return bN("Enter the phrase "+be.toSafe(bO)+".");};}(a.id))(bH)),bM([0,[]])):_.FailWith("Not implemented");};V.update=function(bB){var bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc;function cd(co){T.say(bB,co);}function ce(co,cp){return T.sayRandom(bB,co,cp);}function cf(co,cp){return T.add(bB,function(cq){V.debug(cq);},co,cp);}function cg(co){V.debug(co);}function ch(co){V.debug(co);}function ci(co){V.debug(co);}function cj(co){return T["User'_"](bB,co);}function ck(co,cp){return T.Response_(bB,co,cp);}function cl(co,cp){return T["Response'_"](bB,co,cp);}function cm(co){var cp;ce(v.waitRetrievePhrases(),"user name");bl.Start((cp=null,bl.Delay(function(){return bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.getRel:-795711990",[]),function(){return bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.getUser:1912761553",[co]),function(cq){var cr;return cq==null?(cd((function(cs){return function(ct){return cs("I did not find a user with the name "+be.toSafe(ct)+".");};}(a.id))(co)),bE(new R({$:0,$0:"addUser",$1:V.name(),$2:S.Verification,$3:null,$4:function(){cf("addUser",co);cd((function(cs){return function(ct){return cs("Do you want me to add the user "+be.toSafe(ct)+"?");};}(a.id))(co));}})),bl.Zero()):(cr=cq.$0,bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.updateUserLastLogin:-1326261564",[cr.Name]),function(){ce(v.helloUserPhrases(),(function(cs){return function(ct){return cs(be.prettyPrint(ct));};}(a.id))(cr.Name));return cr.LastLoggedIn!=null?bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.humanize:-1009851921",[cr.LastLoggedIn.$0]),function(cs){cd((function(ct){return function(cu){return ct("You last logged in "+be.toSafe(cu)+".");};}(a.id))(cs));return bl.Zero();}):bl.Zero();}));});});})),null);}function cn(co){return new R({$:0,$0:"switchUser",$1:V.name(),$2:S.Verification,$3:null,$4:function(){cd((function(cp){return function(cq){return cp("Do you want me to switch to the user "+be.toSafe(cq));};}(a.id))(co));}});}T.debugInterpreterStart(bB,function(co){V.debug(co);},V.name());bC=_9.Curried(T.handle,2,[bB,cg]);bD=_9.Curried(T.endt,2,[bB,ch]);bE=function(co){U.ask(bB,ci,co);};bF=T.frame(bB.$4);bF.$==1&&(bH=cj(bF.$0),bH!=null&&bH.$==1&&(bI=x.Intent$1("greet",bH.$0),bI!=null&&bI.$==1&&(bJ=x.Entity1Of1("name",bI.$0[1]),bJ!=null&&bJ.$==1&&(bF.$1.$==0&&(bG=bJ.$0,true)))))?(bC("loginUser"))(function(){cm(bG.get_Value());}):bF.$==1&&(bL=cj(bF.$0),bL!=null&&bL.$==1&&(bM=x.Intent$1("hello",bL.$0),bM!=null&&bM.$==1&&(bN=x.Entity1Of1("contact",bM.$0[1]),bN!=null&&bN.$==1&&(bF.$1.$==0&&(bK=bN.$0,true)))))?(bC("loginUser"))(function(){cm(bK.get_Value());}):bF.$==1&&(bP=cl("authenticateUser",bF.$0),bP!=null&&bP.$==1&&(bQ=x.StrA(bP.$0[1]),bQ!=null&&bQ.$==1&&(bF.$1.$==0&&(bO=bQ.$0,true))))?(bD("authenticateUser"))(function(){var co;V.debug(bO);bl.Start((co=null,bl.Delay(function(){return bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.hasFace:216973478",[_6.get(bO,2)]),function(cp){return cp?(cd("Face detected"),bl.Zero()):(cd(function(cq){return cq("Sorry I did not detect a face in the camera image. Make sure you can see the red square around your face in the camera window when you click the OK button.");}(a.id)),bl.Zero());});})),null);}):bF.$==1&&(bS=x.No(bF.$0),bS!=null&&bS.$==1&&(bT=cl("addUser",bS.$0),bT!=null&&bT.$==1&&(bU=x.PStr(bT.$0[2]),bU!=null&&bU.$==1&&(bF.$1.$==0&&(bR=bU.$0,true)))))?(bD("addUser"))(function(){cd((function(co){return function(cp){return co("Ok I did not add the user "+be.toSafe(cp)+". But you must login for me to help you.");};}(a.id))(bR));}):bF.$==1&&(bW=x.Yes(bF.$0),bW!=null&&bW.$==1&&(bX=cl("addUser",bW.$0),bX!=null&&bX.$==1&&(bY=x.PStr(bX.$0[2]),bY!=null&&bY.$==1&&(bF.$1.$==0&&(bV=bY.$0,true)))))?(bD("addUser"))(function(){bE(new R({$:0,$0:"authenticateNewUser1",$1:V.name(),$2:{$:0,$0:bV},$3:null,$4:function(co){V.update(co);}}));}):bF.$==1&&(b0=cl("authenticateNewUser1",bF.$0),b0!=null&&b0.$==1&&(b1=x.StrA(b0.$0[1]),b1!=null&&b1.$==1&&(bF.$1.$==0&&(bZ=b1.$0,true))))?(bD("authenticateNewUser1"))(function(){cd((function(co){return function(cp){return co("Authenticate new user "+be.toSafe(cp)+".");};}(a.id))(_6.get(bZ,0)));}):bF.$==1&&(b3=T.User_(bB,bF.$0),b3!=null&&b3.$==1&&(b4=x.Intent$1("hello",b3.$0),b4!=null&&b4.$==1&&(b4.$0[0]==null&&(b5=x.Entity1Of1("name",b4.$0[1]),b5!=null&&b5.$==1&&(bF.$1.$==0&&(b2=b5.$0,true))))))?bl.Start((b6=null,bl.Delay(function(){return bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.getUser:1912761553",[b2.get_Value()]),function(co){return co==null?(cd((function(cp){return function(cq){return cp("Sorry, the user "+be.toSafe(cq)+" does not exist.");};}(a.id))(b2.get_Value())),bl.Zero()):(bE(cn(co.$0.Name)),bl.Zero());});})),null):bF.$==1&&(b8=x.Yes(bF.$0),b8!=null&&b8.$==1&&(b9=ck("switchUser",b8.$0),b9!=null&&b9.$==1&&(b_=x.PStr(b9.$0[2]),b_!=null&&b_.$==1&&(bF.$1.$==0&&(b7=b_.$0,true)))))?(bB.$1.set_Item("user",b7),cd((function(co){return function(cp){return co("Ok I switched to user "+be.prettyPrint(cp)+".");};}(a.id))(b7))):bF.$==1&&(ca=x.No(bF.$0),ca!=null&&ca.$==1&&(cb=ck("switchUser",ca.$0),cb!=null&&cb.$==1&&(cc=x.PStr(cb.$0[2]),cc!=null&&cc.$==1&&(bF.$1.$==0&&(b$=cc.$0,true)))))?cd((function(co){return function(cp){return co("Ok I did not switch to user "+be.toSafe(cp)+".");};}(a.id))(b$)):T.didNotUnderstand(bB,function(co){V.debug(co);},V.name());T.debugInterpreterEnd(bB,function(co){V.debug(co);},V.name());};V.debug=function(bB){d.debug(V.name(),bB);};V.name=function(){W.$cctor();return W.name;};W.$cctor=function(){W.$cctor=a.ignore;W.name="User";};X.update=function(bB){var bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;function bS(bY){T.say(bB,bY);}function bT(bY,bZ){return T.sayRandom(bB,bY,bZ);}function bU(bY){return T.prop(bB,bY);}function bV(bY){return T.User_(bB,bY);}function bW(){return bU("user");}function bX(bY,bZ,b0){var b1;return bl.Start((b1=null,bl.Delay(function(){bT(v.waitAddPhrases(),"symptom entry");return bl.Bind((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.addSymptomJournalEntry:-1620161810",[bW().Name,bY,bZ,b0]),function(b2){return b2.$==1?(bS(function(b3){return b3("Sorry I wasn't able to add that symptom to your journal. Could you try again?");}(a.id)),bl.Zero()):(bS((function(b3){return function(b4){return b3("OK I added that "+be.toSafe(b4)+" symptom to your journal.");};}(a.id))(bY)),bl.Zero());});})),null);}T.debugInterpreterStart(bB,function(bY){X.debug(bY);},X.name());bC=T.frame(bB.$4);bC.$==1&&(bE=bV(bC.$0),bE!=null&&bE.$==1&&(bF=x.Intent$1("symptom",bE.$0),bF!=null&&bF.$==1&&(bG=x.Entity1OfAny("symptom_name",bF.$0[1]),bG!=null&&bG.$==1&&(bC.$1.$==0&&(bD=bG.$0,true)))))?bl.Start((bH=null,bl.Delay(function(){bS("Ok I'll add that entry to your symptom journal");bX(bD.get_Value(),null,null);return bl.Zero();})),null):bC.$==1&&(bJ=x.Yes(bC.$0),bJ!=null&&bJ.$==1&&((bK=T.Response_(bB,"painVideo",bJ.$0),bK!=null&&bK.$==1)&&bC.$1.$==0))?bB.$0["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"):bC.$==1&&(bM=bV(bC.$0),bM!=null&&bM.$==1&&(bN=x.Intent$1("medjournal",bM.$0),bN!=null&&bN.$==1&&((bO=bN.$0[1],bO!=null&&bO.$==1)&&(bC.$1.$==0&&(bL=bN.$0[1].$0,true)))))?(bS("ok I added that entry to your medication journal."),bS("You should be careful not to take too many painkillers over a short period of time.")):bC.$==1&&(bQ=bV(bC.$0),bQ!=null&&bQ.$==1&&((bR=x.Intent$1("kbquery",bQ.$0),bR!=null&&bR.$==1)&&(bC.$1.$==0&&(bP=bQ.$0,true))))?void 0:T.didNotUnderstand(bB,function(bY){X.debug(bY);},X.name());T.debugInterpreterEnd(bB,function(bY){X.debug(bY);},X.name());};X.debug=function(bB){d.debug(X.name(),bB);};X.name=function(){Y.$cctor();return Y.name;};Y.$cctor=function(){Y.$cctor=a.ignore;Y.name="Symptoms";};Z.update=function(bB){var bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;function bX(b2){T.say(bB,b2);}function bY(b2){T["sayRandom'"](bB,b2);}function bZ(b2){Z.debug(b2);}function b0(b2){Z.debug(b2);}function b1(b2){return T["User'_"](bB,b2);}bC=bB.$4;Z.debug(((((_9.Curried(function(b2,b3,b4,b5){return b2("Module "+be.toSafe(b3)+" starting utterances:"+be.prettyPrint(b4)+", questions: "+be.prettyPrint(b5)+".");},4))(a.id))(Z.name()))(bC))(bB.$2));bD=_9.Curried(T.dispatch,2,[bB,bZ]);bE=_9.Curried(T.handle,2,[bB,b0]);bF=T.frame(bC);bG=T.Agenda_(bB,function(b2){Z.debug(b2);},V.name(),bF);bG!=null&&bG.$==1?(Z.debug((function(b2){return function(b3){return b2("Agenda is "+_3.p$9(b3)+".");};}(a.id))((bB.get_DialogueQuestions())[0])),V.update(bB)):bF.$==1&&(bI=(bJ=T.PropNotSet_(bB,"started",bF.$0),bJ!=null&&bJ.$==1?{$:1,$0:bJ.$0}:null),bI!=null&&bI.$==1&&(bK=b1(bI.$0),bK!=null&&bK.$==1&&(bL=x.Intent$1("greet",bK.$0),bL!=null&&bL.$==1&&(bL.$0[1]==null&&bF.$1.$==0))))?(T.add(bB,function(b2){Z.debug(b2);},"started",true),(bE("greet"))(function(){bY(v.helloPhrases());})):bF.$==1&&(bN=b1(bF.$0),bN!=null&&bN.$==1&&(bO=x.Intent$1("greet",bN.$0),bO!=null&&bO.$==1&&(bO.$0[1]==null&&bF.$1.$==0)))?(bE("greet"))(function(){bX("Hello, tell me your name to get started.");}):bF.$==1&&(bQ=b1(bF.$0),bQ!=null&&bQ.$==1&&(bR=x.Intent$1("greet",bQ.$0),bR!=null&&bR.$==1&&((bS=x.Entity1Of1("name",bR.$0[1]),bS!=null&&bS.$==1)&&bF.$1.$==0)))?(bD(V.name()))(function(b2){V.update(b2);}):bF.$==1&&(bU=b1(bF.$0),bU!=null&&bU.$==1&&(bV=x.Intent$1("hello",bU.$0),bV!=null&&bV.$==1&&((bW=x.Entity1Of1("contact",bV.$0[1]),bW!=null&&bW.$==1)&&bF.$1.$==0)))?(bD(V.name()))(function(b2){V.update(b2);}):T.didNotUnderstand(bB,function(b2){Z.debug(b2);},Z.name());T.debugInterpreterEnd(bB,function(b2){Z.debug(b2);},Z.name());};Z.debug=function(bB){d.debug(Z.name(),bB);};Z.name=function(){_0.$cctor();return _0.name;};_0.$cctor=function(){_0.$cctor=a.ignore;_0.name="Main";};_1.run=function(){var bB,bC;bB=_9.ThisFunc(function(bD,bE){return((_1.Main().get_Text())(bD))(bE);});bC=_1.Main().get_Options();a.$("#term").terminal(bB,bC);return ba.get_Empty();};_1.Main=function(){_2.$cctor();return _2.Main;};_1.initMic=function(bB){var bC,bD;_1.set_CUI((bC={$:1,$0:new by.Microphone(bz.getElementById("microphone"))},P.New(_1.CUI().Voice,bC,_1.CUI().Term,_1.CUI().Avatar,_1.CUI().Caption,_1.CUI().AudioHandlers,_1.CUI().TypingDNA)));bD=_1.CUI().Mic.$0;bD.onconnecting=function(){_1.set_MicState(M.MicConnecting);return _1.debug("Mic connecting...");};bD.ondisconnected=function(){_1.set_MicState(M.MicDisconnected);return _1.debug("Mic disconnected.");};bD.onaudiostart=function(){_1.set_MicState(M.MicAudioStart);return _1.debug("Mic audio start...");};bD.onaudioend=function(){var bE,bF,bG,bH;_1.debug("Mic audio end.");bF=_1.CUI().AudioHandlers;bE=bF.GetEnumerator$1();try{while(bE.MoveNext()){bG=bE.Current();_1.debug((function(bI){return function(bJ){return bI("Executing audio handler "+be.toSafe(bJ)+".");};}(a.id))(bG.K));_1.set_MicState({$:7,$0:bG.K});bH=bG.V;_1.CUI().AudioHandlers.Remove(bG.K);bH(d.lastMicData());}return;}finally{bE.Dispose();}};bD.onerror=function(bE){_1.set_MicState({$:6,$0:bE});return _1.debug((function(bF){return function(bG){return bF("Mic error : "+be.toSafe(bG)+".");};}(a.id))(bE));};bD.onready=function(){_1.set_MicState(M.MicReady);return _1.debug("Mic ready.");};bD.onresult=function(bE,bF){return _1.ClientState().$==2?_1.echo("I'm still trying to understand what you said before."):_1.ClientState().$==0?d.error("Client is not intialized."):_1.MicState().$==7?null:!(bE==null||bF==null)?(_1.set_MicState({$:8,$0:bE,$1:bF}),_1.debug((((_9.Curried3(function(bG,bH,bI){return bG("Mic result: "+be.prettyPrint(bH)+" "+be.prettyPrint(bI)+".");}))(a.id))(bE))(bF)),bB(bE,bF)):_1.debug("Mic: No result returned.");};bD.connect("4Y2BLQY5TWLIN7HFIV264S53MY4PCUAT");};_1.sayRandom=function(bB,bC){_1.say(v.getRandomPhrase(bC,bB));};_1.say=function(bB){_1.Output().unshift(bB);_1["say'"](bB);};_1["say'"]=function(bB){_1.CUI().Say(bB);};_1.initSpeech=function(){var bB;bB=d.toArray(_1.synth().getVoices());_6.length(bB)>0?(_6.iter(function(bC){if(bv.Equals(_1.CUI().Voice,null)&&(bC.name.indexOf("Microsoft Zira")!=-1||bC.name.toLowerCase().indexOf("female")!=-1)){_1.set_CUI(P.New({$:1,$0:bC},_1.CUI().Mic,_1.CUI().Term,_1.CUI().Avatar,_1.CUI().Caption,_1.CUI().AudioHandlers,_1.CUI().TypingDNA));_1.debug((function(bD){return function(bE){return bD("Using browser speech synthesis voice "+be.toSafe(bE)+".");};}(a.id))(_1.CUI().Voice.$0.name));}},bB),!bv.Equals(_1.CUI().Voice,null)?(_1.CUI().Avatar.nativeVoice=true,_1.CUI().Avatar.nativeVoiceName=_1.CUI().Voice.$0.name,_1.debug((function(bC){return function(bD){return bC("Using browser speech synthesis voice "+be.toSafe(bD)+".");};}(a.id))(_1.CUI().Voice.$0.name))):void 0):void 0;bv.Equals(_1.CUI().Voice,null)?_1.debug("No female browser speech synthesis voice is available. Using CMU SLT Female voice via TTS."):void 0;};_1.synth=function(){_2.$cctor();return _2.synth;};_1.push=function(bB){_1.Utterances().unshift(bB);return _1.Dialogue();};_1.Dialogue=function(){_2.$cctor();return _2.Dialogue;};_1.Utterances=function(){_2.$cctor();return _2.Utterances;};_1.Questions=function(){_2.$cctor();return _2.Questions;};_1.Output=function(){_2.$cctor();return _2.Output;};_1.Props=function(){_2.$cctor();return _2.Props;};_1.wait=function(bB){d["Terminal.Echo'"](_1.CUI().Term,"please wait");_1.CUI().Term.pause();bB();_1.CUI().Term.resume();};_1.debug=function(bB){d.debug("CLIENT",bB);};_1.echo=function(bB){d["Terminal.EchoHtml'"](_1.CUI().Term,(function(bC){return function(bD){return bC(be.prettyPrint(bD));};}(a.id))(bB));};_1.ClientState=function(){_2.$cctor();return _2.ClientState;};_1.set_ClientState=function(bB){_2.$cctor();_2.ClientState=bB;};_1.MicState=function(){_2.$cctor();return _2.MicState;};_1.set_MicState=function(bB){_2.$cctor();_2.MicState=bB;};_1.CUI=function(){_2.$cctor();return _2.CUI;};_1.set_CUI=function(bB){_2.$cctor();_2.CUI=bB;};_2.$cctor=function(){var bB,bC,bD;_2.$cctor=a.ignore;function bE(bG,bH){var bI,bJ,bK,bL,bM,bN,bO;_1.debug((((_9.Curried3(function(bP,bQ,bR){return bP("Voice: "+be.prettyPrint(bQ)+" "+be.prettyPrint(bR));}))(a.id))(bG))(bH));bI=(bJ=C["Intent'"](bG,bH),bJ!=null&&bJ.$==1?{$:1,$0:bJ.$0}:null);bK=(bL=C["Trait'"](bH),bL!=null&&bL.$==1?{$:1,$0:bi.ofArray([bL.$0])}:null);bM=(bN=C["Entity'$1"](bH),bN!=null&&bN.$==1?{$:1,$0:bi.ofArray([bN.$0])}:null);bI==null&&(bK==null&&bM==null)?void 0:(_1.debug(((((_9.Curried(function(bP,bQ,bR,bS){return bP("Voice: "+_3.p(bQ)+" "+_3.p$3(bR)+" "+_3.p$5(bS));},4))(a.id))(bI))(bK))(bM)),Z.update(_1.push(new B({$:0,$0:"",$1:bI,$2:bK,$3:bM}))));}function bF(bG,bH){var bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;_1.set_CUI(P.New(_1.CUI().Voice,_1.CUI().Mic,bG,_1.CUI().Avatar,_1.CUI().Caption,_1.CUI().AudioHandlers,_1.CUI().TypingDNA));bv.Equals(_1.CUI().Mic,null)?_1.initMic(bE):void 0;bv.Equals(_1.CUI().Voice,null)?_1.initSpeech():void 0;_1.ClientState().$===0?_1.set_ClientState(N.ClientReady):void 0;return(bI=E.Blank(bH),bI!=null&&bI.$==1)?_1["say'"]("Tell me what you want me to do or ask me a question."):(bJ=E.Debug(bH),bJ!=null&&bJ.$==1)?((new bx.New()).Async("SMApp.Web:SMApp.Web.Server.getRel:-795711990",[]),null):(bK=E.Voices(bH),bK!=null&&bK.$==1)?(bL=d.toArray(d.speechSynthesis().getVoices()),(_1["say'"]((function(bT){return function(bU){return bT("There are currently "+a.String(bU)+" voices installed on this computer or device.");};}(a.id))(_6.length(bL))),_6.iteri(function(bT,bU){return _1["say'"](((((_9.Curried(function(bV,bW,bX,bY){return bV("Voice "+a.String(bW)+". Name: "+be.toSafe(bX)+", Local: "+be.prettyPrint(bY)+".");},4))(a.id))(bT))(bU.name))(bU.localService));},bL))):_1.ClientState().$==1?(bN=E.QuickHello(bH),bN!=null&&bN.$==1?(bM=bN.$0,true):(bO=E.QuickHelp(bH),bO!=null&&bO.$==1?(bM=bO.$0,true):(bP=E.QuickYes(bH),bP!=null&&bP.$==1?(bM=bP.$0,true):(bQ=E.QuickNo(bH),bQ!=null&&bQ.$==1?(bM=bQ.$0,true):(bR=E.QuickNumber(bH),bR!=null&&bR.$==1&&(bM=bR.$0,true))))))?(_1.debug((function(bT){return function(bU){return bT("Quick Text: "+_3.p$7(bU)+".");};}(a.id))(bM)),Z.update(_1.push(bM)),_1.set_ClientState(N.ClientReady)):_1.CUI().Wait((bS=null,bl.Delay(function(){_1.set_ClientState(N.ClientUnderstand);E.getUtterance(bH,function(bT){var bU,bV;bU=E.HasUtterance(bT);bU!=null&&bU.$==1?(bV=bU.$0,_1.debug(((((_9.Curried(function(bW,bX,bY,bZ){return bW("Text: Intent: "+_3.p(bX)+", Traits: "+_3.p$3(bY)+", Entities: "+_3.p$5(bZ)+".");},4))(a.id))(bV.get_Intent()))(bV.get_Traits()))(bV.get_Entities())),Z.update(_1.push(bV))):(_1.debug("Text: Did not receive a meaning from the server."),_1["say'"]("Sorry I did not understand what you said."));});_1.set_ClientState(N.ClientReady);return bl.Zero();}))):_1.ClientState().$==0?d.error("Client is not initialized."):_1["say'"]("I'm still trying to understand what you said before.");}_2.CUI=P.New(null,null,null,(bu.applicationId="4277115329081938617",bB=new a.SDKConnection(),bC=new a.WebAvatar(),bC.version=8.5,bC.connection=bB,bC.avatar="20926186",bC.voice="cmu-slt",bC.voiceMod="default",bC.width=175,bC.createBox(),bC.addMessage(""),bC.processMessages(0),bC),false,new bA.New$5(),new a.TypingDNA());_2.MicState=M.MicNotInitialized;_2.ClientState=N.ClientNotInitialzed;_2.Props=new bA.New$5();_2.Output=[];_2.Questions=[];_2.Utterances=[];_2.Dialogue=new Q({$:0,$0:_1.CUI(),$1:_1.Props(),$2:_1.Questions(),$3:_1.Output(),$4:_1.Utterances()});_2.synth=a.speechSynthesis;_2.Main=new O({$:0,$0:function(bG){return bE(bG[0],bG[1]);},$1:[function(bG){return function(bH){return bF(bG,bH);};},(bD={},bD.name="Main",bD.greetings="Welcome to Selma. Enter 'hello' or 'hello my name is...(you) to initialize speech.",bD.prompt=">",bD)]});};_3.p$8=function(bB){return bB.$==3?"ConceptCompletion":bB.$==2?"Disjunctive":bB.$==1?"Verification":"UserAuthentication "+be.prettyPrint(bB.$0);};_4.p=function(bB){return"{"+("text = "+be.prettyPrint(bB.text))+"; "+("intents = "+be.printArray(function(bC){return _4.p$1(bC);},bB.intents))+"; "+("entities = "+be.prettyPrint(bB.entities))+"; "+("traits = "+be.prettyPrint(bB.traits))+"}";};_4.p$1=function(bB){return"{"+("id = "+be.prettyPrint(bB.id))+"; "+("name = "+be.prettyPrint(bB.name))+"; "+("confidence = "+be.prettyPrint(bB.confidence))+"}";};_3.p$9=function(bB){return"Question ("+be.prettyPrint(bB.$0)+", "+be.prettyPrint(bB.$1)+", "+_3.p$8(bB.$2)+", "+_3.p$10(bB.$3)+", "+"<fun>"+")";};_3.p$10=function(bB){return bB==null?"null":"Some "+be.printArray(be.prettyPrint,bB.$0);};_3.p$2=function(bB){return bB==null?"null":"Some "+be.prettyPrint(bB.$0);};_3.p$1=function(bB){return"Intent ("+be.prettyPrint(bB.$0)+", "+_3.p$2(bB.$1)+")";};_3.p=function(bB){return bB==null?"null":"Some "+_3.p$1(bB.$0);};_3.p$4=function(bB){return"Trait ("+be.prettyPrint(bB.$0)+", "+be.prettyPrint(bB.$1)+", "+_3.p$2(bB.$2)+")";};_3.p$3=function(bB){return bB==null?"null":"Some "+be.printList(function(bC){return _3.p$4(bC);},bB.$0);};_3.p$6=function(bB){return"Entity ("+be.prettyPrint(bB.$0)+", "+be.prettyPrint(bB.$1)+", "+be.prettyPrint(bB.$2)+", "+_3.p$2(bB.$3)+")";};_3.p$5=function(bB){return bB==null?"null":"Some "+be.printList(function(bC){return _3.p$6(bC);},bB.$0);};_3.p$7=function(bB){return"Utterance ("+be.prettyPrint(bB.$0)+", "+_3.p(bB.$1)+", "+_3.p$3(bB.$2)+", "+_3.p$5(bB.$3)+")";};}());
