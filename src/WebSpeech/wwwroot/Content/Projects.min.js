function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(this);
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;a=self;b=a.WebSharper=a.WebSharper||{};c=b.Obj=b.Obj||{};d=a.Projects=a.Projects||{};e=d.App=d.App||{};f=b.UI=b.UI||{};g=f.ListModel=f.ListModel||{};h=f.Var$1=f.Var$1||{};i=d.Template=d.Template||{};j=i.Index=i.Index||{};k=j.Main=j.Main||{};l=j.ListItem=j.ListItem||{};m=f.Var=f.Var||{};n=b.Operators=b.Operators||{};o=f.ConcreteVar=f.ConcreteVar||{};p=f.Snap=f.Snap||{};q=f.Doc=f.Doc||{};r=b.JavaScript=b.JavaScript||{};s=r.Pervasives=r.Pervasives||{};t=f.Templating=f.Templating||{};u=t.Runtime=t.Runtime||{};v=u.Server=u.Server||{};w=v.TemplateInstance=v.TemplateInstance||{};x=b.Collections=b.Collections||{};y=x.List=x.List||{};z=f.Storage=f.Storage||{};A=b.Seq=b.Seq||{};B=f.Abbrev=f.Abbrev||{};C=B.Fresh=B.Fresh||{};D=a.EventTarget;E=a.Node;F=r.JS=r.JS||{};G=b.Unchecked=b.Unchecked||{};H=k.Instance=k.Instance||{};I=v.Handler=v.Handler||{};J=a.Projects_Templates=a.Projects_Templates||{};K=a.Object;L=a.System=a.System||{};M=L.Guid=L.Guid||{};N=f.View=f.View||{};O=x.Dictionary=x.Dictionary||{};P=l.Instance=l.Instance||{};Q=b.Arrays=b.Arrays||{};R=z.ArrayStorage=z.ArrayStorage||{};S=b.Numeric=b.Numeric||{};T=a.WindowOrWorkerGlobalScope;U=f.Docs=f.Docs||{};V=f.AttrProxy=f.AttrProxy||{};W=f.CheckedInput=f.CheckedInput||{};X=x.HashSet=x.HashSet||{};Y=v.TemplateInitializer=v.TemplateInitializer||{};Z=b.List=b.List||{};_0=Z.T=Z.T||{};_1=b.Enumerator=b.Enumerator||{};_2=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_3=f.DocElemNode=f.DocElemNode||{};_4=a.CharacterData;_5=f.DomUtility=f.DomUtility||{};_6=f.An=f.An||{};_7=f.Client=f.Client||{};_8=_7.Settings=_7.Settings||{};_9=B.Mailbox=B.Mailbox||{};_=x.DictionaryUtil=x.DictionaryUtil||{};$=_1.T=_1.T||{};ba=_7.Templates=_7.Templates||{};bb=_7.Attrs=_7.Attrs||{};bc=bb.Dyn=bb.Dyn||{};bd=_7.Docs=_7.Docs||{};be=bd.RunState=bd.RunState||{};bf=bd.NodeSet=bd.NodeSet||{};bg=b.Concurrency=b.Concurrency||{};bh=f.Anims=f.Anims||{};bi=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bj=f.Array=f.Array||{};bk=f.Attrs=f.Attrs||{};bl=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bm=f.AppendList=f.AppendList||{};bn=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};bo=f.Elt=f.Elt||{};bp=x.HashSetUtil=x.HashSetUtil||{};bq=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};br=bg.Scheduler=bg.Scheduler||{};bs=f.Easing=f.Easing||{};bt=bg.AsyncBody=bg.AsyncBody||{};bu=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bv=bg.CT=bg.CT||{};bw=B.HashSet=B.HashSet||{};bx=ba.Prepare=ba.Prepare||{};by=b.Slice=b.Slice||{};bz=x.KeyCollection=x.KeyCollection||{};bA=f.AttrModule=f.AttrModule||{};bB=b.Strings=b.Strings||{};bC=f.Updates=f.Updates||{};bD=x.ValueCollection=x.ValueCollection||{};bE=f.BindVar=f.BindVar||{};bF=f.String=f.String||{};bG=b.CancellationTokenSource=b.CancellationTokenSource||{};bH=bd.DomNodes=bd.DomNodes||{};bI=b.Char=b.Char||{};bJ=a.Error;bK=b.OperationCanceledException=b.OperationCanceledException||{};bL=b.Lazy=b.Lazy||{};bM=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bN=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bO=f.DynamicAttrNode=f.DynamicAttrNode||{};bP=b.Queue=b.Queue||{};bQ=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bR=bQ.LazyRecord=bQ.LazyRecord||{};bS=a.IntelliFactory;bT=bS&&bS.Runtime;bU=a.console;bV=a.Math;bW=a.Date;c=b.Obj=bT.Class({Equals:function(bX){return this===bX;},GetHashCode:function(){return -1;}},null,c);c.New=bT.Ctor(function(){},c);e=d.App=bT.Class({},c,e);e.ClientMain=function(){var bX,bY;bX=g.FromSeq(["John","Paul"]);bY=h.Create$1("");q.RunById("main",(new k.New()).ListContainer$4(q.Convert(function(bZ){return(new l.New()).Name$1(bZ).Doc();},bX.v)).Name(bY).Add$1(function(){bX.Append(bY.Get());bY.Set("");}).Doc());};g.FromSeq=function(bX){return g.Create(a.id,bX);};g.Create=function(bX,bY){return g.CreateWithStorage(bX,z.InMemory(Q.ofSeq(bY)));};g.CreateWithStorage=function(bX,bY){return new g.New(bX,bY);};h=f.Var$1=bT.Class({},c,h);h.Create$1=function(bX){return new o.New(false,p.New({$:2,$0:bX,$1:[]}),bX);};k=j.Main=bT.Class({Doc:function(){return this.Create().get_Doc();},Add$1:function(bX){function bY(bZ,b0){return bX();}this.holes.push({$:4,$0:"add",$1:function(bZ){return function(b0){return bY(bZ,b0);};}});return this;},Name:function(bX){this.holes.push({$:8,$0:"name",$1:bX});return this;},ListContainer$4:function(bX){this.holes.push({$:0,$0:"listcontainer",$1:bX});return this;},Create:function(){var bX,bY;bX=I.CompleteHoles(this.key,this.holes,[["name",0]]);bY=J.main(bX[0]);this.instance=new H.New(bX[1],bY);return this.instance;},$init:function(){this.key=M.NewGuid();this.holes=[];this.instance=null;}},c,k);k.New=bT.Ctor(function(){this.$init();},k);g=f.ListModel=bT.Class({Append:function(bX){var bY,bZ,b0,b1;bY=this;bZ=this["var"].Get();b0=this.key(bX);b1=Q.tryFindIndex(function(b2){return G.Equals(bY.key(b2),b0);},bZ);b1!=null&&b1.$==1?this["var"].Set(this.storage.SSetAt(b1.$0,bX,bZ)):this["var"].Set(this.storage.SAppend(bX,bZ));this.ObsoleteKey(b0);},ObsoleteKey:function(bX){var bY,bZ;bY=(bZ=null,[this.it.TryGetValue(bX,{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?(p.Obsolete(bY[1]),this.it.Remove(bX)):void 0;},GetEnumerator:function(){return _1.Get(this["var"].Get());},GetEnumerator0:function(){return _1.Get0(this["var"].Get());}},c,g);g.New=bT.Ctor(function(bX,bY){g.New$3.call(this,bX,h.Create$1(Q.ofSeq(A.distinctBy(bX,bY.SInit()))),bY);},g);g.New$3=bT.Ctor(function(bX,bY,bZ){c.New.call(this);this.key=bX;this["var"]=bY;this.storage=bZ;this.v=N.Map(function(b0){return b0.slice();},this["var"].get_View());this.it=new O.New$5();},g);l=j.ListItem=bT.Class({Doc:function(){return this.Create().get_Doc();},Name$1:function(bX){this.holes.push({$:1,$0:"name",$1:bX});return this;},Create:function(){var bX,bY;bX=I.CompleteHoles(this.key,this.holes,[]);bY=J.listitem(bX[0]);this.instance=new P.New(bX[1],bY);return this.instance;},$init:function(){this.key=M.NewGuid();this.holes=[];this.instance=null;}},c,l);l.New=bT.Ctor(function(){this.$init();},l);m=f.Var=bT.Class({},c,m);m.New=bT.Ctor(function(){c.New.call(this);},m);n.FailWith=function(bX){throw new bJ(bX);};n.KeyValue=function(bX){return[bX.K,bX.V];};o=f.ConcreteVar=bT.Class({Get:function(){return this.current;},Set:function(bX){if(this.isConst)(function(bY){return bY("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bY){bU.log(bY);}));else{p.Obsolete(this.snap);this.current=bX;this.snap=p.New({$:2,$0:bX,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(bX){var bY;bY=bX(this.Get());bY!=null&&bY.$==1?this.Set(bY.$0):void 0;}},m,o);o.New=bT.Ctor(function(bX,bY,bZ){var b0;b0=this;m.New.call(this);this.isConst=bX;this.current=bZ;this.snap=bY;this.view=function(){return b0.snap;};this.id=C.Int();},o);p.WhenRun=function(bX,bY,bZ){var b0;b0=bX.s;b0==null?bZ():b0!=null&&b0.$==2?(b0.$1.push(bZ),bY(b0.$0)):b0!=null&&b0.$==3?(b0.$0.push(bY),b0.$1.push(bZ)):bY(b0.$0);};p.Map=function(bX,bY){var bZ,b0;bZ=bY.s;return bZ!=null&&bZ.$==0?p.New({$:0,$0:bX(bZ.$0)}):(b0=p.New({$:3,$0:[],$1:[]}),(p.When(bY,function(b1){p.MarkDone(b0,bY,bX(b1));},b0),b0));};p.WhenObsoleteRun=function(bX,bY){var bZ;bZ=bX.s;bZ==null?bY():bZ!=null&&bZ.$==2?bZ.$1.push(bY):bZ!=null&&bZ.$==3?bZ.$1.push(bY):void 0;};p.When=function(bX,bY,bZ){var b0;b0=bX.s;b0==null?p.Obsolete(bZ):b0!=null&&b0.$==2?(p.EnqueueSafe(b0.$1,bZ),bY(b0.$0)):b0!=null&&b0.$==3?(b0.$0.push(bY),p.EnqueueSafe(b0.$1,bZ)):bY(b0.$0);};p.MarkDone=function(bX,bY,bZ){var b0;if(b0=bY.s,b0!=null&&b0.$==0)p.MarkForever(bX,bZ);else p.MarkReady(bX,bZ);};p.EnqueueSafe=function(bX,bY){var bZ,b0,b1,b2;bX.push(bY);if(bX.length%20===0){bZ=bX.slice(0);bP.Clear(bX);for(b0=0,b1=Q.length(bZ)-1;b0<=b1;b0++){b2=Q.get(bZ,b0);typeof b2=="object"?function(b3){if(b3.s)bX.push(b3);}(b2):function(b3){bX.push(b3);}(b2);}}else void 0;};p.MarkForever=function(bX,bY){var bZ,b0,b1,b2;bZ=bX.s;if(bZ!=null&&bZ.$==3){bX.s={$:0,$0:bY};b0=bZ.$0;for(b1=0,b2=Q.length(b0)-1;b1<=b2;b1++)(Q.get(b0,b1))(bY);}else void 0;};p.MarkReady=function(bX,bY){var bZ,b0,b1,b2;bZ=bX.s;if(bZ!=null&&bZ.$==3){bX.s={$:2,$0:bY,$1:bZ.$1};b0=bZ.$0;for(b1=0,b2=Q.length(b0)-1;b1<=b2;b1++)(Q.get(b0,b1))(bY);}else void 0;};p.Map2Unit=function(bX,bY){var bZ,b0,b1;function b2(){var b3,b4,b5;if(!(b3=b1.s,b3!=null&&b3.$==0||b3!=null&&b3.$==2)){b4=p.ValueAndForever(bX);b5=p.ValueAndForever(bY);b4!=null&&b4.$==1?b5!=null&&b5.$==1?b4.$0[1]&&b5.$0[1]?p.MarkForever(b1,null):p.MarkReady(b1,null):void 0:void 0;}}bZ=bX.s;b0=bY.s;return bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?p.New({$:0,$0:null}):bY:b0!=null&&b0.$==0?bX:(b1=p.New({$:3,$0:[],$1:[]}),(p.When(bX,b2,b1),p.When(bY,b2,b1),b1));};p.Join=function(bX){var bY;bY=p.New({$:3,$0:[],$1:[]});p.When(bX,function(bZ){var b0;b0=bZ();p.When(b0,function(b1){var b2,b3;if((b2=b0.s,b2!=null&&b2.$==0)&&(b3=bX.s,b3!=null&&b3.$==0))p.MarkForever(bY,b1);else p.MarkReady(bY,b1);},bY);},bY);return bY;};p.Map3=function(bX,bY,bZ,b0){var b1,b2,b3,b4;function b5(b6){var b7,b8,b9,b_;if(!(b7=b4.s,b7!=null&&b7.$==0||b7!=null&&b7.$==2)){b8=p.ValueAndForever(bY);b9=p.ValueAndForever(bZ);b_=p.ValueAndForever(b0);b8!=null&&b8.$==1?b9!=null&&b9.$==1?b_!=null&&b_.$==1?b8.$0[1]&&b9.$0[1]&&b_.$0[1]?p.MarkForever(b4,bX(b8.$0[0],b9.$0[0],b_.$0[0])):p.MarkReady(b4,bX(b8.$0[0],b9.$0[0],b_.$0[0])):void 0:void 0:void 0;}}b1=bY.s;b2=bZ.s;b3=b0.s;return b1!=null&&b1.$==0?b2!=null&&b2.$==0?b3!=null&&b3.$==0?p.New({$:0,$0:bX(b1.$0,b2.$0,b3.$0)}):p.Map3Opt1(bX,b1.$0,b2.$0,b0):b3!=null&&b3.$==0?p.Map3Opt2(bX,b1.$0,b3.$0,bZ):p.Map3Opt3(bX,b1.$0,bZ,b0):b2!=null&&b2.$==0?b3!=null&&b3.$==0?p.Map3Opt4(bX,b2.$0,b3.$0,bY):p.Map3Opt5(bX,b2.$0,bY,b0):b3!=null&&b3.$==0?p.Map3Opt6(bX,b3.$0,bY,bZ):(b4=p.New({$:3,$0:[],$1:[]}),(p.When(bY,b5,b4),p.When(bZ,b5,b4),p.When(b0,b5,b4),b4));};p.Sequence=function(bX){var bY,bZ,b0;function b1(b2){var b3;if(b0[0]===0){b3=Q.map(function(b4){var b5;b5=b4.s;return b5!=null&&b5.$==0?b5.$0:b5!=null&&b5.$==2?b5.$0:n.FailWith("value not found by View.Sequence");},bY);Q.forall(function(b4){var b5;b5=b4.s;return b5!=null&&b5.$==0;},bY)?p.MarkForever(bZ,b3):p.MarkReady(bZ,b3);}else b0[0]--;}bY=Q.ofSeq(bX);return bY.length==0?p.New({$:0,$0:[]}):(bZ=p.New({$:3,$0:[],$1:[]}),(b0=[Q.length(bY)-1],(Q.iter(function(b2){p.When(b2,b1,bZ);},bY),bZ)));};p.Map2=function(bX,bY,bZ){var b0,b1,b2;function b3(b4){var b5,b6,b7;if(!(b5=b2.s,b5!=null&&b5.$==0||b5!=null&&b5.$==2)){b6=p.ValueAndForever(bY);b7=p.ValueAndForever(bZ);b6!=null&&b6.$==1?b7!=null&&b7.$==1?b6.$0[1]&&b7.$0[1]?p.MarkForever(b2,bX(b6.$0[0],b7.$0[0])):p.MarkReady(b2,bX(b6.$0[0],b7.$0[0])):void 0:void 0;}}b0=bY.s;b1=bZ.s;return b0!=null&&b0.$==0?b1!=null&&b1.$==0?p.New({$:0,$0:bX(b0.$0,b1.$0)}):p.Map2Opt1(bX,b0.$0,bZ):b1!=null&&b1.$==0?p.Map2Opt2(bX,b1.$0,bY):(b2=p.New({$:3,$0:[],$1:[]}),(p.When(bY,b3,b2),p.When(bZ,b3,b2),b2));};p.Copy=function(bX){var bY,bZ,b0;bY=bX.s;return bY==null?bX:bY!=null&&bY.$==2?(bZ=p.New({$:2,$0:bY.$0,$1:[]}),(p.WhenObsolete(bX,bZ),bZ)):bY!=null&&bY.$==3?(b0=p.New({$:3,$0:[],$1:[]}),(p.When(bX,function(b1){p.MarkDone(b0,bX,b1);},b0),b0)):bX;};p.ValueAndForever=function(bX){var bY;bY=bX.s;return bY!=null&&bY.$==0?{$:1,$0:[bY.$0,true]}:bY!=null&&bY.$==2?{$:1,$0:[bY.$0,false]}:null;};p.Map3Opt1=function(bX,bY,bZ,b0){return p.Map(function(b1){return bX(bY,bZ,b1);},b0);};p.Map3Opt2=function(bX,bY,bZ,b0){return p.Map(function(b1){return bX(bY,b1,bZ);},b0);};p.Map3Opt3=function(bX,bY,bZ,b0){return p.Map2(function(b1,b2){return bX(bY,b1,b2);},bZ,b0);};p.Map3Opt4=function(bX,bY,bZ,b0){return p.Map(function(b1){return bX(b1,bY,bZ);},b0);};p.Map3Opt5=function(bX,bY,bZ,b0){return p.Map2(function(b1,b2){return bX(b1,bY,b2);},bZ,b0);};p.Map3Opt6=function(bX,bY,bZ,b0){return p.Map2(function(b1,b2){return bX(b1,b2,bY);},bZ,b0);};p.Map2Opt1=function(bX,bY,bZ){return p.Map(function(b0){return bX(bY,b0);},bZ);};p.Map2Opt2=function(bX,bY,bZ){return p.Map(function(b0){return bX(b0,bY);},bZ);};p.WhenObsolete=function(bX,bY){var bZ;bZ=bX.s;bZ==null?p.Obsolete(bY):bZ!=null&&bZ.$==2?p.EnqueueSafe(bZ.$1,bY):bZ!=null&&bZ.$==3?p.EnqueueSafe(bZ.$1,bY):void 0;};q=f.Doc=bT.Class({},c,q);q.RunById=function(bX,bY){var bZ;bZ=self.document.getElementById(bX);G.Equals(bZ,null)?n.FailWith("invalid id: "+bX):q.Run(bZ,bY);};q.Run=function(bX,bY){U.LinkElement(bX,bY.docNode);q.RunInPlace(false,bX,bY);};q.Convert=function(bX,bY){return q.Flatten(N.MapSeqCached(bX,bY));};q.RunInPlace=function(bX,bY,bZ){var b0;b0=U.CreateRunState(bY,bZ.docNode);N.Sink(_6.get_UseAnimations()||_8.BatchUpdatesEnabled()?_9.StartProcessor(U.PerformAnimatedUpdate(bX,b0,bZ.docNode)):function(){U.PerformSyncUpdate(bX,b0,bZ.docNode);},bZ.updates);};q.Flatten=function(bX){return q.EmbedView(N.Map(q.Concat,bX));};q.Concat=function(bX){var bY;bY=bj.ofSeqNonCopying(bX);return bj.TreeReduce(q.get_Empty(),q.Append,bY);};q.EmbedView=function(bX){var bY;bY=U.CreateEmbedNode();return q.Mk({$:2,$0:bY},N.Map(a.ignore,N.Bind(function(bZ){U.UpdateEmbedNode(bY,bZ.docNode);return bZ.updates;},bX)));};q.get_Empty=function(){return q.Mk(null,N.Const());};q.Append=function(bX,bY){return q.Mk({$:0,$0:bX.docNode,$1:bY.docNode},N.Map2Unit(bX.updates,bY.updates));};q.Mk=function(bX,bY){return new q.New(bX,bY);};q.TextNode=function(bX){return q.Mk({$:5,$0:self.document.createTextNode(bX)},N.Const());};q.TextView=function(bX){var bY;bY=U.CreateTextNode();return q.Mk({$:4,$0:bY},N.Map(function(bZ){U.UpdateTextNode(bY,bZ);},bX));};q.New=bT.Ctor(function(bX,bY){c.New.call(this);this.docNode=bX;this.updates=bY;},q);s.NewFromSeq=function(bX){var bY,bZ,b0;bY={};bZ=_1.Get(bX);try{while(bZ.MoveNext()){b0=bZ.Current();bY[b0[0]]=b0[1];}}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}return bY;};w=v.TemplateInstance=bT.Class({get_Doc:function(){return this.doc;}},c,w);w.New=bT.Ctor(function(bX,bY){c.New.call(this);this.doc=bY;this.allVars=bX.$==0?bX.$0:n.FailWith("Should not happen");},w);y=x.List=bT.Class({GetEnumerator:function(){return _1.Get(this);},GetEnumerator0:function(){return _1.Get0(this);}},null,y);z.InMemory=function(bX){return new R.New(bX);};A.append=function(bX,bY){return{GetEnumerator:function(){var bZ,b0;bZ=_1.Get(bX);b0=[true];return new $.New(bZ,null,function(b1){var b2;return b1.s.MoveNext()?(b1.c=b1.s.Current(),true):(b2=b1.s,!G.Equals(b2,null)?b2.Dispose():void 0,b1.s=null,b0[0]&&(b0[0]=false,b1.s=_1.Get(bY),b1.s.MoveNext()?(b1.c=b1.s.Current(),true):(b1.s.Dispose(),b1.s=null,false)));},function(b1){var b2;b2=b1.s;!G.Equals(b2,null)?b2.Dispose():void 0;});}};};A.distinctBy=function(bX,bY){return{GetEnumerator:function(){var bZ,b0;bZ=_1.Get(bY);b0=new X.New$3();return new $.New(null,null,function(b1){var b2,b3;if(bZ.MoveNext()){b2=bZ.Current();b3=b0.Add(bX(b2));while(!b3&&bZ.MoveNext()){b2=bZ.Current();b3=b0.Add(bX(b2));}return b3&&(b1.c=b2,true);}else return false;},function(){bZ.Dispose();});}};};A.head=function(bX){var bY;bY=_1.Get(bX);try{return bY.MoveNext()?bY.Current():A.insufficient();}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};A.iter=function(bX,bY){var bZ;bZ=_1.Get(bY);try{while(bZ.MoveNext())bX(bZ.Current());}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};A.map=function(bX,bY){return{GetEnumerator:function(){var bZ;bZ=_1.Get(bY);return new $.New(null,null,function(b0){return bZ.MoveNext()&&(b0.c=bX(bZ.Current()),true);},function(){bZ.Dispose();});}};};A.max=function(bX){var bY,bZ,b0;bY=_1.Get(bX);try{if(!bY.MoveNext())A.seqEmpty();bZ=bY.Current();while(bY.MoveNext()){b0=bY.Current();G.Compare(b0,bZ)===1?bZ=b0:void 0;}return bZ;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};A.fold=function(bX,bY,bZ){var b0,b1;b0=bY;b1=_1.Get(bZ);try{while(b1.MoveNext())b0=bX(b0,b1.Current());return b0;}finally{if(typeof b1=="object"&&"Dispose"in b1)b1.Dispose();}};A.seqEmpty=function(){return n.FailWith("The input sequence was empty.");};A.forall=function(bX,bY){return!A.exists(function(bZ){return!bX(bZ);},bY);};A.exists=function(bX,bY){var bZ,b0;bZ=_1.Get(bY);try{b0=false;while(!b0&&bZ.MoveNext())b0=bX(bZ.Current());return b0;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}};C.Int=function(){C.set_counter(C.counter()+1);return C.counter();};C.set_counter=function(bX){_2.$cctor();_2.counter=bX;};C.counter=function(){_2.$cctor();return _2.counter;};F.GetFieldValues=function(bX){var bY,bZ;bY=[];for(var b0 in bX)bY.push(bX[b0]);return bY;};G.Equals=function(bX,bY){var bZ,b0,b1,b2;if(bX===bY)return true;else{bZ=typeof bX;if(bZ=="object"){if(bX===null||bX===void 0||bY===null||bY===void 0)return false;else if("Equals"in bX)return bX.Equals(bY);else if(bX instanceof a.Array&&bY instanceof a.Array)return G.arrayEquals(bX,bY);else if(bX instanceof a.Date&&bY instanceof a.Date)return G.dateEquals(bX,bY);else{b0=[true];for(var b3 in bX)if(function(b4){b0[0]=!bX.hasOwnProperty(b4)||bY.hasOwnProperty(b4)&&G.Equals(bX[b4],bY[b4]);return!b0[0];}(b3))break;if(b0[0]){for(var b4 in bY)if(function(b5){b0[0]=!bY.hasOwnProperty(b5)||bX.hasOwnProperty(b5);return!b0[0];}(b4))break;}return b0[0];}}else return bZ=="function"&&("$Func"in bX?bX.$Func===bY.$Func&&bX.$Target===bY.$Target:"$Invokes"in bX&&"$Invokes"in bY&&G.arrayEquals(bX.$Invokes,bY.$Invokes));}};G.arrayEquals=function(bX,bY){var bZ,b0;if(Q.length(bX)===Q.length(bY)){bZ=true;b0=0;while(bZ&&b0<Q.length(bX)){!G.Equals(Q.get(bX,b0),Q.get(bY,b0))?bZ=false:void 0;b0=b0+1;}return bZ;}else return false;};G.dateEquals=function(bX,bY){return bX.getTime()===bY.getTime();};G.Hash=function(bX){var bY;bY=typeof bX;return bY=="function"?0:bY=="boolean"?bX?1:0:bY=="number"?bX:bY=="string"?G.hashString(bX):bY=="object"?bX==null?0:bX instanceof a.Array?G.hashArray(bX):G.hashObject(bX):0;};G.hashString=function(bX){var bY,bZ,b0;if(bX===null)return 0;else{bY=5381;for(bZ=0,b0=bX.length-1;bZ<=b0;bZ++)bY=G.hashMix(bY,bX[bZ].charCodeAt());return bY;}};G.hashArray=function(bX){var bY,bZ,b0;bY=-34948909;for(bZ=0,b0=Q.length(bX)-1;bZ<=b0;bZ++)bY=G.hashMix(bY,G.Hash(Q.get(bX,bZ)));return bY;};G.hashObject=function(bX){var bY,bZ;if("GetHashCode"in bX)return bX.GetHashCode();else{bY=[0];for(var b0 in bX)if(function(b1){bY[0]=G.hashMix(G.hashMix(bY[0],G.hashString(b1)),G.Hash(bX[b1]));return false;}(b0))break;return bY[0];}};G.hashMix=function(bX,bY){return(bX<<5)+bX+bY;};G.Compare=function(bX,bY){var bZ,b0,b1,b2,b3,b4;if(bX===bY)return 0;else{b0=typeof bX;switch(b0=="function"?1:b0=="boolean"?2:b0=="number"?2:b0=="string"?2:b0=="object"?3:0){case 0:return typeof bY=="undefined"?0:-1;case 1:return n.FailWith("Cannot compare function values.");case 2:return bX<bY?-1:1;case 3:if(bX===null)b1=-1;else if(bY===null)b1=1;else if("CompareTo"in bX)b1=bX.CompareTo(bY);else if("CompareTo0"in bX)b1=bX.CompareTo0(bY);else if(bX instanceof a.Array&&bY instanceof a.Array)b1=G.compareArrays(bX,bY);else if(bX instanceof a.Date&&bY instanceof a.Date)b1=G.compareDates(bX,bY);else{b2=[0];for(var b5 in bX)if(function(b6){return!bX.hasOwnProperty(b6)?false:!bY.hasOwnProperty(b6)?(b2[0]=1,true):(b2[0]=G.Compare(bX[b6],bY[b6]),b2[0]!==0);}(b5))break;if(b2[0]===0){for(var b6 in bY)if(function(b7){return!bY.hasOwnProperty(b7)?false:!bX.hasOwnProperty(b7)&&(b2[0]=-1,true);}(b6))break;}b1=b2[0];}return b1;}}};G.compareArrays=function(bX,bY){var bZ,b0;if(Q.length(bX)<Q.length(bY))return -1;else if(Q.length(bX)>Q.length(bY))return 1;else{bZ=0;b0=0;while(bZ===0&&b0<Q.length(bX)){bZ=G.Compare(Q.get(bX,b0),Q.get(bY,b0));b0=b0+1;}return bZ;}};G.compareDates=function(bX,bY){return G.Compare(bX.getTime(),bY.getTime());};H=k.Instance=bT.Class({},w,H);H.New=bT.Ctor(function(bX,bY){w.New.call(this,bX,bY);},H);I.CompleteHoles=function(bX,bY,bZ){var b1,b2,b3,b4,b5;function b0(b6,b7){var b8;return b2.Contains(b6)?null:(b8=b7===0?Y.GetOrAddHoleFor(bX,b6,function(){return{$:8,$0:b6,$1:h.Create$1("")};}):b7===1?Y.GetOrAddHoleFor(bX,b6,function(){return{$:13,$0:b6,$1:h.Create$1(0)};}):b7===2?Y.GetOrAddHoleFor(bX,b6,function(){return{$:9,$0:b6,$1:h.Create$1(false)};}):n.FailWith("Invalid value type"),(b1.set_Item(b6,b8),{$:1,$0:b8}));}b1=new O.New$5();b2=new X.New$3();b3=_1.Get(bY);try{while(b3.MoveNext()){b4=b3.Current();b5=b4.$0;b2.Add(b5);b1.set_Item(b5,b4);}}finally{if(typeof b3=="object"&&"Dispose"in b3)b3.Dispose();}return[A.append(bY,Q.choose(function(b6){return b0(b6[0],b6[1]);},bZ)),{$:0,$0:b1}];};J.main=function(bX){ba.LoadLocalTemplates("index");return bX?ba.NamedTemplate("index",{$:1,$0:"main"},bX):void 0;};J.listitem=function(bX){ba.LoadLocalTemplates("index");return bX?ba.NamedTemplate("index",{$:1,$0:"listitem"},bX):void 0;};M.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bX){var bY,bZ;bY=bV.random()*16|0;bZ=bX=="x"?bY:bY&3|8;return bZ.toString(16);});};N=f.View=bT.Class({},null,N);O=x.Dictionary=bT.Class({set_Item:function(bX,bY){this.set(bX,bY);},TryGetValue:function(bX,bY){var bZ,b0,b1;bZ=this;b0=this.data[this.hash(bX)];return b0==null?false:(b1=Q.tryPick(function(b2){var b3;b3=n.KeyValue(b2);return bZ.equals.apply(null,[b3[0],bX])?{$:1,$0:b3[1]}:null;},b0),b1!=null&&b1.$==1&&(bY.set(b1.$0),true));},Remove:function(bX){return this.remove(bX);},set:function(bX,bY){var bZ,b0,b1,b2;bZ=this;b0=this.hash(bX);b1=this.data[b0];b1==null?(this.count=this.count+1,this.data[b0]=new a.Array({K:bX,V:bY})):(b2=Q.tryFindIndex(function(b3){return bZ.equals.apply(null,[(n.KeyValue(b3))[0],bX]);},b1),b2==null?(this.count=this.count+1,b1.push({K:bX,V:bY})):b1[b2.$0]={K:bX,V:bY});},remove:function(bX){var bY,bZ,b0,b1;bY=this;bZ=this.hash(bX);b0=this.data[bZ];return b0==null?false:(b1=Q.filter(function(b2){return!bY.equals.apply(null,[(n.KeyValue(b2))[0],bX]);},b0),Q.length(b1)<b0.length&&(this.count=this.count-1,this.data[bZ]=b1,true));},ContainsKey:function(bX){var bY,bZ;bY=this;bZ=this.data[this.hash(bX)];return bZ==null?false:Q.exists(function(b0){return bY.equals.apply(null,[(n.KeyValue(b0))[0],bX]);},bZ);},get_Item:function(bX){return this.get(bX);},get_Keys:function(){return new bz.New(this);},get_Values:function(){return new bD.New(this);},get:function(bX){var bY,bZ;bY=this;bZ=this.data[this.hash(bX)];return bZ==null?_.notPresent():Q.pick(function(b0){var b1;b1=n.KeyValue(b0);return bY.equals.apply(null,[b1[0],bX])?{$:1,$0:b1[1]}:null;},bZ);},GetEnumerator:function(){return _1.Get0(this);},GetEnumerator0:function(){return _1.Get0(Q.concat(F.GetFieldValues(this.data)));}},c,O);O.New$5=bT.Ctor(function(){O.New$6.call(this,[],G.Equals,G.Hash);},O);O.New$6=bT.Ctor(function(bX,bY,bZ){var b0,b1;c.New.call(this);this.equals=bY;this.hash=bZ;this.count=0;this.data=[];b0=_1.Get(bX);try{while(b0.MoveNext()){b1=b0.Current();this.set(b1.K,b1.V);}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}},O);p.Obsolete=function(bX){var bY,bZ,b0,b1,b2;bZ=bX.s;if(bZ==null||(bZ!=null&&bZ.$==2?(bY=bZ.$1,false):bZ!=null&&bZ.$==3?(bY=bZ.$1,false):true))void 0;else{bX.s=null;for(b0=0,b1=Q.length(bY)-1;b0<=b1;b0++){b2=Q.get(bY,b0);typeof b2=="object"?function(b3){p.Obsolete(b3);}(b2):b2();}}};p.New=function(bX){return{s:bX};};P=l.Instance=bT.Class({},w,P);P.New=bT.Ctor(function(bX,bY){w.New.call(this,bX,bY);},P);Q.tryFindIndex=function(bX,bY){var bZ,b0;bZ=null;b0=0;while(b0<bY.length&&bZ==null){bX(bY[b0])?bZ={$:1,$0:b0}:void 0;b0=b0+1;}return bZ;};Q.ofSeq=function(bX){var bY,bZ;if(bX instanceof a.Array)return bX.slice();else if(bX instanceof _0)return Q.ofList(bX);else{bY=[];bZ=_1.Get(bX);try{while(bZ.MoveNext())bY.push(bZ.Current());return bY;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}}};Q.choose=function(bX,bY){var bZ,b0,b1,b2;bZ=[];for(b0=0,b1=bY.length-1;b0<=b1;b0++){b2=bX(bY[b0]);b2==null?void 0:bZ.push(b2.$0);}return bZ;};Q.ofList=function(bX){var bY,bZ;bZ=[];bY=bX;while(!(bY.$==0)){bZ.push(Z.head(bY));bY=Z.tail(bY);}return bZ;};Q.tryPick=function(bX,bY){var bZ,b0,b1;bZ=null;b0=0;while(b0<bY.length&&bZ==null){b1=bX(bY[b0]);b1!=null&&b1.$==1?bZ=b1:void 0;b0=b0+1;}return bZ;};Q.foldBack=function(bX,bY,bZ){var b0,b1,b2,b3,b4;b0=bZ;b2=bY.length;for(b3=1,b4=b2;b3<=b4;b3++)b0=bX(bY[b2-b3],b0);return b0;};Q.filter=function(bX,bY){var bZ,b0,b1;bZ=[];for(b0=0,b1=bY.length-1;b0<=b1;b0++)if(bX(bY[b0]))bZ.push(bY[b0]);return bZ;};Q.concat=function(bX){return a.Array.prototype.concat.apply([],Q.ofSeq(bX));};Q.iter=function(bX,bY){var bZ,b0;for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)bX(bY[bZ]);};Q.map=function(bX,bY){var bZ,b0,b1;bZ=new a.Array(bY.length);for(b0=0,b1=bY.length-1;b0<=b1;b0++)bZ[b0]=bX(bY[b0]);return bZ;};Q.exists=function(bX,bY){var bZ,b0,b1,b2;bZ=false;b0=0;b2=Q.length(bY);while(!bZ&&b0<b2)if(bX(bY[b0]))bZ=true;else b0=b0+1;return bZ;};Q.pick=function(bX,bY){var bZ;bZ=Q.tryPick(bX,bY);return bZ==null?n.FailWith("KeyNotFoundException"):bZ.$0;};Q.create=function(bX,bY){var bZ,b0,b1;bZ=new a.Array(bX);for(b0=0,b1=bX-1;b0<=b1;b0++)bZ[b0]=bY;return bZ;};Q.init=function(bX,bY){var bZ,b0,b1;bX<0?n.FailWith("Negative size given."):null;bZ=new a.Array(bX);for(b0=0,b1=bX-1;b0<=b1;b0++)bZ[b0]=bY(b0);return bZ;};Q.forall=function(bX,bY){var bZ,b0,b1,b2;bZ=true;b0=0;b2=Q.length(bY);while(bZ&&b0<b2)if(bX(bY[b0]))b0=b0+1;else bZ=false;return bZ;};R=z.ArrayStorage=bT.Class({SSetAt:function(bX,bY,bZ){Q.set(bZ,bX,bY);return bZ;},SAppend:function(bX,bY){bY.push(bX);return bY;},SInit:function(){return this.init;}},c,R);R.New=bT.Ctor(function(bX){c.New.call(this);this.init=bX;},R);S.TryParseInt32=function(bX,bY){return S.TryParse(bX,-2147483648,2147483647,bY);};U.LinkElement=function(bX,bY){U.InsertDoc(bX,bY,null);};U.InsertDoc=function(bX,bY,bZ){var b0,b1,b2;while(true)if(bY!=null&&bY.$==1)return U.InsertNode(bX,bY.$0.El,bZ);else if(bY!=null&&bY.$==2){b0=bY.$0;b0.Dirty=false;bY=b0.Current;}else if(bY==null)return bZ;else if(bY!=null&&bY.$==4)return U.InsertNode(bX,bY.$0.Text,bZ);else if(bY!=null&&bY.$==5)return U.InsertNode(bX,bY.$0,bZ);else if(bY!=null&&bY.$==6)return Q.foldBack(function(b3,b4){return(((bT.Curried3(function(b5,b6,b7){return b6==null||b6.constructor===K?U.InsertDoc(b5,b6,b7):U.InsertNode(b5,b6,b7);}))(bX))(b3))(b4);},bY.$0.Els,bZ);else{b1=bY.$1;b2=bY.$0;bY=b2;bZ=U.InsertDoc(bX,b1,bZ);}};U.CreateRunState=function(bX,bY){return be.New(bf.get_Empty(),U.CreateElemNode(bX,bk.EmptyAttr(),bY));};U.PerformAnimatedUpdate=function(bX,bY,bZ){var b0;return _6.get_UseAnimations()?(b0=null,bg.Delay(function(){var b1,b2,b3;b1=bf.FindAll(bZ);b2=U.ComputeChangeAnim(bY,b1);b3=U.ComputeEnterAnim(bY,b1);return bg.Bind(_6.Play(_6.Append(b2,U.ComputeExitAnim(bY,b1))),function(){return bg.Bind(U.SyncElemNodesNextFrame(bX,bY),function(){return bg.Bind(_6.Play(b3),function(){bY.PreviousNodes=b1;return bg.Return(null);});});});})):U.SyncElemNodesNextFrame(bX,bY);};U.PerformSyncUpdate=function(bX,bY,bZ){var b0;b0=bf.FindAll(bZ);U.SyncElemNode(bX,bY.Top);bY.PreviousNodes=b0;};U.InsertNode=function(bX,bY,bZ){_5.InsertAt(bX,bZ,bY);return bY;};U.CreateElemNode=function(bX,bY,bZ){var b0;U.LinkElement(bX,bZ);b0=bk.Insert(bX,bY);return _3.New(b0,bZ,null,bX,C.Int(),bT.GetOptional(b0.OnAfterRender));};U.SyncElemNodesNextFrame=function(bX,bY){function bZ(b0){a.requestAnimationFrame(function(){U.SyncElemNode(bX,bY.Top);b0();});}return _8.BatchUpdatesEnabled()?bg.FromContinuations(function(b0,b1,b2){return bZ.apply(null,[b0,b1,b2]);}):(U.SyncElemNode(bX,bY.Top),bg.Return(null));};U.ComputeExitAnim=function(bX,bY){return _6.Concat(Q.map(function(bZ){return bk.GetExitAnim(bZ.Attr);},bf.ToArray(bf.Except(bY,bf.Filter(function(bZ){return bk.HasExitAnim(bZ.Attr);},bX.PreviousNodes)))));};U.ComputeEnterAnim=function(bX,bY){return _6.Concat(Q.map(function(bZ){return bk.GetEnterAnim(bZ.Attr);},bf.ToArray(bf.Except(bX.PreviousNodes,bf.Filter(function(bZ){return bk.HasEnterAnim(bZ.Attr);},bY)))));};U.ComputeChangeAnim=function(bX,bY){var bZ;function b0(b1){return bk.HasChangeAnim(b1.Attr);}bZ=function(b1){return bf.Filter(b0,b1);};return _6.Concat(Q.map(function(b1){return bk.GetChangeAnim(b1.Attr);},bf.ToArray(bf.Intersect(bZ(bX.PreviousNodes),bZ(bY)))));};U.SyncElemNode=function(bX,bY){!bX?U.SyncElement(bY):void 0;U.Sync(bY.Children);U.AfterRender(bY);};U.CreateEmbedNode=function(){return{Current:null,Dirty:false};};U.UpdateEmbedNode=function(bX,bY){bX.Current=bY;bX.Dirty=true;};U.SyncElement=function(bX){function bY(bZ){function b0(b1){var b2,b3,b4,b5;while(true){if(b1!=null&&b1.$==0){b3=b1.$1;b4=b1.$0;if(b0(b4))return true;else b1=b3;}else if(b1!=null&&b1.$==2){b5=b1.$0;if(b5.Dirty)return true;else b1=b5.Current;}else return b1!=null&&b1.$==6&&(b2=b1.$0,b2.Dirty||Q.exists(bY,b2.Holes));}}return b0(bZ.Children);}bk.Sync(bX.El,bX.Attr);bY(bX)?U.DoSyncElement(bX):void 0;};U.Sync=function(bX){var bY,bZ,b0,b1,b2;while(true){if(bX!=null&&bX.$==1)return U.SyncElemNode(false,bX.$0);else if(bX!=null&&bX.$==2){b0=bX.$0;bX=b0.Current;}else if(bX==null)return null;else if(bX!=null&&bX.$==5)return null;else if(bX!=null&&bX.$==4){bY=bX.$0;return bY.Dirty?(bY.Text.nodeValue=bY.Value,bY.Dirty=false):null;}else if(bX!=null&&bX.$==6){bZ=bX.$0;Q.iter(function(b3){return function(b4){U.SyncElemNode(b3,b4);};}(false),bZ.Holes);Q.iter(function(b3){bk.Sync(b3[0],b3[1]);},bZ.Attrs);return U.AfterRender(bZ);}else{b1=bX.$1;b2=bX.$0;U.Sync(b2);bX=b1;}}};U.AfterRender=function(bX){var bY;bY=bT.GetOptional(bX.Render);bY!=null&&bY.$==1?(bY.$0(bX.El),bT.SetOptional(bX,"Render",null)):void 0;};U.DoSyncElement=function(bX){var bY,bZ,b0;function b1(b2,b3){var b4,b5,b6,b7;while(true){if(b2!=null&&b2.$==1)return b2.$0.El;else if(b2!=null&&b2.$==2){b5=b2.$0;if(b5.Dirty){b5.Dirty=false;return U.InsertDoc(bY,b5.Current,b3);}else b2=b5.Current;}else if(b2==null)return b3;else if(b2!=null&&b2.$==4)return b2.$0.Text;else if(b2!=null&&b2.$==5)return b2.$0;else if(b2!=null&&b2.$==6){b4=b2.$0;b4.Dirty?b4.Dirty=false:void 0;return Q.foldBack(function(b8,b9){return b8==null||b8.constructor===K?b1(b8,b9):b8;},b4.Els,b3);}else{b6=b2.$1;b7=b2.$0;b2=b7;b3=b1(b6,b3);}}}bY=bX.El;bH.Iter((bZ=bX.El,function(b2){_5.RemoveNode(bZ,b2);}),bH.Except(bH.DocChildren(bX),bH.Children(bX.El,bT.GetOptional(bX.Delimiters))));b1(bX.Children,(b0=bT.GetOptional(bX.Delimiters),b0!=null&&b0.$==1?b0.$0[1]:null));};U.InsertBeforeDelim=function(bX,bY){var bZ,b0;bZ=bX.parentNode;b0=self.document.createTextNode("");bZ.insertBefore(b0,bX);U.LinkPrevElement(bX,bY);return b0;};U.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};U.UpdateTextNode=function(bX,bY){bX.Value=bY;bX.Dirty=true;};U.LinkPrevElement=function(bX,bY){U.InsertDoc(bX.parentNode,bY,bX);};V=f.AttrProxy=bT.Class({},null,V);V.Handler=function(bX,bY){return V.HandlerImpl(bX,bY);};V.Concat=function(bX){var bY;bY=bj.ofSeqNonCopying(bX);return bj.TreeReduce(bk.EmptyAttr(),V.Append,bY);};V.Create=function(bX,bY){return bk.Static(function(bZ){bZ.setAttribute(bX,bY);});};V.HandlerImpl=function(bX,bY){return bk.Static(function(bZ){bZ.addEventListener(bX,function(b0){return(bY(bZ))(b0);},false);});};V.Append=function(bX,bY){return bk.AppendTree(bX,bY);};W=f.CheckedInput=bT.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,W);X=x.HashSet=bT.Class({Add:function(bX){return this.add(bX);},Contains:function(bX){var bY;bY=this.data[this.hash(bX)];return bY==null?false:this.arrContains(bX,bY);},add:function(bX){var bY,bZ;bY=this.hash(bX);bZ=this.data[bY];return bZ==null?(this.data[bY]=[bX],this.count=this.count+1,true):this.arrContains(bX,bZ)?false:(bZ.push(bX),this.count=this.count+1,true);},arrContains:function(bX,bY){var bZ,b0,b1,b2;bZ=true;b0=0;b2=bY.length;while(bZ&&b0<b2)if(this.equals.apply(null,[bY[b0],bX]))bZ=false;else b0=b0+1;return!bZ;},ExceptWith:function(bX){var bY;bY=_1.Get(bX);try{while(bY.MoveNext())this.Remove(bY.Current());}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bX){var bY,bZ,b0,b1;bY=0;bZ=bp.concat(this.data);for(b0=0,b1=bZ.length-1;b0<=b1;b0++)Q.set(bX,b0,bZ[b0]);},IntersectWith:function(bX){var bY,bZ,b0,b1,b2;bY=new X.New$4(bX,this.equals,this.hash);bZ=bp.concat(this.data);for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];!bY.Contains(b2)?this.Remove(b2):void 0;}},Remove:function(bX){var bY;bY=this.data[this.hash(bX)];return bY==null?false:this.arrRemove(bX,bY)&&(this.count=this.count-1,true);},arrRemove:function(bX,bY){var bZ,b0,b1,b2;bZ=true;b0=0;b2=bY.length;while(bZ&&b0<b2)if(this.equals.apply(null,[bY[b0],bX])){bY.splice.apply(bY,[b0,1]);bZ=false;}else b0=b0+1;return!bZ;},GetEnumerator:function(){return _1.Get(bp.concat(this.data));},GetEnumerator0:function(){return _1.Get(bp.concat(this.data));}},c,X);X.New$3=bT.Ctor(function(){X.New$4.call(this,[],G.Equals,G.Hash);},X);X.New$4=bT.Ctor(function(bX,bY,bZ){var b0;c.New.call(this);this.equals=bY;this.hash=bZ;this.data=[];this.count=0;b0=_1.Get(bX);try{while(b0.MoveNext())this.add(b0.Current());}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}},X);X.New$2=bT.Ctor(function(bX){X.New$4.call(this,bX,G.Equals,G.Hash);},X);Q.get=function(bX,bY){Q.checkBounds(bX,bY);return bX[bY];};Q.length=function(bX){return bX.dims===2?bX.length*bX.length:bX.length;};Q.checkBounds=function(bX,bY){if(bY<0||bY>=bX.length)n.FailWith("Index was outside the bounds of the array.");};Q.set=function(bX,bY,bZ){Q.checkBounds(bX,bY);bX[bY]=bZ;};Y.$cctor=function(){Y.$cctor=a.ignore;Y.initialized=new O.New$5();};Y=v.TemplateInitializer=bT.Class({},c,Y);Y.GetOrAddHoleFor=function(bX,bY,bZ){var b0,b1,b2,b3;Y.$cctor();b0=Y.GetHolesFor(bX);b1=(b2=null,[b0.TryGetValue(bY,{get:function(){return b2;},set:function(b4){b2=b4;}}),b2]);return b1[0]?b1[1]:(b3=bZ(),(b0.set_Item(bY,b3),b3));};Y.GetHolesFor=function(bX){var bY,bZ,b0;Y.$cctor();bY=(bZ=null,[Y.initialized.TryGetValue(bX,{get:function(){return bZ;},set:function(b1){bZ=b1;}}),bZ]);return bY[0]?bY[1]:(b0=new O.New$5(),(Y.initialized.set_Item(bX,b0),b0));};N.MapSeqCached=function(bX,bY){return N.MapSeqCachedBy(a.id,bX,bY);};N.Sink=function(bX,bY){function bZ(){p.WhenRun(bY(),bX,function(){bg.scheduler().Fork(bZ);});}bg.scheduler().Fork(bZ);};N.MapSeqCachedBy=function(bX,bY,bZ){var b0;b0=[new O.New$5()];return N.Map(function(b1){var b2,b3,b4;b2=b0[0];b3=new O.New$5();b4=bj.mapInPlace(function(b5){var b6,b7;b6=bX(b5);b7=b2.ContainsKey(b6)?b2.get_Item(b6):bY(b5);b3.set_Item(b6,b7);return b7;},Q.ofSeq(b1));b0[0]=b3;return b4;},bZ);};N.Map=function(bX,bY){return N.CreateLazy(function(){return p.Map(bX,bY());});};N.CreateLazy=function(bX){var bY;bY={c:null,o:bX};return function(){var bZ,b0;bZ=bY.c;return bZ===null?(bZ=bY.o(),bY.c=bZ,(b0=bZ.s,b0!=null&&b0.$==0)?bY.o=null:p.WhenObsoleteRun(bZ,function(){bY.c=null;}),bZ):bZ;};};N.Bind=function(bX,bY){return N.Join(N.Map(bX,bY));};N.Const=function(bX){var bY;bY=p.New({$:0,$0:bX});return function(){return bY;};};N.Map2Unit=function(bX,bY){return N.CreateLazy(function(){return p.Map2Unit(bX(),bY());});};N.Join=function(bX){return N.CreateLazy(function(){return p.Join(bX());});};N.Map3=function(bX,bY,bZ,b0){return N.CreateLazy(function(){return p.Map3(bX,bY(),bZ(),b0());});};N.Sequence=function(bX){return N.CreateLazy(function(){return p.Sequence(A.map(function(bY){return bY();},bX));});};N.Map2=function(bX,bY,bZ){return N.CreateLazy(function(){return p.Map2(bX,bY(),bZ());});};_0=Z.T=bT.Class({GetEnumerator:function(){return new $.New(this,null,function(bX){var bY;bY=bX.s;return bY.$==0?false:(bX.c=bY.$0,bX.s=bY.$1,true);},void 0);},GetEnumerator0:function(){return _1.Get(this);}},null,_0);_0.Empty=new _0({$:0});_1.Get=function(bX){return bX instanceof a.Array?_1.ArrayEnumerator(bX):G.Equals(typeof bX,"string")?_1.StringEnumerator(bX):bX.GetEnumerator();};_1.ArrayEnumerator=function(bX){return new $.New(0,null,function(bY){var bZ;bZ=bY.s;return bZ<Q.length(bX)&&(bY.c=Q.get(bX,bZ),bY.s=bZ+1,true);},void 0);};_1.StringEnumerator=function(bX){return new $.New(0,null,function(bY){var bZ;bZ=bY.s;return bZ<bX.length&&(bY.c=bX[bZ],bY.s=bZ+1,true);},void 0);};_1.Get0=function(bX){return bX instanceof a.Array?_1.ArrayEnumerator(bX):G.Equals(typeof bX,"string")?_1.StringEnumerator(bX):"GetEnumerator0"in bX?bX.GetEnumerator0():bX.GetEnumerator();};_2.$cctor=function(){_2.$cctor=a.ignore;_2.counter=0;};_3=f.DocElemNode=bT.Class({Equals:function(bX){return this.ElKey===bX.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_3);_3.New=function(bX,bY,bZ,b0,b1,b2){var b3;return new _3((b3={Attr:bX,Children:bY,El:b0,ElKey:b1},(bT.SetOptional(b3,"Delimiters",bZ),bT.SetOptional(b3,"Render",b2),b3)));};_5.InsertAt=function(bX,bY,bZ){var b0;if(!(bZ.parentNode===bX&&bY===(b0=bZ.nextSibling,G.Equals(b0,null)?null:b0)))bX.insertBefore(bZ,bY);};_5.ParseHTMLIntoFakeRoot=function(bX){var bY,bZ,b0,b1,b2;function b3(b4,b5){var b6;while(true)if(b5===0)return b4;else{b6=b5;b4=b4.lastChild;b5=b6-1;}}bY=self.document.createElement("div");return!_5.rhtml().test(bX)?(bY.appendChild(self.document.createTextNode(bX)),bY):(bZ=(b0=_5.rtagName().exec(bX),G.Equals(b0,null)?"":Q.get(b0,1).toLowerCase()),(b1=(b2=(_5.wrapMap())[bZ],b2?b2:_5.defaultWrap()),(bY.innerHTML=b1[1]+bX.replace(_5.rxhtmlTag(),"<$1></$2>")+b1[2],b3(bY,b1[0]))));};_5.ChildrenArray=function(bX){var bY,bZ,b0;bY=[];for(bZ=0,b0=bX.childNodes.length-1;bZ<=b0;bZ++)bY.push(bX.childNodes[bZ]);return bY;};_5.RemoveNode=function(bX,bY){if(bY.parentNode===bX)bX.removeChild(bY);};_5.rhtml=function(){bN.$cctor();return bN.rhtml;};_5.wrapMap=function(){bN.$cctor();return bN.wrapMap;};_5.defaultWrap=function(){bN.$cctor();return bN.defaultWrap;};_5.rxhtmlTag=function(){bN.$cctor();return bN.rxhtmlTag;};_5.rtagName=function(){bN.$cctor();return bN.rtagName;};_5.IterSelector=function(bX,bY,bZ){var b0,b1,b2;b0=bX.querySelectorAll(bY);for(b1=0,b2=b0.length-1;b1<=b2;b1++)bZ(b0[b1]);};_6.get_UseAnimations=function(){return bh.UseAnimations();};_6.Play=function(bX){var bY;bY=null;return bg.Delay(function(){return bg.Bind(_6.Run(a.ignore,bh.Actions(bX)),function(){bh.Finalize(bX);return bg.Return(null);});});};_6.Append=function(bX,bY){return{$:0,$0:bm.Append(bX.$0,bY.$0)};};_6.Run=function(bX,bY){var bZ;function b0(b1){function b2(b3){return function(b4){var b5;b5=b4-b3;bY.Compute(b5);bX();return b5<=bZ?void a.requestAnimationFrame(function(b6){(b2(b3))(b6);}):b1();};}a.requestAnimationFrame(function(b3){(b2(b3))(b3);});}bZ=bY.Duration;return bZ===0?bg.Zero():bg.FromContinuations(function(b1,b2,b3){return b0.apply(null,[b1,b2,b3]);});};_6.Concat=function(bX){return{$:0,$0:bm.Concat(A.map(bh.List,bX))};};_6.get_Empty=function(){return{$:0,$0:bm.Empty()};};_8.BatchUpdatesEnabled=function(){bi.$cctor();return bi.BatchUpdatesEnabled;};_9.StartProcessor=function(bX){var bY;function bZ(){var b0;b0=null;return bg.Delay(function(){return bg.Bind(bX,function(){var b1;b1=bY[0];return b1===1?(bY[0]=0,bg.Zero()):b1===2?(bY[0]=1,bZ()):bg.Zero();});});}bY=[0];return function(){var b0;b0=bY[0];b0===0?(bY[0]=1,bg.Start(bZ(),null)):b0===1?bY[0]=2:void 0;};};_.notPresent=function(){return n.FailWith("The given key was not present in the dictionary.");};$=_1.T=bT.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},c,$);$.New=bT.Ctor(function(bX,bY,bZ,b0){c.New.call(this);this.s=bX;this.c=bY;this.n=bZ;this.d=b0;},$);ba.LoadLocalTemplates=function(bX){!ba.LocalTemplatesLoaded()?(ba.set_LocalTemplatesLoaded(true),ba.LoadNestedTemplates(self.document.body,"")):void 0;ba.LoadedTemplates().set_Item(bX,ba.LoadedTemplateFile(""));};ba.NamedTemplate=function(bX,bY,bZ){var b0,b1;b0=(b1=null,[ba.LoadedTemplateFile(bX).TryGetValue(bY==null?"":bY.$0,{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]);return b0[0]?ba.ChildrenTemplate(b0[1].cloneNode(true),bZ):(bU.warn("Local template doesn't exist",bY),q.get_Empty());};ba.LocalTemplatesLoaded=function(){bn.$cctor();return bn.LocalTemplatesLoaded;};ba.set_LocalTemplatesLoaded=function(bX){bn.$cctor();bn.LocalTemplatesLoaded=bX;};ba.LoadNestedTemplates=function(bX,bY){var b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca;function bZ(cb){var cc,cd;if(!b0.ContainsKey(cb)){cc=(cd=null,[b1.TryGetValue(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);cc[0]?(ca.Add(cb),b1.Remove(cb),ba.PrepareTemplateStrict(bY,{$:1,$0:cb},cc[1],{$:1,$0:bZ})):bU.warn(ca.Contains(cb)?"Encountered loop when instantiating "+cb:"Local template does not exist: "+cb);}}b0=ba.LoadedTemplateFile(bY);b1=new O.New$5();b2=bX.querySelectorAll("[ws-template]");for(b3=0,b4=b2.length-1;b3<=b4;b3++){b5=b2[b3];b6=b5.getAttribute("ws-template").toLowerCase();b5.removeAttribute("ws-template");b1.set_Item(b6,ba.FakeRootSingle(b5));}b7=bX.querySelectorAll("[ws-children-template]");for(b8=0,b9=b7.length-1;b8<=b9;b8++){b_=b7[b8];b$=b_.getAttribute("ws-children-template").toLowerCase();b_.removeAttribute("ws-children-template");b1.set_Item(b$,ba.FakeRoot(b_));}ca=new X.New$3();while(b1.count>0)bZ(A.head(b1.get_Keys()));};ba.LoadedTemplates=function(){bn.$cctor();return bn.LoadedTemplates;};ba.LoadedTemplateFile=function(bX){var bY,bZ,b0;bY=(bZ=null,[ba.LoadedTemplates().TryGetValue(bX,{get:function(){return bZ;},set:function(b1){bZ=b1;}}),bZ]);return bY[0]?bY[1]:(b0=new O.New$5(),(ba.LoadedTemplates().set_Item(bX,b0),b0));};ba.ChildrenTemplate=function(bX,bY){var bZ,b0,b1,b2,b3;bZ=ba.InlineTemplate(bX,A.append(bY,ba.GlobalHoles().get_Values()));b0=bZ[1];b1=bZ[0];b2=b1.Els;return!G.Equals(b2,null)&&b2.length===1&&(Q.get(b2,0)instanceof E&&(G.Equals(Q.get(b2,0).nodeType,E.ELEMENT_NODE)&&(b3=Q.get(b2,0),true)))?bo.TreeNode(b1,b0):q.Mk({$:6,$0:b1},b0);};ba.FakeRootSingle=function(bX){var bY,bZ,b0,b1;bX.removeAttribute("ws-template");bY=bX.getAttribute("ws-replace");bY===null?void 0:(bX.removeAttribute("ws-replace"),bZ=bX.parentNode,G.Equals(bZ,null)?void 0:(b0=self.document.createElement(bX.tagName),b0.setAttribute("ws-replace",bY),bZ.replaceChild(b0,bX)));b1=self.document.createElement("div");b1.appendChild(bX);return b1;};ba.FakeRoot=function(bX){var bY;bY=self.document.createElement("div");while(bX.hasChildNodes())bY.appendChild(bX.firstChild);return bY;};ba.PrepareTemplateStrict=function(bX,bY,bZ,b0){var b1;function b2(b8,b9){var b_,b$,ca,cb,cc,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;function cd(cz){}while(true)switch(b8){case 0:if(b9!==null){b_=b9.nextSibling;if(G.Equals(b9.nodeType,E.TEXT_NODE))bx.convertTextNode(b9);else if(G.Equals(b9.nodeType,E.ELEMENT_NODE))b4(b9);b9=b_;}else return null;break;case 1:ce=by.string(b9.nodeName,{$:1,$0:3},null).toLowerCase();cf=(b$=ce.indexOf("."),b$===-1?[bX,ce]:[by.string(ce,null,{$:1,$0:b$-1}),by.string(ce,{$:1,$0:b$+1},null)]);cg=cf[1];ch=cf[0];if(ch!==""&&!ba.LoadedTemplates().ContainsKey(ch))return bx.failNotLoaded(cg);else{if(ch===""&&b0!=null)b0.$0(cg);ci=ba.LoadedTemplates().get_Item(ch);if(!ci.ContainsKey(cg))return bx.failNotLoaded(cg);else{cj=ci.get_Item(cg);ck=cj.cloneNode(true);cl=new X.New$3();cm=new O.New$5();cn=b9.attributes;for(co=0,cp=cn.length-1;co<=cp;co++){cq=cn.item(co).name.toLowerCase();cm.set_Item(cq,(cr=cn.item(co).nodeValue,cr===""?cq:cr.toLowerCase()));!cl.Add(cq)?bU.warn("Hole mapped twice",cq):void 0;}for(cs=0,ct=b9.childNodes.length-1;cs<=ct;cs++){cu=b9.childNodes[cs];G.Equals(cu.nodeType,E.ELEMENT_NODE)?!cl.Add(cu.nodeName.toLowerCase())?bU.warn("Hole filled twice",cg):void 0:void 0;}cv=b9.childNodes.length===1&&G.Equals(b9.firstChild.nodeType,E.TEXT_NODE);if(cv){cb=bx.fillTextHole(ck,b9.firstChild.textContent,cg);((function(cz){return function(cA){if(cA!=null)cz(cA.$0);};}((cc=function(cz){return function(cA){return cz.Add(cA);};}(cl),function(cz){return cd(cc(cz));})))(cb));}bx.removeHolesExcept(ck,cl);if(!cv){for(cw=0,cx=b9.childNodes.length-1;cw<=cx;cw++){cy=b9.childNodes[cw];G.Equals(cy.nodeType,E.ELEMENT_NODE)?cy.hasAttributes()?bx.fillInstanceAttrs(ck,cy):b3(ck,cy):void 0;}}bx.mapHoles(ck,cm);bx.fill(ck,b9.parentNode,b9);b9.parentNode.removeChild(b9);return;}}break;}}function b3(b8,b9){var b_,ca,cb;function b$(cc,cd){var ce;if(ca==="title"&&b9.hasChildNodes()){ce=_5.ParseHTMLIntoFakeRoot(b9.textContent);b9.removeChild(b9.firstChild);while(ce.hasChildNodes())b9.appendChild(ce.firstChild);}else null;b4(b9);return bx.fill(b9,cc,cd);}ca=b9.nodeName.toLowerCase();ba.foreachNotPreserved(b8,"[ws-attr-holes]",function(cc){var cd,ce,cf,cg,ch;cd=bB.SplitChars(cc.getAttribute("ws-attr-holes"),[" "],1);for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=Q.get(cd,ce);cc.setAttribute(cg,(ch=new a.RegExp("\\${"+ca+"}","ig"),cc.getAttribute(cg).replace(ch,b9.textContent)));}});cb=b8.querySelector("[ws-hole="+ca+"]");if(G.Equals(cb,null)){b_=b8.querySelector("[ws-replace="+ca+"]");return G.Equals(b_,null)?null:(b$(b_.parentNode,b_),void b_.parentNode.removeChild(b_));}else{while(cb.hasChildNodes())cb.removeChild(cb.lastChild);cb.removeAttribute("ws-hole");return b$(cb,null);}}function b4(b8){if(!b8.hasAttribute("ws-preserve"))if(bB.StartsWith(b8.nodeName.toLowerCase(),"ws-"))b6(b8);else{bx.convertAttrs(b8);b5(b8.firstChild);}}function b5(b8){return b2(0,b8);}function b6(b8){return b2(1,b8);}function b7(b8){var b9,b_,b$,ca;while(true){b9=b8.querySelector("[ws-template]");if(G.Equals(b9,null)){b_=b8.querySelector("[ws-children-template]");if(G.Equals(b_,null))return null;else{b$=b_.getAttribute("ws-children-template");b_.removeAttribute("ws-children-template");ba.PrepareTemplateStrict(bX,{$:1,$0:b$},b_,null);b8=b8;}}else{ca=b9.getAttribute("ws-template");(ba.PrepareSingleTemplate(bX,{$:1,$0:ca},b9))(null);b8=b8;}}}b1=(bY==null?"":bY.$0).toLowerCase();ba.LoadedTemplateFile(bX).set_Item(b1,bZ);bZ.hasChildNodes()?(b7(bZ),b5(bZ.firstChild)):void 0;};ba.InlineTemplate=function(bX,bY){var bZ,b0,b1,b2,b5,b6,b7,b8,b9,b_,b$;function b3(ca,cb){var cc,cd,ce;cc=bk.Insert(ca,cb);b6.push(bk.Updates(cc));b7.push([ca,cc]);cd=bT.GetOptional(cc.OnAfterRender);return cd==null?null:(ce=cd.$0,void b8.push(function(){ce(ca);}));}function b4(ca){var cb,cc;cb=(cc=null,[b9.TryGetValue(ca,{get:function(){return cc;},set:function(cd){cc=cd;}}),cc]);return cb[0]?cb[1].$==0?{$:1,$0:cb[1].$1}:cb[1].$==1?{$:1,$0:q.TextNode(cb[1].$1)}:cb[1].$==2?{$:1,$0:q.TextView(cb[1].$1)}:cb[1].$==8?{$:1,$0:q.TextView(cb[1].$1.get_View())}:cb[1].$==9?{$:1,$0:q.TextView(N.Map(a.String,cb[1].$1.get_View()))}:cb[1].$==10?{$:1,$0:q.TextView(N.Map(function(cd){return cd.get_Input();},cb[1].$1.get_View()))}:cb[1].$==11?{$:1,$0:q.TextView(N.Map(a.String,cb[1].$1.get_View()))}:cb[1].$==12?{$:1,$0:q.TextView(N.Map(function(cd){return cd.get_Input();},cb[1].$1.get_View()))}:cb[1].$==13?{$:1,$0:q.TextView(N.Map(a.String,cb[1].$1.get_View()))}:(bU.warn("Content hole filled with attribute data",ca),null):null;}b5=[];b6=[];b7=[];b8=[];b9=new O.New$5();b_=_1.Get(bY);try{while(b_.MoveNext()){b$=b_.Current();b9.set_Item(b$.$0,b$);}}finally{if(typeof b_=="object"&&"Dispose"in b_)b_.Dispose();}bZ=_5.ChildrenArray(bX);ba.foreachNotPreserved(bX,"[ws-hole]",function(ca){var cb,cc,cd;cd=ca.getAttribute("ws-hole");ca.removeAttribute("ws-hole");while(ca.hasChildNodes())ca.removeChild(ca.lastChild);cb=b4(cd);cb!=null&&cb.$==1?(cc=cb.$0,U.LinkElement(ca,cc.docNode),b5.push(_3.New(bk.Empty(ca),cc.docNode,null,ca,C.Int(),null)),b6.push(cc.updates)):void 0;});ba.foreachNotPreserved(bX,"[ws-replace]",function(ca){var cb,cc,cd,ce,cf,cg;cb=b4(ca.getAttribute("ws-replace"));cb!=null&&cb.$==1?(cc=cb.$0,cd=ca.parentNode,ce=self.document.createTextNode(""),cd.replaceChild(ce,ca),cf=U.InsertBeforeDelim(ce,cc.docNode),cg=Q.tryFindIndex(function(ch){return ca===ch;},bZ),cg==null?void 0:Q.set(bZ,cg.$0,cc.docNode),b5.push(_3.New(bk.Empty(cd),cc.docNode,{$:1,$0:[cf,ce]},cd,C.Int(),null)),b6.push(cc.updates)):void 0;});ba.foreachNotPreserved(bX,"[ws-attr]",function(ca){var cb,cc,cd;cb=ca.getAttribute("ws-attr");ca.removeAttribute("ws-attr");cc=(cd=null,[b9.TryGetValue(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);cc[0]?cc[1].$==3?b3(ca,cc[1].$1):bU.warn("Attribute hole filled with non-attribute data",cb):void 0;});ba.foreachNotPreserved(bX,"[ws-on]",function(ca){b3(ca,V.Concat(Q.choose(function(cb){var cc,cd,ce;cc=bB.SplitChars(cb,[":"],1);cd=(ce=null,[b9.TryGetValue(Q.get(cc,1),{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);return cd[0]?cd[1].$==4?{$:1,$0:bA.Handler(Q.get(cc,0),cd[1].$1)}:cd[1].$==5?{$:1,$0:V.Handler(Q.get(cc,0),cd[1].$1)}:(bU.warn("Event hole on"+Q.get(cc,0)+" filled with non-event data",Q.get(cc,1)),null):null;},bB.SplitChars(ca.getAttribute("ws-on"),[" "],1))));ca.removeAttribute("ws-on");});ba.foreachNotPreserved(bX,"[ws-onafterrender]",function(ca){var cb,cc,cd;cb=ca.getAttribute("ws-onafterrender");cc=(cd=null,[b9.TryGetValue(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);cc[0]?cc[1].$==6?(ca.removeAttribute("ws-onafterrender"),b3(ca,bA.OnAfterRender(cc[1].$1))):cc[1].$==7?(ca.removeAttribute("ws-onafterrender"),b3(ca,bA.OnAfterRender(cc[1].$1))):bU.warn("onafterrender hole filled with non-onafterrender data",cb):void 0;});ba.foreachNotPreserved(bX,"[ws-var]",function(ca){var cb,cc,cd;cb=ca.getAttribute("ws-var");ca.removeAttribute("ws-var");cc=(cd=null,[b9.TryGetValue(cb,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);cc[0]?cc[1].$==8?b3(ca,bA.Value(cc[1].$1)):cc[1].$==9?b3(ca,bA.Checked(cc[1].$1)):cc[1].$==10?b3(ca,bA.IntValue(cc[1].$1)):cc[1].$==11?b3(ca,bA.IntValueUnchecked(cc[1].$1)):cc[1].$==12?b3(ca,bA.FloatValue(cc[1].$1)):cc[1].$==13?b3(ca,bA.FloatValueUnchecked(cc[1].$1)):bU.warn("Var hole filled with non-Var data",cb):void 0;});ba.foreachNotPreserved(bX,"[ws-attr-holes]",function(ca){var cb,cc,cd,ce;cb=new a.RegExp(ba.TextHoleRE(),"g");cc=bB.SplitChars(ca.getAttribute("ws-attr-holes"),[" "],1);ca.removeAttribute("ws-attr-holes");for(cd=0,ce=cc.length-1;cd<=ce;cd++)(function(){var cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;co=Q.get(cc,cd);cp=ca.getAttribute(co);cf=null;cg=0;cq=[];while(cf=cb.exec(cp),cf!==null){cr=by.string(cp,{$:1,$0:cg},{$:1,$0:cb.lastIndex-Q.get(cf,0).length-1});cg=cb.lastIndex;cq.push([cr,Q.get(cf,1)]);}ci=by.string(cp,{$:1,$0:cg},null);cb.lastIndex=0;cj=Q.foldBack(function(cs,ct){return(function(cu){var cv,cw;cv=cu[0];cw=cu[1];return function(cx){var cy,cz,cA,cB,cC;cy=cx[0];cz=cx[1];cA=(cB=(cC=null,[b9.TryGetValue(cw,{get:function(){return cC;},set:function(cD){cC=cD;}}),cC]),cB[0]?cB[1].$==1?{$:0,$0:cB[1].$1}:cB[1].$==2?{$:1,$0:cB[1].$1}:cB[1].$==8?{$:1,$0:cB[1].$1.get_View()}:cB[1].$==9?{$:1,$0:N.Map(a.String,cB[1].$1.get_View())}:cB[1].$==10?{$:1,$0:N.Map(function(cD){return cD.get_Input();},cB[1].$1.get_View())}:cB[1].$==11?{$:1,$0:N.Map(a.String,cB[1].$1.get_View())}:cB[1].$==12?{$:1,$0:N.Map(function(cD){return cD.get_Input();},cB[1].$1.get_View())}:cB[1].$==13?{$:1,$0:N.Map(a.String,cB[1].$1.get_View())}:(bU.warn("Attribute value hole filled with non-text data",cw),{$:0,$0:""}):{$:0,$0:""});return cA.$==1?[cv,new _0({$:1,$0:cy===""?cA.$0:N.Map(function(cD){return cD+cy;},cA.$0),$1:cz})]:[cv+cA.$0+cy,cz];};}(cs))(ct);},cq,[ci,_0.Empty]);return b3(ca,cj[1].$==1?cj[1].$1.$==1?cj[1].$1.$1.$==1?cj[1].$1.$1.$1.$==0?(ck=cj[0],bA.Dynamic(co,N.Map3(function(cs,ct,cu){return ck+cs+ct+cu;},cj[1].$0,cj[1].$1.$0,cj[1].$1.$1.$0))):(cl=cj[0],bA.Dynamic(co,N.Map(function(cs){return cl+bB.concat("",cs);},N.Sequence(cj[1])))):(cm=cj[0],bA.Dynamic(co,N.Map2(function(cs,ct){return cm+cs+ct;},cj[1].$0,cj[1].$1.$0))):cj[0]===""?bA.Dynamic(co,cj[1].$0):(cn=cj[0],bA.Dynamic(co,N.Map(function(cs){return cn+cs;},cj[1].$0))):V.Create(co,cj[0]));}());});return[bT.DeleteEmptyFields({Els:bZ,Dirty:true,Holes:b5,Attrs:b7,Render:(b0=b8.length==0?null:{$:1,$0:function(ca){Q.iter(function(cb){cb(ca);},b8);}},b0?b0.$0:void 0),El:(b1=!G.Equals(bZ,null)&&bZ.length===1&&(Q.get(bZ,0)instanceof E&&(Q.get(bZ,0)instanceof a.Element&&(b2=Q.get(bZ,0),true)))?{$:1,$0:b2}:null,b1?b1.$0:void 0)},["Render","El"]),bj.TreeReduce(N.Const(),N.Map2Unit,b6)];};ba.GlobalHoles=function(){bn.$cctor();return bn.GlobalHoles;};ba.foreachNotPreserved=function(bX,bY,bZ){_5.IterSelector(bX,bY,function(b0){if(b0.closest("[ws-preserve]")==null)bZ(b0);});};ba.PrepareSingleTemplate=function(bX,bY,bZ){var b0;b0=ba.FakeRootSingle(bZ);return function(b1){ba.PrepareTemplateStrict(bX,bY,b0,b1);};};ba.TextHoleRE=function(){bn.$cctor();return bn.TextHoleRE;};Z.head=function(bX){return bX.$==1?bX.$0:Z.listEmpty();};Z.tail=function(bX){return bX.$==1?bX.$1:Z.listEmpty();};Z.listEmpty=function(){return n.FailWith("The input list was empty.");};bc.New=function(bX,bY,bZ,b0){var b1;b1={DynElem:bX,DynFlags:bY,DynNodes:bZ};bT.SetOptional(b1,"OnAfterRender",b0);return b1;};be.New=function(bX,bY){return{PreviousNodes:bX,Top:bY};};bf.get_Empty=function(){return{$:0,$0:new X.New$3()};};bf.FindAll=function(bX){var bY;function bZ(b2,b3){var b4,b5,b6,b7,b8;while(true)switch(b2){case 0:if(b3!=null&&b3.$==0){b5=b3.$1;b6=b3.$0;bZ(0,b6);b3=b5;}else if(b3!=null&&b3.$==1){b7=b3.$0;b3=b7;b2=1;}else if(b3!=null&&b3.$==2){b8=b3.$0;b3=b8.Current;}else return b3!=null&&b3.$==6?(b4=b3.$0.Holes,(function(b9){return function(b_){Q.iter(b9,b_);};}(b1))(b4)):null;break;case 1:bY.push(b3);b3=b3.Children;b2=0;break;}}function b0(b2){return bZ(0,b2);}function b1(b2){return bZ(1,b2);}bY=[];b0(bX);return{$:0,$0:new X.New$2(bY)};};bf.Filter=function(bX,bY){return{$:0,$0:bw.Filter(bX,bY.$0)};};bf.Except=function(bX,bY){return{$:0,$0:bw.Except(bX.$0,bY.$0)};};bf.ToArray=function(bX){return bw.ToArray(bX.$0);};bf.Intersect=function(bX,bY){return{$:0,$0:bw.Intersect(bX.$0,bY.$0)};};bg.Delay=function(bX){return function(bY){try{(bX(null))(bY);}catch(bZ){bY.k({$:1,$0:bZ});}};};bg.Bind=function(bX,bY){return bg.checkCancel(function(bZ){bX(bt.New(function(b0){var b1;if(b0.$==0){b1=b0.$0;bg.scheduler().Fork(function(){try{(bY(b1))(bZ);}catch(b2){bZ.k({$:1,$0:b2});}});}else bg.scheduler().Fork(function(){bZ.k(b0);});},bZ.ct));});};bg.Zero=function(){bu.$cctor();return bu.Zero;};bg.Start=function(bX,bY){var bZ,b0;bZ=(b0=(bg.defCTS())[0],bY==null?b0:bY.$0);bg.scheduler().Fork(function(){if(!bZ.c)bX(bt.New(function(b1){if(b1.$==1)bg.UncaughtAsyncError(b1.$0);},bZ));});};bg.Return=function(bX){return function(bY){bY.k({$:0,$0:bX});};};bg.scheduler=function(){bu.$cctor();return bu.scheduler;};bg.checkCancel=function(bX){return function(bY){if(bY.ct.c)bg.cancel(bY);else bX(bY);};};bg.defCTS=function(){bu.$cctor();return bu.defCTS;};bg.UncaughtAsyncError=function(bX){bU.log("WebSharper: Uncaught asynchronous exception",bX);};bg.FromContinuations=function(bX){return function(bY){var bZ;function b0(b1){if(bZ[0])n.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bZ[0]=true;bg.scheduler().Fork(b1);}}bZ=[false];bX(function(b1){b0(function(){bY.k({$:0,$0:b1});});},function(b1){b0(function(){bY.k({$:1,$0:b1});});},function(b1){b0(function(){bY.k({$:2,$0:b1});});});};};bg.cancel=function(bX){bX.k({$:2,$0:new bK.New(bX.ct)});};bh.UseAnimations=function(){bl.$cctor();return bl.UseAnimations;};bh.Actions=function(bX){return bh.ConcatActions(Q.choose(function(bY){return bY.$==1?{$:1,$0:bY.$0}:null;},bm.ToArray(bX.$0)));};bh.Finalize=function(bX){Q.iter(function(bY){if(bY.$==0)bY.$0();},bm.ToArray(bX.$0));};bh.ConcatActions=function(bX){var bY,bZ,b0,b1;bY=bj.ofSeqNonCopying(bX);bZ=Q.length(bY);return bZ===0?bh.Const():bZ===1?Q.get(bY,0):(b0=A.max(A.map(function(b2){return b2.Duration;},bY)),(b1=Q.map(function(b2){return bh.Prolong(b0,b2);},bY),bh.Def(b0,function(b2){Q.iter(function(b3){b3.Compute(b2);},b1);})));};bh.List=function(bX){return bX.$0;};bh.Const=function(bX){return bh.Def(0,function(){return bX;});};bh.Def=function(bX,bY){return{Compute:bY,Duration:bX};};bh.Prolong=function(bX,bY){var bZ,b0,b1;bZ=bY.Compute;b0=bY.Duration;b1=bL.Create(function(){return bY.Compute(bY.Duration);});return{Compute:function(b2){return b2>=b0?b1.f():bZ(b2);},Duration:bX};};bi.$cctor=function(){bi.$cctor=a.ignore;bi.BatchUpdatesEnabled=true;};bj.mapInPlace=function(bX,bY){var bZ,b0;for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)bY[bZ]=bX(bY[bZ]);return bY;};bj.ofSeqNonCopying=function(bX){var bY,bZ;if(bX instanceof a.Array)return bX;else if(bX instanceof _0)return Q.ofList(bX);else if(bX===null)return[];else{bY=[];bZ=_1.Get(bX);try{while(bZ.MoveNext())bY.push(bZ.Current());return bY;}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}}};bj.TreeReduce=function(bX,bY,bZ){var b0;function b1(b2){return function(b3){var b4,b5;return b3<=0?bX:b3===1&&(b2>=0&&b2<b0)?Q.get(bZ,b2):(b5=b3/2>>0,bY((b1(b2))(b5),(b1(b2+b5))(b3-b5)));};}b0=Q.length(bZ);return(b1(0))(b0);};bj.MapTreeReduce=function(bX,bY,bZ,b0){var b1;function b2(b3){return function(b4){var b5,b6;return b4<=0?bY:b4===1&&(b3>=0&&b3<b1)?bX(Q.get(b0,b3)):(b6=b4/2>>0,bZ((b2(b3))(b6),(b2(b3+b6))(b4-b6)));};}b1=Q.length(b0);return(b2(0))(b1);};bk.Insert=function(bX,bY){var bZ,b0,b1;function b2(b3){var b4,b5;while(true)if(!(b3===null)){if(b3!=null&&b3.$==1)return bZ.push(b3.$0);else if(b3!=null&&b3.$==2){b4=b3.$1;b5=b3.$0;b2(b5);b3=b4;}else return b3!=null&&b3.$==3?b3.$0(bX):b3!=null&&b3.$==4?b0.push(b3.$0):null;}else return null;}bZ=[];b0=[];b2(bY);b1=bZ.slice(0);return bc.New(bX,bk.Flags(bY),b1,b0.length===0?null:{$:1,$0:function(b3){A.iter(function(b4){b4(b3);},b0);}});};bk.EmptyAttr=function(){bq.$cctor();return bq.EmptyAttr;};bk.HasExitAnim=function(bX){var bY;bY=2;return(bX.DynFlags&bY)===bY;};bk.GetExitAnim=function(bX){return bk.GetAnim(bX,function(bY,bZ){return bY.NGetExitAnim(bZ);});};bk.HasEnterAnim=function(bX){var bY;bY=1;return(bX.DynFlags&bY)===bY;};bk.GetEnterAnim=function(bX){return bk.GetAnim(bX,function(bY,bZ){return bY.NGetEnterAnim(bZ);});};bk.HasChangeAnim=function(bX){var bY;bY=4;return(bX.DynFlags&bY)===bY;};bk.GetChangeAnim=function(bX){return bk.GetAnim(bX,function(bY,bZ){return bY.NGetChangeAnim(bZ);});};bk.Flags=function(bX){return bX!==null&&bX.hasOwnProperty("flags")?bX.flags:0;};bk.GetAnim=function(bX,bY){return _6.Concat(Q.map(function(bZ){return bY(bZ,bX.DynElem);},bX.DynNodes));};bk.Sync=function(bX,bY){Q.iter(function(bZ){bZ.NSync(bX);},bY.DynNodes);};bk.Updates=function(bX){return bj.MapTreeReduce(function(bY){return bY.NChanged();},N.Const(),N.Map2Unit,bX.DynNodes);};bk.Empty=function(bX){return bc.New(bX,0,[],null);};bk.Static=function(bX){return new V({$:3,$0:bX});};bk.Dynamic=function(bX,bY){return new V({$:1,$0:new bO.New(bX,bY)});};bk.AppendTree=function(bX,bY){var bZ;return bX===null?bY:bY===null?bX:(bZ=new V({$:2,$0:bX,$1:bY}),(bk.SetFlags(bZ,bk.Flags(bX)|bk.Flags(bY)),bZ));};bk.SetFlags=function(bX,bY){bX.flags=bY;};bl.$cctor=function(){bl.$cctor=a.ignore;bl.CubicInOut=bs.Custom(function(bX){var bY;bY=bX*bX;return 3*bY-2*(bY*bX);});bl.UseAnimations=true;};bm.Append=function(bX,bY){return bX.$==0?bY:bY.$==0?bX:{$:2,$0:bX,$1:bY};};bm.ToArray=function(bX){var bY;function bZ(b0){var b1,b2;while(true)if(b0.$==1)return bY.push(b0.$0);else if(b0.$==2){b1=b0.$1;b2=b0.$0;bZ(b2);b0=b1;}else return b0.$==3?Q.iter(function(b3){bY.push(b3);},b0.$0):null;}bY=[];bZ(bX);return bY.slice(0);};bm.Concat=function(bX){var bY;bY=bj.ofSeqNonCopying(bX);return bj.TreeReduce(bm.Empty(),bm.Append,bY);};bm.Empty=function(){bM.$cctor();return bM.Empty;};bn.$cctor=function(){bn.$cctor=a.ignore;bn.LoadedTemplates=new O.New$5();bn.LocalTemplatesLoaded=false;bn.GlobalHoles=new O.New$5();bn.TextHoleRE="\\${([^}]+)}";bn.RenderedFullDocTemplate=null;};bo=f.Elt=bT.Class({},q,bo);bo.TreeNode=function(bX,bY){var bZ,b0;function b1(b2){return b2[1];}bZ=bC.Create(bY);return new bo.New$1({$:6,$0:bX},N.Map2Unit((b0=Q.map(function(b2){return bk.Updates(b1(b2));},bX.Attrs),bj.TreeReduce(N.Const(),N.Map2Unit,b0)),bZ.v),Q.get(bX.Els,0),bZ);};bo.New$1=bT.Ctor(function(bX,bY,bZ,b0){q.New.call(this,bX,bY);this.docNode$1=bX;this.updates$1=bY;this.elt=bZ;this.rvUpdates=b0;},bo);bp.concat=function(bX){var bY,bZ;bY=[];for(var b0 in bX)bY.push.apply(bY,bX[b0]);return bY;};bq.$cctor=function(){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6;bq.$cctor=a.ignore;bq.EmptyAttr=null;bq.BoolCheckedApply=bT.Curried3(function(b7,b8,b9){return[b8(function(b_){b_.addEventListener("change",function(){return!G.Equals(b7.Get(),b_.checked)?b7.Set(b_.checked):null;});}),b9(function(b_){return function(b$){b_.checked=b$;};})];});bq.StringSet=function(b7){return function(b8){b7.value=b8;};};bq.StringGet=function(b7){return{$:1,$0:b7.value};};bq.StringApply=(bX=bE.StringGet(),(bY=bE.StringSet(),bT.Curried(bE.ApplyValue,3,[bX,function(b7,b8){return(bY(b7))(b8);}])));bq.IntSetUnchecked=function(b7){return function(b8){b7.value=a.String(b8);};};bq.IntGetUnchecked=function(b7){var b8,b9;b8=b7.value;return bF.isBlank(b8)?{$:1,$0:0}:(b9=+b8,b9!==b9>>0?null:{$:1,$0:b9});};bq.IntApplyUnchecked=(bZ=bE.IntGetUnchecked(),(b0=bE.IntSetUnchecked(),bT.Curried(bE.ApplyValue,3,[bZ,function(b7,b8){return(b0(b7))(b8);}])));bq.IntSetChecked=function(b7){return function(b8){var b9;b9=b8.get_Input();return b7.value!==b9?void(b7.value=b9):null;};};bq.IntGetChecked=function(b7){var b8,b9,b_;b8=b7.value;return{$:1,$0:bF.isBlank(b8)?(b7.checkValidity?b7.checkValidity():true)?new W({$:2,$0:b8}):new W({$:1,$0:b8}):(b9=(b_=0,[S.TryParseInt32(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]),b9[0]?new W({$:0,$0:b9[1],$1:b8}):new W({$:1,$0:b8}))};};bq.IntApplyChecked=(b1=bE.IntGetChecked(),(b2=bE.IntSetChecked(),bT.Curried(bE.ApplyValue,3,[b1,function(b7,b8){return(b2(b7))(b8);}])));bq.FloatSetUnchecked=function(b7){return function(b8){b7.value=a.String(b8);};};bq.FloatGetUnchecked=function(b7){var b8,b9;b8=b7.value;return bF.isBlank(b8)?{$:1,$0:0}:(b9=+b8,a.isNaN(b9)?null:{$:1,$0:b9});};bq.FloatApplyUnchecked=(b3=bE.FloatGetUnchecked(),(b4=bE.FloatSetUnchecked(),bT.Curried(bE.ApplyValue,3,[b3,function(b7,b8){return(b4(b7))(b8);}])));bq.FloatSetChecked=function(b7){return function(b8){var b9;b9=b8.get_Input();return b7.value!==b9?void(b7.value=b9):null;};};bq.FloatGetChecked=function(b7){var b8,b9;b8=b7.value;return{$:1,$0:bF.isBlank(b8)?(b7.checkValidity?b7.checkValidity():true)?new W({$:2,$0:b8}):new W({$:1,$0:b8}):(b9=+b8,a.isNaN(b9)?new W({$:1,$0:b8}):new W({$:0,$0:b9,$1:b8}))};};bq.FloatApplyChecked=(b5=bE.FloatGetChecked(),(b6=bE.FloatSetChecked(),bT.Curried(bE.ApplyValue,3,[b5,function(b7,b8){return(b6(b7))(b8);}])));};br=bg.Scheduler=bT.Class({Fork:function(bX){var bY;bY=this;this.robin.push(bX);this.idle?(this.idle=false,a.setTimeout(function(){bY.tick();},0)):void 0;},tick:function(){var bX,bY,bZ;bY=this;bZ=bW.now();bX=true;while(bX)if(this.robin.length===0){this.idle=true;bX=false;}else{(this.robin.shift())();bW.now()-bZ>40?(a.setTimeout(function(){bY.tick();},0),bX=false):void 0;}}},c,br);br.New=bT.Ctor(function(){c.New.call(this);this.idle=true;this.robin=[];},br);bs=f.Easing=bT.Class({},c,bs);bs.Custom=function(bX){return new bs.New(bX);};bs.New=bT.Ctor(function(bX){c.New.call(this);this.transformTime=bX;},bs);bt.New=function(bX,bY){return{k:bX,ct:bY};};bu.$cctor=function(){bu.$cctor=a.ignore;bu.noneCT=bv.New(false,[]);bu.scheduler=new br.New();bu.defCTS=[new bG.New()];bu.Zero=bg.Return();bu.GetCT=function(bX){bX.k({$:0,$0:bX.ct});};};bv.New=function(bX,bY){return{c:bX,r:bY};};bw.Filter=function(bX,bY){return new X.New$2(Q.filter(bX,bw.ToArray(bY)));};bw.Except=function(bX,bY){var bZ;bZ=new X.New$2(bw.ToArray(bY));bZ.ExceptWith(bw.ToArray(bX));return bZ;};bw.ToArray=function(bX){var bY;bY=Q.create(bX.get_Count(),void 0);bX.CopyTo(bY);return bY;};bw.Intersect=function(bX,bY){var bZ;bZ=new X.New$2(bw.ToArray(bX));bZ.IntersectWith(bw.ToArray(bY));return bZ;};bx.convertTextNode=function(bX){var bY,bZ,b0,b1,b2,b3;bY=null;bZ=0;b1=bX.textContent;b2=new a.RegExp(ba.TextHoleRE(),"g");while(bY=b2.exec(b1),bY!==null){bX.parentNode.insertBefore(self.document.createTextNode(by.string(b1,{$:1,$0:bZ},{$:1,$0:b2.lastIndex-Q.get(bY,0).length-1})),bX);bZ=b2.lastIndex;b3=self.document.createElement("span");b3.setAttribute("ws-replace",Q.get(bY,1).toLowerCase());bX.parentNode.insertBefore(b3,bX);}b2.lastIndex=0;bX.textContent=by.string(b1,{$:1,$0:bZ},null);};bx.failNotLoaded=function(bX){bU.warn("Instantiating non-loaded template",bX);};bx.fillTextHole=function(bX,bY,bZ){var b0;b0=bX.querySelector("[ws-replace]");return G.Equals(b0,null)?(bU.warn("Filling non-existent text hole",bZ),null):(b0.parentNode.replaceChild(self.document.createTextNode(bY),b0),{$:1,$0:b0.getAttribute("ws-replace")});};bx.removeHolesExcept=function(bX,bY){function bZ(b0){ba.foreachNotPreserved(bX,"["+b0+"]",function(b1){if(!bY.Contains(b1.getAttribute(b0)))b1.removeAttribute(b0);});}bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");ba.foreachNotPreserved(bX,"[ws-hole]",function(b0){if(!bY.Contains(b0.getAttribute("ws-hole"))){b0.removeAttribute("ws-hole");while(b0.hasChildNodes())b0.removeChild(b0.lastChild);}});ba.foreachNotPreserved(bX,"[ws-replace]",function(b0){if(!bY.Contains(b0.getAttribute("ws-replace")))b0.parentNode.removeChild(b0);});ba.foreachNotPreserved(bX,"[ws-on]",function(b0){b0.setAttribute("ws-on",bB.concat(" ",Q.filter(function(b1){return bY.Contains(Q.get(bB.SplitChars(b1,[":"],1),1));},bB.SplitChars(b0.getAttribute("ws-on"),[" "],1))));});ba.foreachNotPreserved(bX,"[ws-attr-holes]",function(b0){var b1,b2,b3,b4,b5;b1=bB.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++){b4=Q.get(b1,b2);b0.setAttribute(b4,(b5=new a.RegExp(ba.TextHoleRE(),"g"),b0.getAttribute(b4).replace(b5,function(b6,b7){return bY.Contains(b7)?b6:"";})));}});};bx.fillInstanceAttrs=function(bX,bY){var bZ,b0,b1,b2,b3;bx.convertAttrs(bY);bZ=bY.nodeName.toLowerCase();b0=bX.querySelector("[ws-attr="+bZ+"]");if(G.Equals(b0,null))bU.warn("Filling non-existent attr hole",bZ);else{b0.removeAttribute("ws-attr");for(b1=0,b2=bY.attributes.length-1;b1<=b2;b1++){b3=bY.attributes.item(b1);b3.name==="class"&&b0.hasAttribute("class")?b0.setAttribute("class",b0.getAttribute("class")+" "+b3.nodeValue):b0.setAttribute(b3.name,b3.nodeValue);}}};bx.mapHoles=function(bX,bY){function bZ(b0){ba.foreachNotPreserved(bX,"["+b0+"]",function(b1){var b2,b3;b2=(b3=null,[bY.TryGetValue(b1.getAttribute(b0).toLowerCase(),{get:function(){return b3;},set:function(b4){b3=b4;}}),b3]);b2[0]?b1.setAttribute(b0,b2[1]):void 0;});}bZ("ws-hole");bZ("ws-replace");bZ("ws-attr");bZ("ws-onafterrender");bZ("ws-var");ba.foreachNotPreserved(bX,"[ws-on]",function(b0){b0.setAttribute("ws-on",bB.concat(" ",Q.map(function(b1){var b2,b3,b4;b2=bB.SplitChars(b1,[":"],1);b3=(b4=null,[bY.TryGetValue(Q.get(b2,1),{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]);return b3[0]?Q.get(b2,0)+":"+b3[1]:b1;},bB.SplitChars(b0.getAttribute("ws-on"),[" "],1))));});ba.foreachNotPreserved(bX,"[ws-attr-holes]",function(b0){var b1,b2,b3;b1=bB.SplitChars(b0.getAttribute("ws-attr-holes"),[" "],1);for(b2=0,b3=b1.length-1;b2<=b3;b2++)(function(){var b4;function b5(b6,b7){var b8;b8=n.KeyValue(b7);return b6.replace(new a.RegExp("\\${"+b8[0]+"}","ig"),"${"+b8[1]+"}");}b4=Q.get(b1,b2);return b0.setAttribute(b4,(((bT.Curried3(A.fold))(b5))(b0.getAttribute(b4)))(bY));}());});};bx.fill=function(bX,bY,bZ){while(true)if(bX.hasChildNodes())bZ=bY.insertBefore(bX.lastChild,bZ);else return null;};bx.convertAttrs=function(bX){var bZ,b0,b1,b2,b3,b4,b5,b6;function bY(b7){var b8;b8=bX.getAttribute(b7);b8===null?void 0:bX.setAttribute(b7,b8.toLowerCase());}bZ=bX.attributes;b0=[];b1=[];b2=[];for(b3=0,b4=bZ.length-1;b3<=b4;b3++){b5=bZ.item(b3);bB.StartsWith(b5.nodeName,"ws-on")&&b5.nodeName!=="ws-onafterrender"&&b5.nodeName!=="ws-on"?(b0.push(b5.nodeName),b1.push(by.string(b5.nodeName,{$:1,$0:"ws-on".length},null)+":"+b5.nodeValue.toLowerCase())):!bB.StartsWith(b5.nodeName,"ws-")&&(new a.RegExp(ba.TextHoleRE())).test(b5.nodeValue)?(b5.nodeValue=(b6=new a.RegExp(ba.TextHoleRE(),"g"),b5.nodeValue.replace(b6,function(b7,b8){return"${"+b8.toLowerCase()+"}";})),b2.push(b5.nodeName)):void 0;}!(b1.length==0)?bX.setAttribute("ws-on",bB.concat(" ",b1)):void 0;!(b2.length==0)?bX.setAttribute("ws-attr-holes",bB.concat(" ",b2)):void 0;bY("ws-hole");bY("ws-replace");bY("ws-attr");bY("ws-onafterrender");bY("ws-var");Q.iter(function(b7){bX.removeAttribute(b7);},b0);};by.string=function(bX,bY,bZ){return bY==null?bZ!=null&&bZ.$==1?bX.slice(0,bZ.$0+1):"":bZ==null?bX.slice(bY.$0):bX.slice(bY.$0,bZ.$0+1);};A.insufficient=function(){return n.FailWith("The input sequence has an insufficient number of elements.");};bz=x.KeyCollection=bT.Class({GetEnumerator$1:function(){return _1.Get(A.map(function(bX){return bX.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},c,bz);bz.New=bT.Ctor(function(bX){c.New.call(this);this.d=bX;},bz);bA.Handler=function(bX,bY){return bk.Static(function(bZ){bZ.addEventListener(bX,function(b0){return(bY(bZ))(b0);},false);});};bA.OnAfterRender=function(bX){return new V({$:4,$0:bX});};bA.Value=function(bX){var bY;bY=(((bE.StringApply())(bX))(bk.Static))(function(bZ){return bA.DynamicCustom(bZ,bX.get_View());});return V.Append(bY[0],bY[1]);};bA.Checked=function(bX){var bY;bY=(((bE.BoolCheckedApply())(bX))(bk.Static))(function(bZ){return bA.DynamicCustom(bZ,bX.get_View());});return V.Append(bY[0],bY[1]);};bA.IntValue=function(bX){var bY;bY=(((bE.IntApplyChecked())(bX))(bk.Static))(function(bZ){return bA.DynamicCustom(bZ,bX.get_View());});return V.Append(bY[0],bY[1]);};bA.IntValueUnchecked=function(bX){var bY;bY=(((bE.IntApplyUnchecked())(bX))(bk.Static))(function(bZ){return bA.DynamicCustom(bZ,bX.get_View());});return V.Append(bY[0],bY[1]);};bA.FloatValue=function(bX){var bY;bY=(((bE.FloatApplyChecked())(bX))(bk.Static))(function(bZ){return bA.DynamicCustom(bZ,bX.get_View());});return V.Append(bY[0],bY[1]);};bA.FloatValueUnchecked=function(bX){var bY;bY=(((bE.FloatApplyUnchecked())(bX))(bk.Static))(function(bZ){return bA.DynamicCustom(bZ,bX.get_View());});return V.Append(bY[0],bY[1]);};bA.Dynamic=function(bX,bY){return bk.Dynamic(bY,function(bZ){return function(b0){return bZ.setAttribute(bX,b0);};});};bA.DynamicCustom=function(bX,bY){return bk.Dynamic(bY,bX);};bB.concat=function(bX,bY){return Q.ofSeq(bY).join(bX);};bB.SplitChars=function(bX,bY,bZ){return bB.Split(bX,new a.RegExp("["+bB.RegexEscape(bY.join(""))+"]"),bZ);};bB.StartsWith=function(bX,bY){return bX.substring(0,bY.length)==bY;};bB.forall=function(bX,bY){return A.forall(bX,bB.protect(bY));};bB.Split=function(bX,bY,bZ){return bZ===1?Q.filter(function(b0){return b0!=="";},bB.SplitWith(bX,bY)):bB.SplitWith(bX,bY);};bB.RegexEscape=function(bX){return bX.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bB.protect=function(bX){return bX===null?"":bX;};bB.SplitWith=function(bX,bY){return bX.split(bY);};bC=f.Updates=bT.Class({},null,bC);bC.Create=function(bX){var bY;bY=null;bY=bC.New(bX,null,function(){var bZ;bZ=bY.s;return bZ===null?(bZ=p.Copy(bY.c()),bY.s=bZ,p.WhenObsoleteRun(bZ,function(){bY.s=null;}),bZ):bZ;});return bY;};bC.New=function(bX,bY,bZ){return new bC({c:bX,s:bY,v:bZ});};bD=x.ValueCollection=bT.Class({GetEnumerator$1:function(){return _1.Get(A.map(function(bX){return bX.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},c,bD);bD.New=bT.Ctor(function(bX){c.New.call(this);this.d=bX;},bD);bE.ApplyValue=function(bX,bY,bZ,b0,b1){return[b0(function(b2){function b3(){bZ.UpdateMaybe(function(b4){var b5,b6;b5=bX(b2);return b5!=null&&b5.$==1&&(!G.Equals(b5.$0,b4)&&(b6=[b5,b5.$0],true))?b6[0]:null;});}b2.addEventListener("change",b3);b2.addEventListener("input",b3);b2.addEventListener("keypress",b3);}),b1(function(b2){return function(b3){var b4,b5;b4=bX(b2);return b4!=null&&b4.$==1&&(G.Equals(b4.$0,b3)&&(b5=b4.$0,true))?null:bY(b2,b3);};})];};bE.StringSet=function(){bq.$cctor();return bq.StringSet;};bE.StringGet=function(){bq.$cctor();return bq.StringGet;};bE.IntSetUnchecked=function(){bq.$cctor();return bq.IntSetUnchecked;};bE.IntGetUnchecked=function(){bq.$cctor();return bq.IntGetUnchecked;};bE.IntSetChecked=function(){bq.$cctor();return bq.IntSetChecked;};bE.IntGetChecked=function(){bq.$cctor();return bq.IntGetChecked;};bE.FloatSetUnchecked=function(){bq.$cctor();return bq.FloatSetUnchecked;};bE.FloatGetUnchecked=function(){bq.$cctor();return bq.FloatGetUnchecked;};bE.FloatSetChecked=function(){bq.$cctor();return bq.FloatSetChecked;};bE.FloatGetChecked=function(){bq.$cctor();return bq.FloatGetChecked;};bE.StringApply=function(){bq.$cctor();return bq.StringApply;};bE.BoolCheckedApply=function(){bq.$cctor();return bq.BoolCheckedApply;};bE.IntApplyChecked=function(){bq.$cctor();return bq.IntApplyChecked;};bE.IntApplyUnchecked=function(){bq.$cctor();return bq.IntApplyUnchecked;};bE.FloatApplyChecked=function(){bq.$cctor();return bq.FloatApplyChecked;};bE.FloatApplyUnchecked=function(){bq.$cctor();return bq.FloatApplyUnchecked;};bF.isBlank=function(bX){return bB.forall(bI.IsWhiteSpace,bX);};bG=b.CancellationTokenSource=bT.Class({},c,bG);bG.New=bT.Ctor(function(){c.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bG);bH.Children=function(bX,bY){var bZ,b0,b1;if(bY!=null&&bY.$==1){b1=[];bZ=bY.$0[0].nextSibling;while(bZ!==bY.$0[1]){b1.push(bZ);bZ=bZ.nextSibling;}return{$:0,$0:b1};}else return{$:0,$0:Q.init(bX.childNodes.length,(b0=bX.childNodes,function(b2){return b0[b2];}))};};bH.Except=function(bX,bY){var bZ;bZ=bX.$0;return{$:0,$0:Q.filter(function(b0){return Q.forall(function(b1){return!(b0===b1);},bZ);},bY.$0)};};bH.Iter=function(bX,bY){Q.iter(bX,bY.$0);};bH.DocChildren=function(bX){var bY;function bZ(b0){var b1,b2,b3,b4;while(true){if(b0!=null&&b0.$==2){b2=b0.$0;b0=b2.Current;}else if(b0!=null&&b0.$==1)return bY.push(b0.$0.El);else if(b0==null)return null;else if(b0!=null&&b0.$==5)return bY.push(b0.$0);else if(b0!=null&&b0.$==4)return bY.push(b0.$0.Text);else if(b0!=null&&b0.$==6){b1=b0.$0.Els;return(function(b5){return function(b6){Q.iter(b5,b6);};}(function(b5){if(b5==null||b5.constructor===K)bZ(b5);else bY.push(b5);}))(b1);}else{b3=b0.$1;b4=b0.$0;bZ(b4);b0=b3;}}}bY=[];bZ(bX.Children);return{$:0,$0:bj.ofSeqNonCopying(bY)};};bI.IsWhiteSpace=function(bX){return bX.match(new a.RegExp("\\s"))!==null;};S.TryParse=function(bX,bY,bZ,b0){var b1,b2;b1=+bX;b2=b1===b1-b1%1&&b1>=bY&&b1<=bZ;b2?b0.set(b1):void 0;return b2;};bK=b.OperationCanceledException=bT.Class({},bJ,bK);bK.New=bT.Ctor(function(bX){bK.New$1.call(this,"The operation was canceled.",null,bX);},bK);bK.New$1=bT.Ctor(function(bX,bY,bZ){this.message=bX;this.inner=bY;K.setPrototypeOf(this,bK.prototype);this.ct=bZ;},bK);bL.Create=function(bX){return bR.New(false,bX,bL.forceLazy);};bL.forceLazy=function(){var bX;bX=this.v();this.c=true;this.v=bX;this.f=bL.cachedLazy;return bX;};bL.cachedLazy=function(){return this.v;};bM.$cctor=function(){bM.$cctor=a.ignore;bM.Empty={$:0};};bN.$cctor=function(){var bX;bN.$cctor=a.ignore;bN.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bN.rtagName=new a.RegExp("<([\\w:]+)");bN.rhtml=new a.RegExp("<|&#?\\w+;");bN.wrapMap=(bX=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bX,tbody:bX,tfoot:bX,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bN.defaultWrap=[0,"",""];};bO=f.DynamicAttrNode=bT.Class({NGetExitAnim:function(bX){return _6.get_Empty();},NGetEnterAnim:function(bX){return _6.get_Empty();},NGetChangeAnim:function(bX){return _6.get_Empty();},NSync:function(bX){if(this.dirty){(this.push(bX))(this.value);this.dirty=false;}},NChanged:function(){return this.updates;}},c,bO);bO.New=bT.Ctor(function(bX,bY){var bZ;bZ=this;c.New.call(this);this.push=bY;this.value=void 0;this.dirty=false;this.updates=N.Map(function(b0){bZ.value=b0;bZ.dirty=true;},bX);},bO);bP.Clear=function(bX){bX.splice(0,Q.length(bX));};bR.New=function(bX,bY,bZ){return{c:bX,v:bY,f:bZ};};bT.OnLoad(function(){e.ClientMain();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
