(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR;a=self;b=a.SMApp=a.SMApp||{};c=b.Web=b.Web||{};d=c.ClientExtensions=c.ClientExtensions||{};e=d.SweetAlert=d.SweetAlert||{};f=c._Html=c._Html||{};g=c.htmModule=c.htmModule||{};h=a.StartupCode$SMApp_Web$ClientExtensions=a.StartupCode$SMApp_Web$ClientExtensions||{};i=c.TypingDNA=c.TypingDNA||{};j=i.SaveResponse=i.SaveResponse||{};k=i.UserResponse=i.UserResponse||{};l=i.VerifyResponse=i.VerifyResponse||{};m=c.Bs=c.Bs||{};n=b.NLU=b.NLU||{};o=n.Witai=n.Witai||{};p=o.Utterance=o.Utterance||{};q=o.Intent=o.Intent||{};r=o.Entity=o.Entity||{};s=o.Trait=o.Trait||{};t=o["Utterance'"]=o["Utterance'"]||{};u=o["Value'"]=o["Value'"]||{};v=c.BabelNet=c.BabelNet||{};w=v.DisambiguateApiResponse=v.DisambiguateApiResponse||{};x=v.TokenFragment=v.TokenFragment||{};y=v.CharFragment=v.CharFragment||{};z=c.NLG=c.NLG||{};A=a.StartupCode$SMApp_Web$NLG=a.StartupCode$SMApp_Web$NLG||{};B=c.NLU=c.NLU||{};C=B.Intent=B.Intent||{};D=B.Trait=B.Trait||{};E=B.Entity=B.Entity||{};F=B.Utterance=B.Utterance||{};G=B.Voice=B.Voice||{};H=G["Entity'"]=G["Entity'"]||{};I=B.Text=B.Text||{};J=I["Utterance'"]=I["Utterance'"]||{};K=I["Intent'"]=I["Intent'"]||{};L=I["Entity'"]=I["Entity'"]||{};M=I["Trait'"]=I["Trait'"]||{};N=B.Domain=B.Domain||{};O=a.StartupCode$SMApp_Web$NLU=a.StartupCode$SMApp_Web$NLU||{};P=c.Knowledge=c.Knowledge||{};Q=P.EmotionalTrait=P.EmotionalTrait||{};R=P.BehavioralTrait=P.BehavioralTrait||{};S=P.Relation=P.Relation||{};T=P.Triple=P.Triple||{};U=P.Subject=P.Subject||{};V=P.Verb=P.Verb||{};W=P.Object=P.Object||{};X=P.ExpertAIEntity=P.ExpertAIEntity||{};Y=P.ExpertAILemma=P.ExpertAILemma||{};Z=c.CUI=c.CUI||{};_0=Z.MicState=Z.MicState||{};_1=Z.ClientState=Z.ClientState||{};_2=Z.Interpreter=Z.Interpreter||{};_3=Z.CUI=Z.CUI||{};_4=c.Dialogue=c.Dialogue||{};_5=c.Question=c.Question||{};_6=c.QuestionType=c.QuestionType||{};_7=c.DialogueModule=c.DialogueModule||{};_8=c.QuestionDialogs=c.QuestionDialogs||{};_9=c.Questions=c.Questions||{};_=c.User=c.User||{};$=a.StartupCode$SMApp_Web$User=a.StartupCode$SMApp_Web$User||{};ba=c.Journal=c.Journal||{};bb=a.StartupCode$SMApp_Web$Journal=a.StartupCode$SMApp_Web$Journal||{};bc=c.Symptoms=c.Symptoms||{};bd=a.StartupCode$SMApp_Web$Symptoms=a.StartupCode$SMApp_Web$Symptoms||{};be=c.Main=c.Main||{};bf=a.StartupCode$SMApp_Web$Main=a.StartupCode$SMApp_Web$Main||{};bg=c.Client=c.Client||{};bh=a.StartupCode$SMApp_Web$Client=a.StartupCode$SMApp_Web$Client||{};bi=a.SMApp$Web_GeneratedPrintf=a.SMApp$Web_GeneratedPrintf||{};bj=a.GeneratedPrintf=a.GeneratedPrintf||{};bk=a.WebSharper;bl=bk&&bk.Arrays;bm=a.SweetAlert;bn=a.IntelliFactory;bo=bn&&bn.Runtime;bp=bk&&bk.Operators;bq=bk&&bk.UI;br=bq&&bq.Doc;bs=bq&&bq.AttrProxy;bt=bq&&bq.Client;bu=bt&&bt.Templates;bv=bk&&bk.Utils;bw=a.console;bx=a.jQuery;by=bk&&bk.Strings;bz=bk&&bk.List;bA=bk&&bk.Seq;bB=bq&&bq.AttrModule;bC=bk&&bk.Concurrency;bD=bk&&bk.Random;bE=bk&&bk.Collections;bF=bE&&bE.Map;bG=bk&&bk.JavaScript;bH=bG&&bG.Pervasives;bI=bk&&bk.ClientSideJson;bJ=bI&&bI.Provider;bK=a.JSON;bL=a.SDK;bM=bk&&bk.Unchecked;bN=bk&&bk.Remoting;bO=bN&&bN.AjaxRemotingProvider;bP=a.Wit;bQ=a.document;bR=bE&&bE.Dictionary;d.getCameraCanvas=function(){return a.getCameraCanvas();};d.stopCamera=function(){return a.stopCamera();};d.startCamera=function(bS,bT){return a.startCamera(bS,bT);};d.speechSynthesis=function(){return a.speechSynthesis;};d.lastMicData=function(){return a.lastMicData;};d.Terminal=function(){return a.$("#term").terminal();};d.enableTerminal=function(){return a.$("#term").terminal().enable();};d.disableTerminal=function(){return a.$("#term").terminal().disable();};d.boxesWithTitles=function(bS){return bl.map(function(bT){var bU;bU={};bU.titleText=bT;return bU;},bS);};d.confirmQuestionBox=function(){bm.clickConfirm();};d.questionBox=function(bS,bT,bU,bV,bW,bX,bY){var bZ,b0,b1,b2,b3,b4;bZ=(b0=bV==null?(b1={},b1.titleText=bS,b1.text=bT,b1.icon="question",b1.html="<div></div>",b1.allowOutsideClick=false,b1):(b2=bV.$0[0],(b3={},b3.titleText=bS,b3.text=bT,b3.icon="question",b3.width=a.String(b2),b3.html=(((bo.Curried3(function(b5,b6,b7){return b5("<div class=\"swal2-content-custom\" style=\"width:"+a.String(b6)+"px;height:"+a.String(b7)+"px\"></div>");}))(a.id))(b2))(bV.$0[1]),b3.allowOutsideClick=false,b3)),(bW!=null?bW.$0(b0):void 0,bU!=null&&bU.$==1?(b4=bU.$0,(b0.progressSteps=bl.ofSeq(bp.range(1,bl.length(b4))),bm.mixin(b0).queue(bl.create(bl.length(b4),b0)))):bm.fire(b0)));bX!=null?bX.$0():void 0;bZ.then(bY);};e.get_QueueBoxes=function(){var bS;bS=bm.mixin({});return function(bT){return bS.queue(bT);};};d.getDialogueBoxInput=function(){return bl.get(a.jQuery(".swal2-input").get(),0);};d.getDialogueBoxCanvas=function(){return bl.get(a.jQuery("canvas.swal2-content").get(),0);};d.getDialogueBoxContent=function(){return bl.get(a.jQuery("#swal2-content").get(),0).firstChild;};d.createDialogueBoxCanvas=function(){return d.createCanvas("camera","640","480",bl.get(a.jQuery("#swal2-content").get(),0).firstChild);};d.createCanvas=function(bS,bT,bU,bV){var bW;bW=br.Element("canvas",[d.eid(bS),bs.Create("width",bT),bs.Create("height",bU)],[]);bu.LoadLocalTemplates("");br.Run(bV,bW);return bV.firstChild;};d.elementHTML=function(bS){return bS.innerHTML;};d.createElement=function(bS){var bT;bT=self.document.createElement("div");self.document.appendChild(bT);bu.LoadLocalTemplates("");br.RunAppend(bT,bS);};d.getContainer=function(){return bl.get(a.jQuery("#container").get(),0).firstChild;};d.container=function(bS){return br.Element("div",[d.cls("container")],bS);};d.dindex=function(bS){return bs.Create("data-index",a.String(bS));};d.cls=function(bS){return bs.Create("class",bS);};d.eid=function(bS){return bs.Create("id",bS);};d.getMic=function(){return bl.get(a.jQuery("#microphone").get(),0);};d.terminalOutput=function(){return bl.get(a.jQuery(".terminal-output").get(),0);};d.toLower=function(bS){return bS.toLowerCase();};d.debug=function(bS,bT){d.info((((bo.Curried3(function(bU,bV,bW){return bU("DEBUG: "+bv.toSafe(bV)+": "+bv.prettyPrint(bW));}))(a.id))(bS.toUpperCase()))(bT));};d.error=function(bS){bw.error(bS);};d.info=function(bS){bw.info(bS);};d.jserror=function(bS){bx.error(bS);};d.toArray=function(bS){return bl.map(a.id,bx.makeArray(bS));};d["Terminal.EchoHtml'"]=function(bS,bT){bS.pause();bS.echo(bT,d.rawOpt());bS.resume();};d["Terminal.Echo'"]=function(bS,bT){bS.pause();bS.echo(bT);bS.resume();};d.rawOpt=function(){h.$cctor();return h.rawOpt;};f=c._Html=bo.Class({toString:function(){return f.toString(this);}},null,f);f.toString=function(bS){function bT(bU){return function(bV){var bW,bX,bY,bZ,b0,b1,b2;bX=by.replicate(bU," ");switch(bV.$==0?bV.$1.$==1?bV.$1.$0.$==2?bV.$1.$1.$==0?(bW=[bV.$1.$0.$0,bV.$0],1):(bW=[bV.$1,bV.$0],2):(bW=[bV.$1,bV.$0],2):(bW=[bV.$1,bV.$0],2):bV.$==2?(bW=bV.$0,3):(bW=[bV.$0,bV.$1],0)){case 0:return bW[0]+"=\""+bW[1]+"\"";case 1:bY=bW[1];return bX+"<"+bY+">"+bW[0]+"</"+bY+">\r\n";case 2:bZ=bW[1];b0=bz.partition(function(b3){return b3.$==1;},bW[0]);b1=b0[1];b2=b0[0];return b1.$==0?bX+"<"+bZ+(b2.$===0?"":" "+by.concat(" ",bz.ofSeq(bA.delay(function(){return bA.map(function(b3){return(bT(0))(b3);},b2);}))))+"/>\r\n":bX+"<"+bZ+(b2.$===0?"":" "+by.concat(" ",bz.ofSeq(bA.delay(function(){return bA.map(function(b3){return(bT(0))(b3);},b2);}))))+">\r\n"+by.concat("",bz.ofSeq(bA.delay(function(){return bA.map(function(b3){return(bT(bU+1))(b3);},b1);})))+bX+"</"+bZ+">\r\n";case 3:return bX+bW+"\r\n";}};}return(bT(0))(bS);};g.alt=function(bS){return new f({$:1,$0:"alt",$1:bS});};g.src=function(bS){return new f({$:1,$0:"src",$1:bS});};g.cls=function(bS){return new f({$:1,$0:"class",$1:bS});};g.str=function(bS){return f.toString(bS);};g.op_PercentEquals=function(bS,bT){return new f({$:1,$0:bS,$1:bT});};g.op_Splice=function(bS){var bT;return bz.ofArray([new f({$:2,$0:(bT=bS,a.String(bT))})]);};g.strong=function(){h.$cctor();return h.strong;};g.h4=function(){h.$cctor();return h.h4;};g.h3=function(){h.$cctor();return h.h3;};g.h2=function(){h.$cctor();return h.h2;};g.h1=function(){h.$cctor();return h.h1;};g.li=function(){h.$cctor();return h.li;};g.ul=function(){h.$cctor();return h.ul;};g.th=function(){h.$cctor();return h.th;};g.td=function(){h.$cctor();return h.td;};g.tr=function(){h.$cctor();return h.tr;};g.a=function(){h.$cctor();return h.a;};g.p=function(){h.$cctor();return h.p;};g.area=function(){h.$cctor();return h.area;};g.map=function(){h.$cctor();return h.map;};g.img=function(){h.$cctor();return h.img;};g.tfoot=function(){h.$cctor();return h.tfoot;};g.tbody=function(){h.$cctor();return h.tbody;};g.thead=function(){h.$cctor();return h.thead;};g.table=function(){h.$cctor();return h.table;};g.span=function(){h.$cctor();return h.span;};g.section=function(){h.$cctor();return h.section;};g.br=function(){h.$cctor();return h.br;};g.div=function(){h.$cctor();return h.div;};g.body=function(){h.$cctor();return h.body;};g.style=function(){h.$cctor();return h.style;};g.title=function(){h.$cctor();return h.title;};g.head=function(){h.$cctor();return h.head;};g.html=function(){h.$cctor();return h.html;};g.elem=function(bS,bT){return new f({$:0,$0:bS,$1:bT});};h.$cctor=function(){var bS;h.$cctor=a.ignore;h.rawOpt=(bS={},bS.raw=true,bS);h.html=function(bT){return g.elem("html",bT);};h.head=function(bT){return g.elem("head",bT);};h.title=function(bT){return g.elem("title",bT);};h.style=function(bT){return g.elem("style",bT);};h.body=function(bT){return g.elem("body",bT);};h.div=function(bT){return g.elem("div",bT);};h.br=function(bT){return g.elem("br",bT);};h.section=function(bT){return g.elem("section",bT);};h.span=function(bT){return g.elem("span",bT);};h.table=function(bT){return g.elem("table",bT);};h.thead=function(bT){return g.elem("thead",bT);};h.tbody=function(bT){return g.elem("tbody",bT);};h.tfoot=function(bT){return g.elem("tfoot",bT);};h.img=function(bT){return g.elem("img",bT);};h.map=function(bT){return g.elem("map",bT);};h.area=function(bT){return g.elem("area",bT);};h.p=function(bT){return g.elem("p",bT);};h.a=function(bT){return g.elem("a",bT);};h.tr=function(bT){return g.elem("tr",bT);};h.td=function(bT){return g.elem("td",bT);};h.th=function(bT){return g.elem("th",bT);};h.ul=function(bT){return g.elem("ul",bT);};h.li=function(bT){return g.elem("li",bT);};h.h1=function(bT){return g.elem("h1",bT);};h.h2=function(bT){return g.elem("h1",bT);};h.h3=function(bT){return g.elem("h1",bT);};h.h4=function(bT){return g.elem("h1",bT);};h.strong=function(bT){return g.elem("strong",bT);};};j.New=function(bS,bT,bU,bV){return{name:bS,message:bT,message_code:bU,status:bV};};k.New=function(bS,bT,bU,bV,bW){return{message:bS,message_code:bT,success:bU,count:bV,status:bW};};l.New=function(bS,bT,bU,bV,bW,bX){return{message:bS,message_code:bT,success:bU,result:bV,score:bW,confidence:bX};};m.Radio=function(bS,bT,bU,bV,bW){return br.Element("div",new bz.T({$:1,$0:d.cls("radio"),$1:bT}),[br.Element("label",bV,[br.Radio(bW,true,bU),br.TextNode(bS)])]);};m.checkbox=function(bS,bT,bU,bV,bW){return br.Element("div",new bz.T({$:1,$0:d.cls("checkbox"),$1:bT}),[br.Element("label",bV,[br.CheckBox(bW,bU),br.TextNode(bS)])]);};m.textArea=function(bS,bT,bU,bV,bW){return br.Element("div",new bz.T({$:1,$0:d.cls("form-group"),$1:bT}),[br.Element("label",bV,[br.TextNode(bS)]),br.InputArea(new bz.T({$:1,$0:d.cls("form-control"),$1:bW}),bU)]);};m.inputPassword=function(bS,bT,bU,bV,bW){return br.Element("div",new bz.T({$:1,$0:d.cls("form-group"),$1:bT}),[br.Element("label",bV,[br.TextNode(bS)]),br.PasswordBox(new bz.T({$:1,$0:d.cls("form-control"),$1:bW}),bU)]);};m.input=function(bS,bT,bU,bV,bW){return br.Element("div",new bz.T({$:1,$0:d.cls("form-group"),$1:bT}),[br.Element("label",bV,[br.TextNode(bS)]),br.Input([d.cls("form-control"),bW],bU)]);};m.btnSuccess=function(bS,bT,bU){return br.Element("button",[d.eid(bS),d.cls("btn btn-success"),bB.Handler("click",bU)],[br.TextNode(bT)]);};m.btnSecondary=function(bS,bT,bU){return br.Element("button",[d.eid(bS),d.cls("btn btn-secondary"),bB.Handler("click",bU)],[br.TextNode(bT)]);};m.btnPrimary=function(bS,bT,bU){return br.Element("button",[d.eid(bS),d.cls("btn btn-primary"),bB.Handler("click",bU)],[br.TextNode(bT)]);};p.New=function(bS,bT,bU,bV){return{text:bS,intents:bT,entities:bU,traits:bV};};q.New=function(bS,bT,bU){return{id:bS,name:bT,confidence:bU};};r.New=function(bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2){return{id:bS,name:bT,role:bU,start:bV,end:bW,body:bX,confidence:bY,entities:bZ,suggested:b0,value:b1,type:b2};};s.New=function(bS,bT,bU){return{id:bS,value:bT,confidence:bU};};t.New=function(bS){return{intent:bS};};u.New=function(bS){return{value:bS};};o.getMeaning2=function(bS,bT){function bU(bV,bW){var bX;bx.ajax((bX={},bX.url=(function(bY){return function(bZ){return bY("https://api.wit.ai/message?q="+bv.toSafe(bZ));};}(a.id))(bT),bX.type="GET",bX.beforeSend=function(bY){return bY.setRequestHeader("Authorization","Bearer "+bS);},bX.success=function(bY){return bV(bY);},bX.error=function(bY){return bW(new a.Error(bY.responseText));},bX));}return bC.FromContinuations(function(bV,bW,bX){return bU.apply(null,[bV,bW,bX]);});};o.getMeaning=function(bS,bT,bU,bV){var bW;bx.ajax((bW={},bW.url=(function(bX){return function(bY){return bX("https://api.wit.ai/message?q="+bv.toSafe(bY));};}(a.id))(bT),bW.type="GET",bW.beforeSend=function(bX){return bX.setRequestHeader("Authorization","Bearer "+bS);},bW.success=bU,bW.error=bV,bW));};w.New=function(bS,bT,bU,bV,bW,bX,bY,bZ,b0){return{tokenFragment:bS,charFragment:bT,babelSynsetID:bU,DBpediaURL:bV,BabelNetURL:bW,score:bX,cohrenceScore:bY,globalScore:bZ,source:b0};};x.New=function(bS,bT){return{start:bS,end:bT};};y.New=function(bS,bT){return{start:bS,end:bT};};v.disambiguate=function(bS){function bT(bU,bV){var bW;bx.ajax((bW={},bW.url=(function(bX){return function(bY){return bX("https://babelfy.io/v1/disambiguate?text="+bv.toSafe(bY)+"&lang=EN&extAIDA=true&key=983fc0ec-a6fa-49ef-bd02-203c18aef272");};}(a.id))(bS),bW.type="GET",bW.success=function(bX){return bU(bX);},bW.error=function(bX){return bV(new a.Error(bX.responseText));},bW));}return bC.FromContinuations(function(bU,bV,bW){return bT.apply(null,[bU,bV,bW]);});};z.waitAddPhrases=function(){A.$cctor();return A.waitAddPhrases;};z.waitRetrievePhrases=function(){A.$cctor();return A.waitRetrievePhrases;};z.helpPhrases=function(){A.$cctor();return A.helpPhrases;};z.helloUserPhrases=function(){A.$cctor();return A.helloUserPhrases;};z.helloPhrases=function(){A.$cctor();return A.helloPhrases;};z["getRandomPhrase'"]=function(bS){return z.replace_tok("$0","",bA.nth(z.rng().Next(0,bS.get_Length()),bS));};z.getRandomPhrase=function(bS,bT){return z.replace_tok("$0",bT,bA.nth(z.rng().Next(0,bS.get_Length()),bS));};z.replace_tok=function(bS,bT,bU){return by.Replace(bU,bS,bT);};z.rng=function(){A.$cctor();return A.rng;};A.$cctor=function(){A.$cctor=a.ignore;A.rng=new bD.New();A.helloPhrases=bz.ofArray(["Welcome!","Welcome, my name is Selma.","Welcome to Selma. How can I help?","Hello this is Selma, how can I help?","Hello, I am Selma. How can I help?","Hello, I am Selma. How may I help you now?","I'm Selma. Tell me your name so we can get started."]);A.helloUserPhrases=bz.ofArray(["Hello $0, welcome back.","Welcome $0, nice to see you again.","Hello $0.","Good to see you $0.","Hello $0, nice to see you."]);A.helpPhrases=bz.ofArray(["What can I help you with $0?"]);A.waitRetrievePhrases=bz.ofArray(["Ok, let me check that $0 for you","Please wait while I check that $0 for you.","Wait while I check that $0.","Ok let me see if I can find that $0."]);A.waitAddPhrases=bz.ofArray(["Ok, let me add that $0 for you","Please wait while I add that $0 for you.","Wait while I add that $0.","I'll add that $0 now."]);};C=B.Intent=bo.Class({toString:function(){return(((bo.Curried3(function(bS,bT,bU){return bS("Intent("+bv.toSafe(bT)+", "+bi.p$2(bU)+")");}))(a.id))(this.get_Name()))(this.get_Confidence());},get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,C);D=B.Trait=bo.Class({toString:function(){return(((bo.Curried3(function(bS,bT,bU){return bS("Trait("+bv.toSafe(bT)+", "+bv.prettyPrint(bU)+")");}))(a.id))(this.get_Name()))(this.get_Value());},get_Confidence:function(){return this.$2;},get_Value:function(){return this.$1;},get_Name:function(){return this.$0;}},null,D);E=B.Entity=bo.Class({toString:function(){return(((((bo.Curried(function(bS,bT,bU,bV,bW){return bS("Entity("+bv.toSafe(bT)+", "+bv.toSafe(bU)+", "+bv.toSafe(bV)+", "+bi.p$2(bW)+")");},5))(a.id))(this.get_Name()))(this.get_Role()))(this.get_Value()))(this.get_Confidence());},get_Confidence:function(){return this.$3;},get_Value:function(){return this.$2;},get_Role:function(){return this.$1;},get_Name:function(){return this.$0;}},null,E);F=B.Utterance=bo.Class({toString:function(){return((((bo.Curried(function(bS,bT,bU,bV){return bS(bi.p(bT)+" "+bi.p$3(bU)+" "+bi.p$5(bV));},4))(a.id))(this.get_Intent()))(this.get_Traits()))(this.get_Entities());},get_Entities:function(){var bS;bS=this.$3;return bS!=null?{$:1,$0:bz.sortBy(function(bT){return bT.get_Name();},bS.$0)}:null;},get_Traits:function(){var bS;bS=this.$2;return bS!=null?{$:1,$0:bz.sortBy(function(bT){return bT.get_Name();},bS.$0)}:null;},get_Intent:function(){return this.$1;},get_Text:function(){return this.$0;}},null,F);H.New=function(bS,bT,bU,bV,bW){return{body:bS,end:bT,start:bU,suggested:bV,value:bW};};G["Intent'"]=function(bS,bT){return!(bT.intent==null)?{$:1,$0:new C({$:0,$0:d.toLower(bT.intent.value),$1:null})}:null;};G["Trait'"]=function(bS){return!(bS.domain==null)?{$:1,$0:new D({$:0,$0:"domain",$1:d.toLower(bS.domain.value),$2:null})}:!(bS.dialogue_act==null)?{$:1,$0:new D({$:0,$0:"dialogue_act",$1:d.toLower(bS.dialogue_act.value),$2:null})}:null;};G["Entity'$1"]=function(bS){return!(bS.contact==null)?{$:1,$0:new E({$:0,$0:"contact",$1:"",$2:d.toLower(bS.contact.value),$3:null})}:null;};J=I["Utterance'"]=bo.Class({get_TopIntent:function(){return bz.head(bz.sortBy(function(bS){return bS.get_Confidence();},this.get_Intents()));},get_Traits:function(){return this.$3;},get_Entities:function(){return this.$2;},get_Intents:function(){return this.$1;},get_Text:function(){return this.$0;}},null,J);K=I["Intent'"]=bo.Class({get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,K);L=I["Entity'"]=bo.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,L);M=I["Trait'"]=bo.Class({get_Value:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2];}},null,M);I.HasUtterance=function(bS){var bT,bU,bV,bW,bX,bY;return bS!=null&&bS.$==1&&(bS.$0.$2.get_Length()>0&&(bT=[bS.$0.$2,bS.$0.$1,bS,bS.$0.$0,bS.$0.$3],true))?(bU=bT[0],(bV=bT[2],(bW=bT[4],(bX=bT[1].$==0?null:{$:1,$0:new C({$:0,$0:bV.$0.get_TopIntent().get_Name(),$1:{$:1,$0:bV.$0.get_TopIntent().get_Confidence()}})},(bY=bU.$==0?null:{$:1,$0:bz.map(function(bZ){return new E({$:0,$0:bZ.get_Name(),$1:d.toLower(bZ.get_Role()),$2:bZ.get_Value(),$3:{$:1,$0:bZ.get_Confidence()}});},bz.filter(function(bZ){return bZ.get_Confidence()>I.entityConfidenceThreshold();},bU))},{$:1,$0:new F({$:0,$0:bT[3],$1:bX,$2:bW.$==0?null:{$:1,$0:bz.map(function(bZ){return new D({$:0,$0:d.toLower(bZ.get_Name()),$1:bZ.get_Value(),$2:{$:1,$0:bZ.get_Confidence()}});},bz.filter(function(bZ){return bZ.get_Confidence()>I.entityConfidenceThreshold();},bW))},$3:bY})}))))):null;};I.entityConfidenceThreshold=function(){O.$cctor();return O.entityConfidenceThreshold;};I.set_entityConfidenceThreshold=function(bS){O.$cctor();O.entityConfidenceThreshold=bS;};I.intentConfidenceThreshold=function(){O.$cctor();return O.intentConfidenceThreshold;};I.set_intentConfidenceThreshold=function(bS){O.$cctor();O.intentConfidenceThreshold=bS;};I.getUtterance2=function(bS){var bT;bT=null;return bC.Delay(function(){return bC.Bind(o.getMeaning2("4Y2BLQY5TWLIN7HFIV264S53MY4PCUAT",bS),function(bU){d.debug("NLU",(function(bV){return function(bW){return bV("Wit.ai returned "+bj.p(bW)+" ");};}(a.id))(bU));return bC.Return(new J({$:0,$0:bS,$1:bz.ofArray(bl.map(function(bV){return new K({$:0,$0:bV.name,$1:bV.confidence});},bU.intents)),$2:bz.map(function(bV){return new L({$:0,$0:bV.name,$1:bV.confidence,$2:bV.role,$3:bV.value});},bz.ofSeq(bA.concat(bA.map(function(bV){return bV[1];},bF.ToSeq(bU.entities))))),$3:bz.ofSeq(bA.map(function(bV){var bW;bW=bV[1];return new M({$:0,$0:bV[0],$1:bl.get(bW,0).confidence,$2:bl.get(bW,0).value});},bF.ToSeq(bU.traits)))}));});});};I.getUtterance=function(bS,bT){o.getMeaning("OOGDHEQL7JZRQASXN2N2GHFUKGO3SCNV",bS,function(bU){var bV,bW;d.debug("NLU",(function(bX){return function(bY){return bX("Wit.ai returned: "+bv.prettyPrint(bY));};}(a.id))(bU));bV=!(bU.intents==null)?bz.ofArray(bl.map(function(bX){return new K({$:0,$0:bX.name,$1:bX.confidence});},bU.intents)):bz.T.Empty;bW=!(bU.traits==null)?bz.ofSeq(bA.concat(bz.map(function(bX){return bl.map(function(bY){return new M({$:0,$0:bX,$1:bY.confidence,$2:bY.value});},bH.GetJS(bU.traits,[bX]));},bz.filter(function(bX){return!(bH.GetJS(bU.traits,[bX])==null);},I.trait_types())))):bz.T.Empty;return bT({$:1,$0:new J({$:0,$0:bS,$1:bV,$2:!(bU.entities==null)?bz.ofSeq(bA.concat(bz.map(function(bX){return bl.map(function(bY){return new L({$:0,$0:bY.name,$1:bY.confidence,$2:bY.role,$3:bY.value});},bH.GetJS(bU.entities,[bX]));},bz.filter(function(bX){return!(bH.GetJS(bU.entities,[bX])==null);},I.entity_types())))):bz.T.Empty,$3:bW})});},function(bU,bV,bW){d.error((((bo.Curried3(function(bX,bY,bZ){return bX("Wit.ai returned: "+bv.prettyPrint(bY)+" "+bv.prettyPrint(bZ));}))(a.id))(bV))(bW));return bT(null);});};I.trait_types=function(){O.$cctor();return O.trait_types;};I.entity_types=function(){O.$cctor();return O.entity_types;};I.JournalEntry=function(bS){var bT;return by.StartsWith(bS,"journal ")&&by.Replace(bS,"journal ","")!==""?(bT=by.Replace(bS,"journal ",""),{$:1,$0:new F({$:0,$0:"journal",$1:{$:1,$0:new C({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bz.ofArray([new E({$:0,$0:"journal_entry",$1:"",$2:bT,$3:{$:1,$0:1}})])}})}):null;};I.QuickJournal=function(bS){var bT;return bS==="journal"||bS==="diary"?{$:1,$0:new F({$:0,$0:"journal",$1:{$:1,$0:new C({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};I.QuickNumber=function(bS){var bT,bU,bV,bW,bX,bY;return(bU=I.One(bS),bU!=null&&bU.$==1?(bT=bU.$0,true):(bV=I.Two(bS),bV!=null&&bV.$==1?(bT=bV.$0,true):(bW=I.Three(bS),bW!=null&&bW.$==1?(bT=bW.$0,true):(bX=I.Four(bS),bX!=null&&bX.$==1?(bT=bX.$0,true):(bY=I.Five(bS),bY!=null&&bY.$==1&&(bT=bY.$0,true))))))?{$:1,$0:bT}:null;};I.Five=function(bS){var bT;return bS==="5"||bS==="five"?{$:1,$0:new F({$:0,$0:"five",$1:{$:1,$0:new C({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bz.ofArray([new E({$:0,$0:"wit/ordinal",$1:"",$2:"five",$3:{$:1,$0:1}})])}})}:null;};I.Four=function(bS){var bT;return bS==="4"||bS==="four"?{$:1,$0:new F({$:0,$0:"four",$1:{$:1,$0:new C({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bz.ofArray([new E({$:0,$0:"wit/ordinal",$1:"",$2:"four",$3:{$:1,$0:1}})])}})}:null;};I.Three=function(bS){var bT;return bS==="3"||bS==="three"?{$:1,$0:new F({$:0,$0:"three",$1:{$:1,$0:new C({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bz.ofArray([new E({$:0,$0:"wit/ordinal",$1:"",$2:"three",$3:{$:1,$0:1}})])}})}:null;};I.Two=function(bS){var bT;return bS==="2"||bS==="two"?{$:1,$0:new F({$:0,$0:"two",$1:{$:1,$0:new C({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bz.ofArray([new E({$:0,$0:"wit/ordinal",$1:"",$2:"two",$3:{$:1,$0:1}})])}})}:null;};I.One=function(bS){var bT;return bS==="1"||bS==="one"?{$:1,$0:new F({$:0,$0:"one",$1:{$:1,$0:new C({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bz.ofArray([new E({$:0,$0:"wit/ordinal",$1:"",$2:"one",$3:{$:1,$0:1}})])}})}:null;};I.QuickNo=function(bS){var bT;return bS==="no"||(bS==="nope"||(bS==="no way"||(bS==="nah"||(bS==="don't do it"||bS==="stop"))))?{$:1,$0:new F({$:0,$0:"no",$1:{$:1,$0:new C({$:0,$0:"reject",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};I.QuickYes=function(bS){var bT;return bS==="yes"||(bS==="ok"||(bS==="sure"||(bS==="yeah"||(bS==="yep"||(bS==="uh huh"||(bS==="go ahead"||bS==="go"))))))?{$:1,$0:new F({$:0,$0:"yes",$1:{$:1,$0:new C({$:0,$0:"verify",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};I.QuickHelp=function(bS){var bT;return bS==="help"||(bS==="help me"||(bS==="what's this?"||bS==="huh"))?{$:1,$0:new F({$:0,$0:"help",$1:{$:1,$0:new C({$:0,$0:"help",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};I.QuickHello=function(bS){var bT;return bS==="hello"||(bS==="hey"||(bS==="yo"||bS==="hi"))?{$:1,$0:new F({$:0,$0:"hello",$1:{$:1,$0:new C({$:0,$0:"greet",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};I.Voices=function(bS){return bS==="voices"?{$:1,$0:null}:null;};I.DebugEntry=function(bS){return by.StartsWith(bS,"debug-entry ")?{$:1,$0:by.Replace(bS,"debug-entry ","")}:null;};I.DebugBehavioralTraits=function(bS){return by.StartsWith(bS,"debug-bt ")?{$:1,$0:by.Replace(bS,"debug-bt ","")}:null;};I.DebugEmotionalTraits=function(bS){return by.StartsWith(bS,"debug-et ")?{$:1,$0:by.Replace(bS,"debug-et ","")}:null;};I.DebugTriples=function(bS){return by.StartsWith(bS,"debug-triples ")?{$:1,$0:by.Replace(bS,"debug-triples ","")}:null;};I.DebugLemmas=function(bS){return by.StartsWith(bS,"debug-lemmas ")?{$:1,$0:by.Replace(bS,"debug-lemmas ","")}:null;};I.DebugEntities=function(bS){return by.StartsWith(bS,"debug-entities ")?{$:1,$0:by.Replace(bS,"debug-entities ","")}:null;};I.Debug=function(bS){return bS==="debug"?{$:1,$0:null}:null;};I.Blank=function(bS){return bS===""?{$:1,$0:null}:null;};N.Study=function(bS){return bS.get_Traits()!=null?{$:0,$0:null}:{$:1,$0:null};};B.StrA=function(bS){if(bS!=null&&bS.$==1)try{return{$:1,$0:((bJ.DecodeArray(bJ.Id()))())(bK.parse(bS.$0))};}catch(bT){return null;}else return null;};B.PStr=function(bS){var bT;return bS!=null&&bS.$==1&&(typeof bS.$0=="string"&&(bT=bS.$0,true))?{$:1,$0:bT}:null;};B.No=function(bS){var bT,bU;return(bU=B.Intent$1("reject",bS),bU!=null&&bU.$==1&&(bU.$0[0]==null&&(bU.$0[1]==null&&(bT=bS,true))))?{$:1,$0:bT}:null;};B.Yes=function(bS){var bT,bU;return(bU=B.Intent$1("verify",bS),bU!=null&&bU.$==1&&(bU.$0[0]==null&&(bU.$0[1]==null&&(bT=bS,true))))?{$:1,$0:bT}:null;};B.EntityManyofMany=function(bS,bT){return{$:1,$0:bF.OfArray(bl.ofSeq(bz.map(function(bU){return bz.exists(function(bV){return bV.get_Role()===bU;},bT)?[bU,{$:1,$0:bz.filter(function(bV){return bV.get_Role()===bU;},bT)}]:[bU,null];},bS)))};};B.EntityManyOf1=function(bS,bT){var bU;return bT!=null&&bT.$==1&&(bz.exists(function(bV){return bV.get_Role()===bS;},bT.$0)&&(bU=bT.$0,true))?{$:1,$0:bz.filter(function(bV){return bV.get_Role()===bS;},bU)}:null;};B.Entity1OfAny=function(bS,bT){var bU;return bT!=null&&bT.$==1&&(bz.exists(function(bV){return bV.get_Role()===bS;},bT.$0)&&(bU=bT.$0,true))?{$:1,$0:bz.head(bz.sortBy(function(bV){return bV.get_Role();},bz.filter(function(bV){return bV.get_Role()===bS;},bU)))}:null;};B.Entity1Of1=function(bS,bT){var bU,bV;return bT!=null&&bT.$==1&&(bT.$0.$==1&&(bT.$0.$1.$==0&&((bV=bT.$0.$0,bV.get_Role()===bS||bV.get_Name()===bS)&&(bU=bT.$0.$0,true))))?{$:1,$0:bU}:null;};B.Intent$1=function(bS,bT){return bT.get_Intent()!=null&&bT.get_Intent().$0.get_Name()===bS?{$:1,$0:[bT.get_Traits(),bT.get_Entities()]}:null;};O.$cctor=function(){O.$cctor=a.ignore;O.entity_types=bz.ofArray(["wit$contact:name","wit$datetime:datetime","term:subject","term:object","term:verb"]);O.trait_types=bz.ofArray(["domain","dialogue_act"]);O.intentConfidenceThreshold=0.85;O.entityConfidenceThreshold=0.85;};Q=P.EmotionalTrait=bo.Class({get_Frequency:function(){return this.$2;},get_Hierarchy:function(){return this.$1;},get_Label:function(){return this.$0;}},null,Q);R=P.BehavioralTrait=bo.Class({get_Frequency:function(){return this.$2;},get_Hierarchy:function(){return this.$1;},get_Label:function(){return this.$0;}},null,R);S=P.Relation=bo.Class({toString:function(){return((((bo.Curried(function(bS,bT,bU,bV){return bS("("+bv.prettyPrint(bT)+", "+bv.prettyPrint(bU)+", "+bv.prettyPrint(bV)+")");},4))(a.id))(this.get_T1()))(this.get_Name()))(this.get_T2());},get_T2:function(){return this.$2;},get_Name:function(){return this.$1;},get_T1:function(){return this.$0;}},null,S);T=P.Triple=bo.Class({toString:function(){return((((bo.Curried(function(bS,bT,bU,bV){return bS("("+bi.p$11(bT)+", "+bi.p$13(bU)+", "+bi.p$20(bV)+")");},4))(a.id))(this.get_Subject()))(this.get_Verb()))(this.get_Object());},get_Object:function(){var bS;bS=this.$1;return bS!=null?{$:1,$0:bS.$0.get_T2()}:null;},get_Verb:function(){return this.$0.get_T2();},get_Subject:function(){return this.$0.get_T1();}},null,T);U=P.Subject=bo.Class({toString:function(){return this.$==1?a.String(this.$0):this.$0;}},null,U);V=P.Verb=bo.Class({toString:function(){return this.$0;}},null,V);W=P.Object=bo.Class({toString:function(){return this.$==1?a.String(this.$0):this.$0;}},null,W);X=P.ExpertAIEntity=bo.Class({get_Relevance:function(){return this.$3;},get_Positions:function(){return this.$2;},get_Lemma:function(){return this.$1;},get_Type:function(){return this.$0;}},null,X);Y=P.ExpertAILemma=bo.Class({get_Positions:function(){return this.$2;},get_Score:function(){return this.$1;},get_Value:function(){return this.$0;}},null,Y);P.SubjectVerbObject1OfAny=function(bS,bT,bU,bV,bW,bX){return bX==null?null:bA.tryPick(function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6;return(b0=P.TripleSubject(bS,bY.$0.$0),b0!=null&&b0.$==1)&&((b1=P.TripleRelation(bT,bY.$0.$1),b1!=null&&b1.$==1)&&((b2=P.TripleVerb(bU,bY.$0.$2),b2!=null&&b2.$==1)&&((b3=bY.$1,b3!=null&&b3.$==1)&&((b4=P.TripleVerb(bU,bY.$1.$0.$0),b4!=null&&b4.$==1)&&((b5=P.TripleRelation(bV,bY.$1.$0.$1),b5!=null&&b5.$==1)&&(b6=P.TripleObject(bW,bY.$1.$0.$2),b6!=null&&b6.$==1))))))?{$:1,$0:bY}:null;},bX.$0);};P.SubjectVerb1OfAny=function(bS,bT,bU,bV){return bV==null?null:bA.tryPick(function(bW){var bX,bY,bZ,b0;return(bY=P.TripleSubject(bS,bW.$0.$0),bY!=null&&bY.$==1)&&((bZ=P.TripleRelation(bT,bW.$0.$1),bZ!=null&&bZ.$==1)&&(b0=P.TripleVerb(bU,bW.$0.$2),b0!=null&&b0.$==1))?{$:1,$0:bW}:null;},bV.$0);};P.TripleObject=function(bS,bT){var bU;return bT.$==0&&(bT.$0.toUpperCase()===bS.toUpperCase()&&(bU=bT.$0,true))?{$:1,$0:null}:null;};P.TripleVerb=function(bS,bT){return bT.$0.toUpperCase()===bS.toUpperCase()?{$:1,$0:null}:null;};P.TripleRelation=function(bS,bT){return bT.toUpperCase()===bS.toUpperCase()?{$:1,$0:null}:null;};P.TripleSubject=function(bS,bT){var bU;return bT.$==0&&(bT.$0.toUpperCase()===bS.toUpperCase()&&(bU=bT.$0,true))?{$:1,$0:null}:null;};_0.MicReady={$:5};_0.MicAudioEnd={$:4};_0.MicAudioStart={$:3};_0.MicDisconnected={$:2};_0.MicConnecting={$:1};_0.MicNotInitialized={$:0};_1.ClientUnderstand={$:2};_1.ClientReady={$:1};_1.ClientNotInitialzed={$:0};_2=Z.Interpreter=bo.Class({get_Options:function(){return(this.get_Unwrap())[2];},get_Text:function(){return(this.get_Unwrap())[1];},get_Voice:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1[0],this.$1[1]];}},null,_2);_3=Z.CUI=bo.Class({SayVoices:function(){var bS,bT,bU;bS=this;bT=a.speechSynthesis.getVoices();!(bT==null)?(bU=d.toArray(bT),bS.Say((function(bV){return function(bW){return bV("There are currently "+a.String(bW)+" voices installed on this computer or device.");};}(a.id))(bl.length(bU))),bl.iteri(function(bV,bW){return bS.Say(((((bo.Curried(function(bX,bY,bZ,b0){return bX("Voice "+a.String(bY)+". Name: "+bv.toSafe(bZ)+", Local: "+bv.prettyPrint(b0)+".");},4))(a.id))(bV))(bW.name))(bW.localService));},bU)):void 0;},Wait:function(bS){this.Wait$1(function(){bC.Start(bS,null);});},Wait$1:function(bS){this["Echo'"]("please wait...");this.Term.pause();bS();this.Term.resume();},sayRandom:function(bS,bT){this.Say(z.getRandomPhrase(bS,bT));},SayAngry:function(bS){var bT,bU;bT=this;bC.Start((bU=null,bC.Delay(function(){return bC.Combine(a.speechSynthesis.speaking?(a.speechSynthesis.cancel(),bL.chime(),bC.Zero()):bC.Zero(),bC.Delay(function(){a.addMessage(bT.Avatar,bS,"","");bT.Avatar.processMessages(0);return bC.Zero();}));})),null);},EchoDoc:function(bS){var bT,bU,bV;bT=bl.get(bx(".terminal-output").get(),0).childNodes.length;bU=br.Element("div",[d.cls("terminal-command"),d.dindex(bT+1)],[bS]);bV=d.terminalOutput();bu.LoadLocalTemplates("");br.RunAppend(bV,bU);},Say:function(bS){var bT,bU;bT=this;bC.Start((bU=null,bC.Delay(function(){return bC.Combine(a.speechSynthesis.speaking?(bL.chime(),bC.Zero()):bC.Zero(),bC.Delay(function(){bT.Avatar.addMessage(bS);bT.Avatar.processMessages(0);return bC.Zero();}));})),null);},Debug:function(bS,bT){d.debug(bS,bT);},"EchoHtml'":function(bS){var bT,bU;bT=(bU={},bU.raw=true,bU);this.Term.disable();this.Term.echo(bS,bT);this.Term.enable();},"Echo'":function(bS){this.Term.disable();this.Term.echo(bS);this.Term.enable();}},null,_3);_3.New=function(bS,bT,bU,bV,bW,bX,bY){return new _3({Voice:bS,Mic:bT,Term:bU,Avatar:bV,Caption:bW,AudioHandlers:bX,TypingDNA:bY});};_4=c.Dialogue=bo.Class({get_Utterances:function(){return this.$4;},get_Output:function(){return this.$3;},get_DialogueQuestions:function(){return this.$2;},get_Props:function(){return this.$1;},get_Cui:function(){return this.$0;}},null,_4);_5=c.Question=bo.Class({toString:function(){return((((bo.Curried(function(bS,bT,bU,bV){return bS("Name: "+bv.toSafe(bT)+" Module: "+bv.toSafe(bU)+" Type: "+bi.p$21(bV)+" ");},4))(a.id))(this.get_Name()))(this.get_Module()))(this.get_Type());},get_Target:function(){return this.$4;},get_Params:function(){return this.$3;},get_Type:function(){return this.$2;},get_Module:function(){return this.$1;},get_Name:function(){return this.$0;}},null,_5);_6.ConceptCompletion={$:3};_6.Disjunctive={$:2};_7["Response'_"]=function(bS,bT,bU){var bV,bW,bX,bY,bZ,b0,b1,b2;return(bW=_7.PropNotSet_(bS,"user",bU),bW!=null&&bW.$==1?(bX=_7.Form(bS,bT,bW.$0),bX!=null&&bX.$==1?(bV=bX.$0,true):(bY=_7.PropNotSet_(bS,"user",bU),bY!=null&&bY.$==1&&(bZ=_7.NotForm(bS,bT,bY.$0),bZ!=null&&bZ.$==1&&(bV=bZ.$0,true)))):(b0=_7.PropNotSet_(bS,"user",bU),b0!=null&&b0.$==1&&(b1=_7.NotForm(bS,bT,b0.$0),b1!=null&&b1.$==1&&(bV=b1.$0,true))))?(b2=_7.have(bS,bT)?{$:1,$0:_7.prop(bS,bT)}:null,bV.get_Text()!==""?{$:1,$0:[bV,{$:1,$0:bV.get_Text()},b2]}:{$:1,$0:[bV,null,b2]}):null;};_7.Response_=function(bS,bT,bU){var bV,bW,bX,bY,bZ,b0,b1,b2;return(bW=_7.PropSet_(bS,"user",bU),bW!=null&&bW.$==1?(bX=_7.Form(bS,bT,bW.$0),bX!=null&&bX.$==1?(bV=bX.$0,true):(bY=_7.PropSet_(bS,"user",bU),bY!=null&&bY.$==1&&(bZ=_7.NotForm(bS,bT,bY.$0),bZ!=null&&bZ.$==1&&(bV=bZ.$0,true)))):(b0=_7.PropSet_(bS,"user",bU),b0!=null&&b0.$==1&&(b1=_7.NotForm(bS,bT,b0.$0),b1!=null&&b1.$==1&&(bV=b1.$0,true))))?(b2=_7.have(bS,bT)?{$:1,$0:_7.prop(bS,bT)}:null,bV.get_Text()!==""?{$:1,$0:[bV,{$:1,$0:bV.get_Text()},b2]}:{$:1,$0:[bV,null,b2]}):null;};_7.NotForm=function(bS,bT,bU){return bS.get_DialogueQuestions().length>0&&(bS.get_DialogueQuestions())[0].get_Name()===bT&&bU.get_Text()!==""?{$:1,$0:bU}:null;};_7.Form=function(bS,bT,bU){return bS.get_DialogueQuestions().length>0&&(bS.get_DialogueQuestions())[0].get_Name()===bT&&bU.get_Intent()!=null&&bU.get_Intent().$0.get_Name()===bT&&bM.Equals(bU.get_Intent().$0.get_Confidence(),{$:1,$0:1})&&bM.Equals(bU.get_Traits(),null)&&bM.Equals(bU.get_Entities(),null)?{$:1,$0:bU}:null;};_7["User'_"]=function(bS,bT){var bU,bV;return(bV=_7.PropNotSet_(bS,"user",bT),bV!=null&&bV.$==1&&(bS.get_DialogueQuestions().length===0&&(bU=bV.$0,true)))?{$:1,$0:bU}:null;};_7.User_=function(bS,bT){var bU,bV;return(bV=_7.PropSet_(bS,"user",bT),bV!=null&&bV.$==1&&(bS.get_DialogueQuestions().length===0&&(bU=bV.$0,true)))?{$:1,$0:bU}:null;};_7.PropNotSet_=function(bS,bT,bU){return!_7.have(bS,bT)?{$:1,$0:bU}:null;};_7.PropSet_=function(bS,bT,bU){return _7.have(bS,bT)?{$:1,$0:bU}:null;};_7.Agenda_=function(bS,bT,bU,bV){return bS.get_DialogueQuestions().length>0&&(bS.get_DialogueQuestions())[0].get_Module()===bU?{$:1,$0:null}:null;};_7.debugInterpreterEnd=function(bS,bT,bU){bT(((((bo.Curried(function(bV,bW,bX,bY){return bV(bv.toSafe(bW)+" ending utterances:"+bv.prettyPrint(bX)+", questions: "+bv.prettyPrint(bY)+".");},4))(a.id))(bU))(bS.get_Utterances()))(bS.get_DialogueQuestions()));};_7.debugInterpreterStart=function(bS,bT,bU){bT(((((bo.Curried(function(bV,bW,bX,bY){return bV(bv.toSafe(bW)+" starting utterances:"+bv.prettyPrint(bX)+", questions: "+bv.prettyPrint(bY)+".");},4))(a.id))(bU))(bS.get_Utterances()))(bS.get_DialogueQuestions()));};_7.frame=function(bS){return bz.ofSeq(bA.take(bS.length>=5?5:bS.length,bS));};_7.didNotUnderstand=function(bS,bT,bU){bT((function(bV){return function(bW){return bV(bv.toSafe(bW)+" interpreter did not understand utterance.");};}(a.id))(bU));_7.popu(bS,bT);_7.say(bS,"Sorry I didn't understand what you meant.");!_7.have(bS,"user")?_7.say(bS,"You must login to use most functions in Selma."):void 0;};_7.endt=function(bS,bT,bU,bV){_7.popu(bS,bT);_7.popq(bS,bT);_7.have(bS,bU)?_7.remove(bS,bT,bU):void 0;bT((function(bW){return function(bX){return bW("End turn "+bv.toSafe(bX)+".");};}(a.id))(bU));bV();};_7.cancel=function(bS,bT,bU){var bV;bV=(bS.get_DialogueQuestions())[0];bV.get_Name()!==bU?(((bo.Curried3(function(bW,bX,bY){return bW(bi.p$22(bX)+" at the top of the stack does not have the name "+bv.toSafe(bY)+".");}))(bp.FailWith))(bV))(bU):void 0;_7.popq(bS,bT);bT((function(bW){return function(bX){return bW("Cancel "+bi.p$22(bX)+".");};}(a.id))(bV));};_7.trigger=function(bS,bT,bU,bV,bW){_7.pushu(bS,bT,new F({$:0,$0:bK.stringify(bW),$1:{$:1,$0:new C({$:0,$0:bV,$1:{$:1,$0:1}})},$2:null,$3:null}));bU(bS);};_7.handle=function(bS,bT,bU,bV){_7.popu(bS,bT);bT((function(bW){return function(bX){return bW("Handle utterance "+bv.toSafe(bX)+".");};}(a.id))(bU));bV();};_7.dispatch=function(bS,bT,bU,bV){bT(((((bo.Curried(function(bW,bX,bY,bZ){return bW("Dispatch to module "+bv.toSafe(bX)+" utterances: "+bv.prettyPrint(bY)+" questions: "+bv.prettyPrint(bZ)+".");},4))(a.id))(bU))(bS.get_Utterances()))(bS.get_DialogueQuestions()));bV(bS);};_7.popq=function(bS,bT){var bU;bU=bS.get_DialogueQuestions().shift();bT((function(bV){return function(bW){return bV("Pop "+bi.p$22(bW)+".");};}(a.id))(bU));};_7.pushq=function(bS,bT,bU){bS.get_DialogueQuestions().unshift(bU);bT((function(bV){return function(bW){return bV("Push "+bi.p$22(bW)+".");};}(a.id))(bU));};_7.popu=function(bS,bT){var bU;bU=bS.get_Utterances().shift();bT((function(bV){return function(bW){return bV("Pop "+bi.p$19(bW)+".");};}(a.id))(bU));};_7.pushu=function(bS,bT,bU){bT((function(bV){return function(bW){return bV("Push "+bi.p$19(bW)+".");};}(a.id))(bU));bS.get_Utterances().unshift(bU);};_7.remove=function(bS,bT,bU){bT((function(bV){return function(bW){return bV("Remove property "+bv.toSafe(bW)+".");};}(a.id))(bU));bS.get_Props().Remove(bU);};_7.add=function(bS,bT,bU,bV){bS.get_Props().Add(bU,bV);bT((((bo.Curried3(function(bW,bX,bY){return bW("Add property "+bv.toSafe(bX)+":"+bv.prettyPrint(bY)+".");}))(a.id))(bU))(bV));};_7.prop=function(bS,bT){return bS.get_Props().ContainsKey(bT)?bS.get_Props().get_Item(bT):(function(bU){return function(bV){return bU("The "+bv.toSafe(bV)+" dialogue property does not exist.");};}(bp.FailWith))(bT);};_7.have=function(bS,bT){return bS.get_Props().ContainsKey(bT);};_7["sayRandom'"]=function(bS,bT){_7.sayRandom(bS,bT,"");};_7.sayRandom=function(bS,bT,bU){var bV;bV=z.getRandomPhrase(bT,bU);bS.get_Output().unshift(bV);bS.get_Cui().Say(bV);};_7.say=function(bS,bT){bS.get_Output().unshift(bT);_7["say'"](bS,bT);};_7["say'"]=function(bS,bT){bS.get_Cui().Say(bT);};_7.echo=function(bS,bT){(bS.get_Cui())["EchoHtml'"](bT);};_8.userAuthenticationDialog=function(bS,bT,bU,bV){var bW,bX,bY;function bZ(b4){_7.say(bS,b4);}function b0(b4){b4.input="text";b4.showCancelButton=true;b4.confirmButtonText="Ok";}function b1(b4){b4.confirmButtonClass="invisible";b4.showCancelButton=true;}function b2(){var b4;b4=d.createDialogueBoxCanvas();d.startCamera(self.document.body,b4);}function b3(b4){var b5,b6;b5=b4[0];b6=b4[1];d.questionBox("Biometric Authentication","",{$:1,$0:d.boxesWithTitles(["2","3"])},{$:1,$0:[640,480]},{$:1,$0:b0},{$:1,$0:b2},function(b7){var b8,b9,b_,b$;b7.isConfirmed?(b8=bS.get_Cui().TypingDNA.getTypingPattern((b9={},b9.type=1,b9.text=bY,b9.caseSensitive=false,b9)),b_=b7.value,b$=d.getCameraCanvas().toDataURL(),bT((function(ca){return function(cb){return ca("User image is "+bv.toSafe(cb)+"...");};}(a.id))(by.Substring(b$,0,10))),d.stopCamera(),bT((((bo.Curried3(function(ca,cb,cc){return ca("User entered typing pattern "+bv.toSafe(cb)+" for text "+bv.toSafe(cc));}))(a.id))(b8))(b_)),b_.toLowerCase()!==bY.toLowerCase()?(bZ("Sorry you did not enter the passphrase correctly. Please try again."),b3([b5,b6])):d.questionBox("Biometric Authentication","",null,null,{$:1,$0:b1},{$:1,$0:function(){d.getDialogueBoxContent().appendChild(d.getMic());bS.get_Cui().AudioHandlers.Add("VoiceAuthentication",function(ca){bK.stringify(((bJ.Id())())(ca));d.confirmQuestionBox();});}},function(ca){if(!ca.isConfirmed){bS.get_Cui().AudioHandlers.Remove("VoiceAuthentication");bZ("OK but you must login for me to help you.");}})):bZ("OK but you must login for me to help you.");});}bW=bU.get_Target();bX=bU.get_Name();bY=(function(b4){return function(b5){return b4("Hello my name is "+bv.toSafe(b5)+" and I am an administrator");};}(a.id))(bV);bZ((function(b4){return function(b5){return b4("Enter the phrase "+bv.toSafe(b5)+".");};}(a.id))(bY));b3([0,[]]);};_9.ask=function(bS,bT,bU){var bV,bW,bX;_7.pushq(bS,bT,bU);(bU.get_Target())(bS);bV=bU.get_Type();bV.$==0?_8.userAuthenticationDialog(bS,bT,bU,bV.$0):bV.$==1?(bW=bV.$0,bX=bV.$1,bS.get_Cui().EchoDoc(br.Concat([m.btnPrimary("","Yes",function(){return function(){bS.get_Cui().Term.enable();return bW();};}),br.TextNode("     "),m.btnSecondary("","No",function(){return function(){bS.get_Cui().Term.enable();return bX();};})])),bS.get_Cui().Term.disable()):void 0;};_.update=function(bS){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;function cq(cF){_7.echo(bS,cF);}function cr(cF){_7.say(bS,cF);}function cs(cF,cG){return _7.sayRandom(bS,cF,cG);}function ct(cF,cG){return _7.add(bS,function(cH){_.debug(cH);},cF,cG);}function cu(cF){_.debug(cF);}function cv(cF){_.debug(cF);}function cw(cF){_.update(cF);}function cx(cF){_.debug(cF);}function cy(cF){_.debug(cF);}function cz(cF){return _7["User'_"](bS,cF);}function cA(cF,cG){return _7.Response_(bS,cF,cG);}function cB(cF,cG){return _7["Response'_"](bS,cF,cG);}function cC(cF){var cG;cs(z.waitRetrievePhrases(),"user name");bC.Start((cG=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getUser:-569438111",[cF]),function(cH){var cI;return cH==null?(cr((function(cJ){return function(cK){return cJ("I did not find a user with the name "+bv.toSafe(cK)+".");};}(a.id))(cF)),bX(new _5({$:0,$0:"addUser",$1:_.name(),$2:{$:1,$0:function(){(bV("verify"))("yes");},$1:function(){(bV("reject"))("no");}},$3:null,$4:function(){ct("addUser",cF);cr((function(cJ){return function(cK){return cJ("Do you want me to add the user "+bv.toSafe(cK)+"?");};}(a.id))(cF));}})),bC.Zero()):(cI=cH.$0,(ct("user",cF),bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.updateUserLastLogin:1028847922",[cI.Name]),function(){cs(z.helloUserPhrases(),cI.Name);return cI.LastLoggedIn!=null?bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.humanize:-166772859",[cI.LastLoggedIn.$0]),function(cJ){cr((function(cK){return function(cL){return cK("You last logged in "+bv.toSafe(cL)+".");};}(a.id))(cJ));return bC.Zero();}):bC.Zero();})));});})),null);}function cD(cF){var cG;bC.Start((cG=null,bC.Delay(function(){cs(z.waitAddPhrases(),"user");return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.addUser:159332166",[cF]),function(cH){return cH.$==1?(d.error((((bo.Curried3(function(cI,cJ,cK){return cI("Error adding user "+bv.toSafe(cJ)+":"+bv.toSafe(cK)+".");}))(a.id))(cF))(cH.$0)),cr((function(cI){return function(cJ){return cI("Sorry I was not able to add the user "+bv.toSafe(cJ)+" to the system.");};}(a.id))(cF)),bC.Zero()):(ct("user",cF),ct("newuser",true),cr((function(cI){return function(cJ){return cI("Hello "+bv.prettyPrint(cJ)+", nice to meet you.");};}(a.id))(bT.get_Item("user"))),cq(function(cI){return cI("Enter the command <span style='background-color=blue;color:white'>journal</span> to see a list of writing prompts, or enter <span style='background-color=red;color:white'>help</span> at any time to see a list of available commands.");}(a.id)),bC.Zero());});})),null);}function cE(cF){return new _5({$:0,$0:"switchUser",$1:_.name(),$2:{$:1,$0:function(){(bV("verify"))("yes");},$1:function(){(bV("reject"))("no");}},$3:null,$4:function(){cr((function(cG){return function(cH){return cG("Do you want me to switch to the user "+bv.toSafe(cH));};}(a.id))(cF));}});}_7.debugInterpreterStart(bS,function(cF){_.debug(cF);},_.name());bT=bS.$1;bU=bo.Curried(_7.handle,2,[bS,cu]);bV=bo.Curried(_7.trigger,2,[bS,cv,cw]);bW=bo.Curried(_7.endt,2,[bS,cx]);bX=function(cF){_9.ask(bS,cy,cF);};bY=_7.frame(bS.$4);bY.$==1&&(b0=cz(bY.$0),b0!=null&&b0.$==1&&(b1=B.Intent$1("greet",b0.$0),b1!=null&&b1.$==1&&(b2=B.Entity1Of1("name",b1.$0[1]),b2!=null&&b2.$==1&&(bY.$1.$==0&&(bZ=b2.$0,true)))))?(bU("loginUser"))(function(){cC(bZ.get_Value());}):bY.$==1&&(b4=cz(bY.$0),b4!=null&&b4.$==1&&(b5=B.Intent$1("hello",b4.$0),b5!=null&&b5.$==1&&(b6=B.Entity1Of1("contact",b5.$0[1]),b6!=null&&b6.$==1&&(bY.$1.$==0&&(b3=b6.$0,true)))))?(bU("loginUser"))(function(){cC(b3.get_Value());}):bY.$==1&&(b8=B.No(bY.$0),b8!=null&&b8.$==1&&(b9=cB("addUser",b8.$0),b9!=null&&b9.$==1&&(b_=B.PStr(b9.$0[2]),b_!=null&&b_.$==1&&(bY.$1.$==0&&(b7=b_.$0,true)))))?(bW("addUser"))(function(){cr((function(cF){return function(cG){return cF("Ok I did not add the user "+bv.toSafe(cG)+". But you must login for me to help you.");};}(a.id))(b7));}):bY.$==1&&(ca=B.Yes(bY.$0),ca!=null&&ca.$==1&&(cb=cB("addUser",ca.$0),cb!=null&&cb.$==1&&(cc=B.PStr(cb.$0[2]),cc!=null&&cc.$==1&&(bY.$1.$==0&&(b$=cc.$0,true)))))?(bW("addUser"))(function(){cD(b$);}):bY.$==1&&(ce=_7.User_(bS,bY.$0),ce!=null&&ce.$==1&&(cf=B.Intent$1("hello",ce.$0),cf!=null&&cf.$==1&&(cf.$0[0]==null&&(cg=B.Entity1Of1("name",cf.$0[1]),cg!=null&&cg.$==1&&(bY.$1.$==0&&(cd=cg.$0,true))))))?bC.Start((ch=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getUser:-569438111",[cd.get_Value()]),function(cF){return cF==null?(cr((function(cG){return function(cH){return cG("Sorry, the user "+bv.toSafe(cH)+" does not exist.");};}(a.id))(cd.get_Value())),bC.Zero()):(bX(cE(cF.$0.Name)),bC.Zero());});})),null):bY.$==1&&(cj=B.Yes(bY.$0),cj!=null&&cj.$==1&&(ck=cA("switchUser",cj.$0),ck!=null&&ck.$==1&&(cl=B.PStr(ck.$0[2]),cl!=null&&cl.$==1&&(bY.$1.$==0&&(ci=cl.$0,true)))))?(bT.set_Item("user",ci),_7.have(bS,"newuser")?_7.remove(bS,function(cF){_.debug(cF);},"newuser"):void 0,cr((function(cF){return function(cG){return cF("Ok I switched to user "+bv.prettyPrint(cG)+".");};}(a.id))(ci))):bY.$==1&&(cn=B.No(bY.$0),cn!=null&&cn.$==1&&(co=cA("switchUser",cn.$0),co!=null&&co.$==1&&(cp=B.PStr(co.$0[2]),cp!=null&&cp.$==1&&(bY.$1.$==0&&(cm=cp.$0,true)))))?cr((function(cF){return function(cG){return cF("Ok I did not switch to user "+bv.toSafe(cG)+".");};}(a.id))(cm)):_7.didNotUnderstand(bS,function(cF){_.debug(cF);},_.name());_7.debugInterpreterEnd(bS,function(cF){_.debug(cF);},_.name());};_.debug=function(bS){d.debug(_.name(),bS);};_.name=function(){$.$cctor();return $.name;};$.$cctor=function(){$.$cctor=a.ignore;$.name="User";};ba.update=function(bS){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function b9(cc){_7.echo(bS,cc);}function b_(cc){_7.say(bS,cc);}function b$(cc,cd){return _7.add(bS,function(ce){ba.debug(ce);},cc,cd);}function ca(cc){return _7.User_(bS,cc);}function cb(cc){var cd;cd=null;return bC.Delay(function(){return bC.Combine(bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getTriples:55703623",[cc]),function(ce){var cf;return ce.$==1?(b_((function(cg){return function(ch){return cg("I could not add your journal entry. The following error occurred: "+bv.prettyPrint(ch));};}(a.id))(ce.$0)),bC.Zero()):(cf=ce.$0,cf.get_Length()>0?(ba.debug((function(cg){return function(ch){return cg("Got "+a.String(ch)+" sentences from NLU server");};}(a.id))(cf.get_Length())),b$("journal_entry_triples",[].concat(bl.ofSeq(cf)).reverse()),b9("Triples:"),bC.For(cf,function(cg){b9((function(ch){return function(ci){return ch("<span style='color:white;background-color:#00FA9A'>"+bv.printList(function(cj){return bi.p$9(cj);},ci)+"</span>");};}(a.id))(cg));return bC.Zero();})):(b_(function(cg){return cg("Sorry I could not add an entry your journal entry.");}(a.id)),bC.Zero()));}),bC.Delay(function(){return bC.Combine(bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getMainLemmas:1001971995",[cc]),function(ce){var cf;return ce.$==1?(ba.debug(ce.$0),bC.Zero()):(cf=ce.$0,bC.Combine(bC.For(cf,function(cg){ba.debug((function(ch){return function(ci){return ch(bi.p$8(ci));};}(a.id))(cg));return bC.Zero();}),bC.Delay(function(){b9("Lemmas:");return bC.For(cf,function(cg){b9((function(ch){return function(ci){return ch("<span style='color:white;background-color:#FFC0CB'>"+bi.p$8(ci)+"</span>");};}(a.id))(cg));return bC.Zero();});})));}),bC.Delay(function(){return bC.Combine(bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getEntities:322702204",[cc]),function(ce){var cf;return ce.$==1?(ba.debug(ce.$0),bC.Zero()):(cf=ce.$0,bC.Combine(bC.For(cf,function(cg){ba.debug((function(ch){return function(ci){return ch(bi.p$7(ci));};}(a.id))(cg));return bC.Zero();}),bC.Delay(function(){b9("Entities:");return bC.For(cf,function(cg){b9((function(ch){return function(ci){return ch("<span style='color:white;background-color:#7B68EE'>"+bi.p$7(ci)+"</span>");};}(a.id))(cg));return bC.Zero();});})));}),bC.Delay(function(){return bC.Combine(bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getEmotionalTraits:-584627504",[cc]),function(ce){var cf;return ce.$==1?(ba.debug(ce.$0),bC.Zero()):(cf=ce.$0,bC.Combine(bC.For(cf,function(cg){ba.debug((function(ch){return function(ci){return ch(bi.p$17(ci));};}(a.id))(cg));return bC.Zero();}),bC.Delay(function(){b9("Emotional Traits:");return bC.For(cf,function(cg){b9((function(ch){return function(ci){return ch("<span style='color:white;background-color:#FF4500'>"+bi.p$17(ci)+"</span>");};}(a.id))(cg));return bC.Zero();});})));}),bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getBehavioralTraits:241829248",[cc]),function(ce){var cf;return ce.$==1?(ba.debug(ce.$0),bC.Zero()):(cf=ce.$0,bC.Combine(bC.For(cf,function(cg){ba.debug((function(ch){return function(ci){return ch(bi.p$18(ci));};}(a.id))(cg));return bC.Zero();}),bC.Delay(function(){b9("Behavioral Traits:");return bC.For(cf,function(cg){b9((function(ch){return function(ci){return ch("<span style='color:white;background-color:#FFFF00'>"+bi.p$18(ci)+"</span>");};}(a.id))(cg));return bC.Zero();});})));});}));}));}));}));});}_7.debugInterpreterStart(bS,function(cc){ba.debug(cc);},ba.name());bz.ofArray(["What do you feel about your day today and why?","Describe the place that makes you feel the calmest. Is there anything that could be added to make it even better?","What makes you feel like the best version of yourself?","What made you feel uneasy today?","What makes you feel sad and why?","What makes you feel happy and why?","What makes you feel angry and why?","What makes you feel safe and why?","I have trouble sleeping when\u2026"]);bT=_7.frame(bS.$4);bT.$==1&&(bV=ca(bT.$0),bV!=null&&bV.$==1&&(bW=B.Intent$1("journal",bV.$0),bW!=null&&bW.$==1&&(bX=B.Entity1Of1("journal_entry",bW.$0[1]),bX!=null&&bX.$==1&&(bT.$1.$==0&&(bU=bX.$0,true)))))?bC.Start((bY=null,bC.Delay(function(){b_("Ok let me analyze what you've written and add that to your journal.");return bC.Bind(cb(bU.get_Value()),function(){return bC.Return(null);});})),null):bT.$==1&&(b0=B.Yes(bT.$0),b0!=null&&b0.$==1&&((b1=_7.Response_(bS,"painVideo",b0.$0),b1!=null&&b1.$==1)&&bT.$1.$==0))?bS.$0["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"):bT.$==1&&(b3=ca(bT.$0),b3!=null&&b3.$==1&&(b4=B.Intent$1("medjournal",b3.$0),b4!=null&&b4.$==1&&((b5=b4.$0[1],b5!=null&&b5.$==1)&&(bT.$1.$==0&&(b2=b4.$0[1].$0,true)))))?(b_("ok I added that entry to your medication journal."),b_("You should be careful not to take too many painkillers over a short period of time.")):bT.$==1&&(b7=ca(bT.$0),b7!=null&&b7.$==1&&((b8=B.Intent$1("kbquery",b7.$0),b8!=null&&b8.$==1)&&(bT.$1.$==0&&(b6=b7.$0,true))))?void 0:_7.didNotUnderstand(bS,function(cc){ba.debug(cc);},ba.name());_7.debugInterpreterEnd(bS,function(cc){ba.debug(cc);},ba.name());};ba.debug=function(bS){d.debug(ba.name(),bS);};ba.name=function(){bb.$cctor();return bb.name;};bb.$cctor=function(){bb.$cctor=a.ignore;bb.name="Journal";};bc.update=function(bS){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function b9(cd){_7.say(bS,cd);}function b_(cd,ce){return _7.sayRandom(bS,cd,ce);}function b$(cd){return _7.prop(bS,cd);}function ca(cd){return _7.User_(bS,cd);}function cb(){return b$("user");}function cc(cd,ce,cf){var cg;return bC.Start((cg=null,bC.Delay(function(){b_(z.waitAddPhrases(),"symptom entry");return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.addSymptomJournalEntry:-1024892808",[cb().Name,cd,ce,cf]),function(ch){return ch.$==1?(b9(function(ci){return ci("Sorry I wasn't able to add that symptom to your journal. Could you try again?");}(a.id)),bC.Zero()):(b9((function(ci){return function(cj){return ci("OK I added that "+bv.toSafe(cj)+" symptom to your journal.");};}(a.id))(cd)),bC.Zero());});})),null);}_7.debugInterpreterStart(bS,function(cd){bc.debug(cd);},bc.name());bT=_7.frame(bS.$4);bT.$==1&&(bV=ca(bT.$0),bV!=null&&bV.$==1&&(bW=B.Intent$1("symptom",bV.$0),bW!=null&&bW.$==1&&(bX=B.Entity1OfAny("symptom_name",bW.$0[1]),bX!=null&&bX.$==1&&(bT.$1.$==0&&(bU=bX.$0,true)))))?bC.Start((bY=null,bC.Delay(function(){b9("Ok I'll add that entry to your symptom journal");cc(bU.get_Value(),null,null);return bC.Zero();})),null):bT.$==1&&(b0=B.Yes(bT.$0),b0!=null&&b0.$==1&&((b1=_7.Response_(bS,"painVideo",b0.$0),b1!=null&&b1.$==1)&&bT.$1.$==0))?bS.$0["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"):bT.$==1&&(b3=ca(bT.$0),b3!=null&&b3.$==1&&(b4=B.Intent$1("medjournal",b3.$0),b4!=null&&b4.$==1&&((b5=b4.$0[1],b5!=null&&b5.$==1)&&(bT.$1.$==0&&(b2=b4.$0[1].$0,true)))))?(b9("ok I added that entry to your medication journal."),b9("You should be careful not to take too many painkillers over a short period of time.")):bT.$==1&&(b7=ca(bT.$0),b7!=null&&b7.$==1&&((b8=B.Intent$1("kbquery",b7.$0),b8!=null&&b8.$==1)&&(bT.$1.$==0&&(b6=b7.$0,true))))?void 0:_7.didNotUnderstand(bS,function(cd){bc.debug(cd);},bc.name());_7.debugInterpreterEnd(bS,function(cd){bc.debug(cd);},bc.name());};bc.debug=function(bS){d.debug(bc.name(),bS);};bc.name=function(){bd.$cctor();return bd.name;};bd.$cctor=function(){bd.$cctor=a.ignore;bd.name="Symptoms";};be.update=function(bS){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg;function ch(cn){_7.echo(bS,cn);}function ci(cn){_7.say(bS,cn);}function cj(cn){_7["sayRandom'"](bS,cn);}function ck(cn){be.debug(cn);}function cl(cn){be.debug(cn);}function cm(cn){return _7["User'_"](bS,cn);}bT=bS.$4;be.debug(((((bo.Curried(function(cn,co,cp,cq){return cn("Module "+bv.toSafe(co)+" starting utterances:"+bv.prettyPrint(cp)+", questions: "+bv.prettyPrint(cq)+".");},4))(a.id))(be.name()))(bT))(bS.$2));bU=bo.Curried(_7.dispatch,2,[bS,ck]);bV=bo.Curried(_7.handle,2,[bS,cl]);bW=_7.frame(bT);bX=_7.Agenda_(bS,function(cn){be.debug(cn);},_.name(),bW);bX!=null&&bX.$==1?(be.debug((function(cn){return function(co){return cn("Agenda is "+bi.p$22(co)+".");};}(a.id))((bS.get_DialogueQuestions())[0])),_.update(bS)):bW.$==1&&((bZ=B.Intent$1("help",bW.$0),bZ!=null&&bZ.$==1)&&bW.$1.$==0)?(ci("The following commands are available."),ch("The following commands are available:"),ch("<span style='background-color:blue;color:white'>journal</span> - Show a list of writing prompts"),ch("<span style='background-color:blue;color:white'>debug-journal</span> <text-entry> - Show a set of debug info for a journal entry.")):bW.$==1&&(b1=(b2=_7.PropNotSet_(bS,"started",bW.$0),b2!=null&&b2.$==1?{$:1,$0:b2.$0}:null),b1!=null&&b1.$==1&&(b3=cm(b1.$0),b3!=null&&b3.$==1&&(b4=B.Intent$1("greet",b3.$0),b4!=null&&b4.$==1&&(b4.$0[1]==null&&bW.$1.$==0))))?(_7.add(bS,function(cn){be.debug(cn);},"started",true),(bV("greet"))(function(){cj(z.helloPhrases());})):bW.$==1&&(b6=cm(bW.$0),b6!=null&&b6.$==1&&(b7=B.Intent$1("greet",b6.$0),b7!=null&&b7.$==1&&(b7.$0[1]==null&&bW.$1.$==0)))?(bV("greet"))(function(){ci("Hello, tell me your name to get started.");}):bW.$==1&&(b9=cm(bW.$0),b9!=null&&b9.$==1&&(b_=B.Intent$1("greet",b9.$0),b_!=null&&b_.$==1&&((b$=B.Entity1Of1("name",b_.$0[1]),b$!=null&&b$.$==1)&&bW.$1.$==0)))?(bU(_.name()))(function(cn){_.update(cn);}):bW.$==1&&(cb=cm(bW.$0),cb!=null&&cb.$==1&&(cc=B.Intent$1("hello",cb.$0),cc!=null&&cc.$==1&&((cd=B.Entity1Of1("contact",cc.$0[1]),cd!=null&&cd.$==1)&&bW.$1.$==0)))?(bU(_.name()))(function(cn){_.update(cn);}):bW.$==1&&(cf=_7.User_(bS,bW.$0),cf!=null&&cf.$==1&&((cg=B.Intent$1("journal",cf.$0),cg!=null&&cg.$==1)&&bW.$1.$==0))?(bU(ba.name()))(function(cn){ba.update(cn);}):_7.didNotUnderstand(bS,function(cn){be.debug(cn);},be.name());_7.debugInterpreterEnd(bS,function(cn){be.debug(cn);},be.name());};be.debug=function(bS){d.debug(be.name(),bS);};be.name=function(){bf.$cctor();return bf.name;};bf.$cctor=function(){bf.$cctor=a.ignore;bf.name="Main";};bg.run=function(){var bS,bT;bS=bo.ThisFunc(function(bU,bV){return((bg.Main().get_Text())(bU))(bV);});bT=bg.Main().get_Options();a.$("#term").terminal(bS,bT);return br.get_Empty();};bg.Main=function(){bh.$cctor();return bh.Main;};bg.initMic=function(bS){var bT,bU;bg.set_CUI((bT={$:1,$0:new bP.Microphone(bQ.getElementById("microphone"))},_3.New(bg.CUI().Voice,bT,bg.CUI().Term,bg.CUI().Avatar,bg.CUI().Caption,bg.CUI().AudioHandlers,bg.CUI().TypingDNA)));bU=bg.CUI().Mic.$0;bU.onconnecting=function(){bg.set_MicState(_0.MicConnecting);return bg.debug("Mic connecting...");};bU.ondisconnected=function(){bg.set_MicState(_0.MicDisconnected);return bg.debug("Mic disconnected.");};bU.onaudiostart=function(){bg.set_MicState(_0.MicAudioStart);return bg.debug("Mic audio start...");};bU.onaudioend=function(){var bV,bW,bX,bY;bg.debug("Mic audio end.");bW=bg.CUI().AudioHandlers;bV=bW.GetEnumerator$1();try{while(bV.MoveNext()){bX=bV.Current();bg.debug((function(bZ){return function(b0){return bZ("Executing audio handler "+bv.toSafe(b0)+".");};}(a.id))(bX.K));bg.set_MicState({$:7,$0:bX.K});bY=bX.V;bg.CUI().AudioHandlers.Remove(bX.K);bY(d.lastMicData());}return;}finally{bV.Dispose();}};bU.onerror=function(bV){bg.set_MicState({$:6,$0:bV});return bg.debug((function(bW){return function(bX){return bW("Mic error : "+bv.toSafe(bX)+".");};}(a.id))(bV));};bU.onready=function(){bg.set_MicState(_0.MicReady);return bg.debug("Mic ready.");};bU.onresult=function(bV,bW){return bg.ClientState().$==2?bg.echo("I'm still trying to understand what you said before."):bg.ClientState().$==0?d.error("Client is not intialized."):bg.MicState().$==7?null:!(bV==null||bW==null)?(bg.set_MicState({$:8,$0:bV,$1:bW}),bg.debug((((bo.Curried3(function(bX,bY,bZ){return bX("Mic result: "+bv.prettyPrint(bY)+" "+bv.prettyPrint(bZ)+".");}))(a.id))(bV))(bW)),bS(bV,bW)):bg.debug("Mic: No result returned.");};bU.connect("4Y2BLQY5TWLIN7HFIV264S53MY4PCUAT");};bg.sayRandom=function(bS,bT){bg.say(z.getRandomPhrase(bT,bS));};bg.say=function(bS){bg.Output().unshift(bS);bg["say'"](bS);};bg["say'"]=function(bS){bg.CUI().Say(bS);};bg.initSpeech=function(){var bS;bS=d.toArray(bg.synth().getVoices());bl.length(bS)>0?(bl.iter(function(bT){if(bM.Equals(bg.CUI().Voice,null)&&(bT.name.indexOf("Microsoft Zira")!=-1||bT.name.toLowerCase().indexOf("female")!=-1)){bg.set_CUI(_3.New({$:1,$0:bT},bg.CUI().Mic,bg.CUI().Term,bg.CUI().Avatar,bg.CUI().Caption,bg.CUI().AudioHandlers,bg.CUI().TypingDNA));bg.debug((function(bU){return function(bV){return bU("Using browser speech synthesis voice "+bv.toSafe(bV)+".");};}(a.id))(bg.CUI().Voice.$0.name));}},bS),!bM.Equals(bg.CUI().Voice,null)?(bg.CUI().Avatar.nativeVoice=true,bg.CUI().Avatar.nativeVoiceName=bg.CUI().Voice.$0.name,bg.debug((function(bT){return function(bU){return bT("Using browser speech synthesis voice "+bv.toSafe(bU)+".");};}(a.id))(bg.CUI().Voice.$0.name))):void 0):void 0;bM.Equals(bg.CUI().Voice,null)?bg.debug("No female browser speech synthesis voice is available. Using CMU SLT Female voice via TTS."):void 0;};bg.synth=function(){bh.$cctor();return bh.synth;};bg.Utterances=function(){bh.$cctor();return bh.Utterances;};bg.Questions=function(){bh.$cctor();return bh.Questions;};bg.Output=function(){bh.$cctor();return bh.Output;};bg.Props=function(){bh.$cctor();return bh.Props;};bg.wait=function(bS){d["Terminal.Echo'"](bg.CUI().Term,"please wait");bg.CUI().Term.pause();bS();bg.CUI().Term.resume();};bg.debug=function(bS){d.debug("CLIENT",bS);};bg.echo=function(bS){d["Terminal.EchoHtml'"](bg.CUI().Term,(function(bT){return function(bU){return bT(bv.prettyPrint(bU));};}(a.id))(bS));};bg.ClientState=function(){bh.$cctor();return bh.ClientState;};bg.set_ClientState=function(bS){bh.$cctor();bh.ClientState=bS;};bg.MicState=function(){bh.$cctor();return bh.MicState;};bg.set_MicState=function(bS){bh.$cctor();bh.MicState=bS;};bg.CUI=function(){bh.$cctor();return bh.CUI;};bg.set_CUI=function(bS){bh.$cctor();bh.CUI=bS;};bh.$cctor=function(){var bS,bT,bU;bh.$cctor=a.ignore;function bV(bX,bY){var bZ,b0,b1,b2,b3,b4,b5,b6,b7;bZ=new _4({$:0,$0:bg.CUI(),$1:bg.Props(),$2:bg.Questions(),$3:bg.Output(),$4:bg.Utterances()});bg.debug((((bo.Curried3(function(b8,b9,b_){return b8("Voice: "+bv.prettyPrint(b9)+" "+bv.prettyPrint(b_));}))(a.id))(bX))(bY));b0=(b1=G["Intent'"](bX,bY),b1!=null&&b1.$==1?{$:1,$0:b1.$0}:null);b2=(b3=G["Trait'"](bY),b3!=null&&b3.$==1?{$:1,$0:bz.ofArray([b3.$0])}:null);b4=(b5=G["Entity'$1"](bY),b5!=null&&b5.$==1?{$:1,$0:bz.ofArray([b5.$0])}:null);b0==null&&(b2==null&&b4==null)?void 0:(bg.debug(((((bo.Curried(function(b8,b9,b_,b$){return b8("Voice: "+bi.p(b9)+" "+bi.p$3(b_)+" "+bi.p$5(b$));},4))(a.id))(b0))(b2))(b4)),be.update((b7=new F({$:0,$0:"",$1:b0,$2:b2,$3:b4}),(bg.Utterances().unshift(b7),bZ))));}function bW(bX,bY){var bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,cp,cq,cr,cs;function co(ct){bg.Utterances().unshift(ct);return cp;}bg.set_CUI(_3.New(bg.CUI().Voice,bg.CUI().Mic,bX,bg.CUI().Avatar,bg.CUI().Caption,bg.CUI().AudioHandlers,bg.CUI().TypingDNA));if(bM.Equals(bg.CUI().Mic,null))bg.initMic(bV);if(bM.Equals(bg.CUI().Voice,null))bg.initSpeech();if(bg.ClientState().$===0)bg.set_ClientState(_1.ClientReady);cp=new _4({$:0,$0:bg.CUI(),$1:bg.Props(),$2:bg.Questions(),$3:bg.Output(),$4:bg.Utterances()});cq=I.Blank(bY);if(cq!=null&&cq.$==1)return bg["say'"]("Tell me what you want me to do or ask me a question.");else{cr=I.Debug(bY);if(cr!=null&&cr.$==1){bg.debug((function(ct){return function(cu){return ct("Utterances: "+bv.prettyPrint(cu));};}(a.id))(bg.Utterances()));bg.debug((function(ct){return function(cu){return ct("Questions: "+bv.prettyPrint(cu));};}(a.id))(bg.Questions()));bZ=bg.Props().GetEnumerator$1();try{while(bZ.MoveNext()){cs=bZ.Current();bg.debug((((bo.Curried3(function(ct,cu,cv){return ct(bv.toSafe(cu)+": "+bv.prettyPrint(cv));}))(a.id))(cs.K))(cs.V));}return;}finally{bZ.Dispose();}}else{b0=I.DebugEntities(bY);return b0!=null&&b0.$==1?(b1=b0.$0,bg.CUI().Wait((b2=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getEntities:322702204",[b1]),function(ct){var cu;return ct.$==1?(bg.debug(ct.$0),bC.Zero()):(cu=ct.$0,bC.Combine(bC.For(cu,function(cv){bg.debug((function(cw){return function(cx){return cw(bi.p$7(cx));};}(a.id))(cv));return bC.Zero();}),bC.Delay(function(){bg.echo("Entities:");return bC.For(cu,function(cv){bg.echo((function(cw){return function(cx){return cw("<span style='color:white;background-color:#7B68EE'>"+bi.p$7(cx)+"</span>");};}(a.id))(cv));return bC.Zero();});})));});})))):(b3=I.DebugLemmas(bY),b3!=null&&b3.$==1?(b4=b3.$0,bg.CUI().Wait((b5=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getMainLemmas:1001971995",[b4]),function(ct){var cu;return ct.$==1?(bg.debug(ct.$0),bC.Zero()):(cu=ct.$0,bC.Combine(bC.For(cu,function(cv){bg.debug((function(cw){return function(cx){return cw(bi.p$8(cx));};}(a.id))(cv));return bC.Zero();}),bC.Delay(function(){bg.echo("Lemmas:");return bC.For(cu,function(cv){bg.echo((function(cw){return function(cx){return cw("<span style='color:white;background-color:#FFC0CB'>"+bi.p$8(cx)+"</span>");};}(a.id))(cv));return bC.Zero();});})));});})))):(b6=I.DebugTriples(bY),b6!=null&&b6.$==1?(b7=b6.$0,bg.CUI().Wait((b8=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getTriples:55703623",[b7]),function(ct){var cu;return ct.$==1?(bg.debug(ct.$0),bC.Zero()):(cu=ct.$0,bC.Combine(bC.For(cu,function(cv){return bC.For(cv,function(cw){bg.debug((function(cx){return function(cy){return cx(bi.p$9(cy));};}(a.id))(cw));return bC.Zero();});}),bC.Delay(function(){bg.echo("Triples:");return bC.For(cu,function(cv){bg.echo((function(cw){return function(cx){return cw("<span style='color:white;background-color:#00FA9A'>"+bv.printList(function(cy){return bi.p$9(cy);},cx)+"</span>");};}(a.id))(cv));return bC.Zero();});})));});})))):(b9=I.DebugEmotionalTraits(bY),b9!=null&&b9.$==1?(b_=b9.$0,bg.CUI().Wait((b$=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getEmotionalTraits:-584627504",[b_]),function(ct){var cu;return ct.$==1?(bg.debug(ct.$0),bC.Zero()):(cu=ct.$0,bC.Combine(bC.For(cu,function(cv){bg.debug((function(cw){return function(cx){return cw(bi.p$17(cx));};}(a.id))(cv));return bC.Zero();}),bC.Delay(function(){bg.echo("Emotional Traits:");return bC.For(cu,function(cv){bg.echo((function(cw){return function(cx){return cw("<span style='color:white;background-color:#FF4500'>"+bi.p$17(cx)+"</span>");};}(a.id))(cv));return bC.Zero();});})));});})))):(ca=I.DebugBehavioralTraits(bY),ca!=null&&ca.$==1?(cb=ca.$0,bg.CUI().Wait((cc=null,bC.Delay(function(){return bC.Bind((new bO.New()).Async("SMApp.Web:SMApp.Web.Server.getBehavioralTraits:241829248",[cb]),function(ct){var cu;return ct.$==1?(bg.debug(ct.$0),bC.Zero()):(cu=ct.$0,bC.Combine(bC.For(cu,function(cv){bg.debug((function(cw){return function(cx){return cw(bi.p$18(cx));};}(a.id))(cv));return bC.Zero();}),bC.Delay(function(){bg.echo("Behavioral Traits:");return bC.For(cu,function(cv){bg.echo((function(cw){return function(cx){return cw("<span style='color:white;background-color:#FF4500'>"+bi.p$18(cx)+"</span>");};}(a.id))(cv));return bC.Zero();});})));});})))):(cd=I.Voices(bY),cd!=null&&cd.$==1?(ce=d.toArray(d.speechSynthesis().getVoices()),bg["say'"]((function(ct){return function(cu){return ct("There are currently "+a.String(cu)+" voices installed on this computer or device.");};}(a.id))(bl.length(ce))),bl.iteri(function(ct,cu){return bg["say'"](((((bo.Curried(function(cv,cw,cx,cy){return cv("Voice "+a.String(cw)+". Name: "+bv.toSafe(cx)+", Local: "+bv.prettyPrint(cy)+".");},4))(a.id))(ct))(cu.name))(cu.localService));},ce)):bg.ClientState().$==1?(cg=I.QuickHello(bY),(cg!=null&&cg.$==1?(cf=cg.$0,true):(ch=I.QuickHelp(bY),ch!=null&&ch.$==1?(cf=ch.$0,true):(ci=I.QuickYes(bY),ci!=null&&ci.$==1?(cf=ci.$0,true):(cj=I.QuickNo(bY),cj!=null&&cj.$==1?(cf=cj.$0,true):(ck=I.QuickNumber(bY),ck!=null&&ck.$==1&&(cf=ck.$0,true))))))?(bg.debug((function(ct){return function(cu){return ct("Quick Text: "+bi.p$19(cu)+".");};}(a.id))(cf)),be.update(co(cf)),bg.set_ClientState(_1.ClientReady)):(cl=I.JournalEntry(bY),cl!=null&&cl.$==1?(cm=cl.$0,bg.debug((function(ct){return function(cu){return ct("Journal entry: "+bi.p$19(cu)+".");};}(a.id))(cm)),be.update(co(cm)),bg.set_ClientState(_1.ClientReady)):bg.CUI().Wait((cn=null,bC.Delay(function(){bg.set_ClientState(_1.ClientUnderstand);I.getUtterance(bY,function(ct){var cu,cv;cu=I.HasUtterance(ct);cu!=null&&cu.$==1?(cv=cu.$0,bg.debug(((((bo.Curried(function(cw,cx,cy,cz){return cw("Text: Intent: "+bi.p(cx)+", Traits: "+bi.p$3(cy)+", Entities: "+bi.p$5(cz)+".");},4))(a.id))(cv.get_Intent()))(cv.get_Traits()))(cv.get_Entities())),be.update(co(cv))):(bg.debug("Text: Did not receive a meaning from the server."),bg["say'"]("Sorry I did not understand what you said."));});bg.set_ClientState(_1.ClientReady);return bC.Zero();}))))):bg.ClientState().$==0?d.error("Client is not initialized."):bg["say'"]("I'm still trying to understand what you said before."))))));}}}bh.CUI=_3.New(null,null,null,(bL.applicationId="4277115329081938617",bS=new a.SDKConnection(),bT=new a.WebAvatar(),bT.version=8.5,bT.connection=bS,bT.avatar="20926186",bT.voice="cmu-slt",bT.voiceMod="default",bT.width=bx(self).width()<=479?87:175,bT.createBox(),bT.addMessage(""),bT.processMessages(0),bT),false,new bR.New$5(),new a.TypingDNA());bh.MicState=_0.MicNotInitialized;bh.ClientState=_1.ClientNotInitialzed;bh.Props=new bR.New$5();bh.Output=[];bh.Questions=[];bh.Utterances=[];bh.synth=a.speechSynthesis;bh.Main=new _2({$:0,$0:function(bX){return bV(bX[0],bX[1]);},$1:[function(bX){return function(bY){return bW(bX,bY);};},(bU={},bU.name="Main",bU.greetings="Welcome to Selma. Enter 'hello' or 'hello my name is...(you) to initialize speech.",bU.prompt=">",bU)]});};bi.p$20=function(bS){return bS==null?"null":"Some "+bi.p$16(bS.$0);};bi.p$21=function(bS){return bS.$==3?"ConceptCompletion":bS.$==2?"Disjunctive":bS.$==1?"Verification (<fun>, <fun>)":"UserAuthentication "+bv.prettyPrint(bS.$0);};bj.p=function(bS){return"{"+("text = "+bv.prettyPrint(bS.text))+"; "+("intents = "+bv.printArray(function(bT){return bj.p$1(bT);},bS.intents))+"; "+("entities = "+bv.prettyPrint(bS.entities))+"; "+("traits = "+bv.prettyPrint(bS.traits))+"}";};bj.p$1=function(bS){return"{"+("id = "+bv.prettyPrint(bS.id))+"; "+("name = "+bv.prettyPrint(bS.name))+"; "+("confidence = "+bv.prettyPrint(bS.confidence))+"}";};bi.p$22=function(bS){return"Question ("+bv.prettyPrint(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bi.p$21(bS.$2)+", "+bi.p$23(bS.$3)+", "+"<fun>"+")";};bi.p$23=function(bS){return bS==null?"null":"Some "+bv.printArray(bv.prettyPrint,bS.$0);};bi.p$2=function(bS){return bS==null?"null":"Some "+bv.prettyPrint(bS.$0);};bi.p$1=function(bS){return"Intent ("+bv.prettyPrint(bS.$0)+", "+bi.p$2(bS.$1)+")";};bi.p=function(bS){return bS==null?"null":"Some "+bi.p$1(bS.$0);};bi.p$4=function(bS){return"Trait ("+bv.prettyPrint(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bi.p$2(bS.$2)+")";};bi.p$3=function(bS){return bS==null?"null":"Some "+bv.printList(function(bT){return bi.p$4(bT);},bS.$0);};bi.p$6=function(bS){return"Entity ("+bv.prettyPrint(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bv.prettyPrint(bS.$2)+", "+bi.p$2(bS.$3)+")";};bi.p$5=function(bS){return bS==null?"null":"Some "+bv.printList(function(bT){return bi.p$6(bT);},bS.$0);};bi.p$7=function(bS){return"ExpertAIEntity ("+bv.prettyPrint(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bv.printList(function(bT){return"("+bv.prettyPrint(bT[0])+", "+bv.prettyPrint(bT[1])+")";},bS.$2)+", "+bv.prettyPrint(bS.$3)+")";};bi.p$8=function(bS){return"ExpertAILemma ("+bv.prettyPrint(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bv.printList(function(bT){return"("+bv.prettyPrint(bT[0])+", "+bv.prettyPrint(bT[1])+")";},bS.$2)+")";};bi.p$12=function(bS){return"Relation ("+bv.prettyPrint(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bv.prettyPrint(bS.$2)+")";};bi.p$11=function(bS){return bS.$==1?"Relation "+bi.p$12(bS.$0):"Subject "+bv.prettyPrint(bS.$0);};bi.p$13=function(bS){return"Verb "+bv.prettyPrint(bS.$0);};bi.p$10=function(bS){return"Relation ("+bi.p$11(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bi.p$13(bS.$2)+")";};bi.p$16=function(bS){return bS.$==1?"Relation "+bi.p$12(bS.$0):"Object "+bv.prettyPrint(bS.$0);};bi.p$15=function(bS){return"Relation ("+bi.p$13(bS.$0)+", "+bv.prettyPrint(bS.$1)+", "+bi.p$16(bS.$2)+")";};bi.p$14=function(bS){return bS==null?"null":"Some "+bi.p$15(bS.$0);};bi.p$9=function(bS){return"Triple ("+bi.p$10(bS.$0)+", "+bi.p$14(bS.$1)+")";};bi.p$17=function(bS){return"EmotionalTrait ("+bv.prettyPrint(bS.$0)+", "+bv.printList(bv.prettyPrint,bS.$1)+", "+bv.prettyPrint(bS.$2)+")";};bi.p$18=function(bS){return"BehavioralTrait ("+bv.prettyPrint(bS.$0)+", "+bv.printList(bv.prettyPrint,bS.$1)+", "+bv.prettyPrint(bS.$2)+")";};bi.p$19=function(bS){return"Utterance ("+bv.prettyPrint(bS.$0)+", "+bi.p(bS.$1)+", "+bi.p$3(bS.$2)+", "+bi.p$5(bS.$3)+")";};}());
