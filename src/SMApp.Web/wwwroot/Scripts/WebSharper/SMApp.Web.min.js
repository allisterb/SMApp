(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a=self;b=a.SMApp=a.SMApp||{};c=b.Web=b.Web||{};d=c.User=c.User||{};e=c.Meaning=c.Meaning||{};f=c.Intent=c.Intent||{};g=c.Entity=c.Entity||{};h=c.Resource=c.Resource||{};i=c.Client=c.Client||{};j=a.StartupCode$SMApp_Web$Client=a.StartupCode$SMApp_Web$Client||{};k=a.IntelliFactory;l=k&&k.Runtime;m=a.WebSharper;n=m&&m.List;o=m&&m.UI;p=o&&o.Doc;q=m&&m.Concurrency;r=m&&m.Remoting;s=r&&r.AjaxRemotingProvider;d.New=function(t){return{UserName:t};};e=c.Meaning=l.Class({get_TopIntent:function(){return n.head(n.sortBy(function(t){return t.get_Confidence();},this.get_Intents()));},get_Entities:function(){return(this.get_Unwrap())[1];},get_Intents:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,e);f=c.Intent=l.Class({get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,f);g=c.Entity=l.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,g);h.New=function(t,u,v){return{Name:t,Description:u,Url:v};};i.Term=function(){var t,u;t=i.baseInt();u=i.baseOpt();a.$("#main").terminal(t,u);return p.get_Empty();};i.baseInt=function(){j.$cctor();return j.baseInt;};i.baseOpt=function(){j.$cctor();return j.baseOpt;};i.i2=function(t,u){var v,w;v=i.Welcome(u);v.$==1?t.echo("Commands: help, clear, template"):v.$==0?q.Start((w=null,q.Delay(function(){t.disable();return q.Combine(q.Bind((new s.New()).Async("SMApp.Web:SMApp.Web.Server.GetMeaning:477919497",["Hello I'm John"]),function(x){return x!=null&&x.$==1?(t.echo(x.$0.get_TopIntent().get_Name()),q.Zero()):(t.echo("foo"),q.Zero());}),q.Delay(function(){t.enable();return q.Zero();}));})),null):v.$==2?t.echo("switch"):t.echo("Unknown");};i.Welcome=function(t){return t==="help"?{$:1,$0:null}:t==="welcome"?{$:0,$0:null}:t==="switch"?{$:2,$0:null}:{$:3,$0:null};};j.$cctor=function(){var t;j.$cctor=a.ignore;j.baseOpt=(t={},t.name="_Base",t.greetings="Welcome to Selma",t.onInit=function(u){var v;return u.push(function(w){return i.i2(this,w);},(v={},v.name="Main",v.prompt=">",v));},t);j.baseInt=l.ThisFunc(function(){return null;});};}());
