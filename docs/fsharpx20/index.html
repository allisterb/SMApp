<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=1080">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Selma</title>
    <meta name="description" content="Presentation">
    <meta name="author" content="Allister Beharry">
    <!-- highlight styles -->
    <link rel="stylesheet" href="extras/highlight/styles/github.css">
    <!-- textillate styles-->
    <link rel="stylesheet" href="https://textillate.js.org/assets/animate.css">
    <!-- Common styles for impress.js -->
    <link rel="stylesheet" href="css/impress-common.css">
    <!-- My styles -->
    <link rel="stylesheet" href="css/custom.css">
  </head>
  <body class="impress-not-supported">
    <div id="impress" data-width="1920" data-height="1080">
      <!--
                Here is where interesting thing start to happen.
                Each step of the presentation should be an element inside the `#impress` with a class name
        of `step`. These step elements are positioned, rotated and scaled by impress.js, and        the 'camera' shows them on each step of the presentation.
                Positioning information is passed through data attributes.
                In the example below we only specify x and y position of the step element with `data-x="-1000"`
        and `data-y="-1500"` attributes. This means that **the center** of the element (yes, the center)        will be positioned in point x = -1000px and y = -1500px of the presentation 'canvas'.
                It will not be rotated or scaled.
                --------
        Plugins: For first slide, set the autoplay time to a custom 10 seconds.        
    -->
      <div id="title" class="step slide" data-x="-30000" data-y="0">
        <div class="logo"> <img src="images/fsharp.png" class="logo_img">
        </div>
        <div class="presentation_title"> Declarative, Concise Implementation of
          a Rule-Based Dialogue Manager in F# </div>
        <div class="title_author"><span class="date">21 October 2020</span><span class="slash">/</span><span
            class="author">Allister Beharry</span></div>
      </div>
      <section id="slide-1" class="level1 step" data-x="0">
        <h1><a href="#slide-1">About me</a></h1>
        <ul>
          <li>Open-source developer</li>
          <li>Mostly C# and F# but dabble in other languages</li>
          <li>Computer security, scientific programming, natural language understanding, CUIs</li>
          <li>https://github.com/allisterb</li>
          <li>@allisterbeharry</li>
          <li>From Trinidad W.I.</li>
        </ul>
        <div style="text-align: center;"> <img src="images/caribmap.png" style="width: 800px;text-align: center;">
        </div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-2" class="level1 step" data-x="2000">
        <h1><a href="#slide-2">Multimodal Conversational User Interfaces</a></h1>
        <iframe width="1860" height="1015" src="https://www.youtube.com/embed/7GYwgyCv6EM?controls=0&amp;start=57" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-3" class="level1 step" data-x="4000">
        <h1><a href="#slide-3">Overview</a></h1>
        <ul>
          <li>
            Self-Management and Selma 
          </li>
          <li>
            Opinionated view about the state of web development in .NET 
          </li>
          <li>
            Why WebSharper is the <span class="tlt">BEST</span> web development framework on the planet 
          </li>
          <li>
            Implementing a CUI Dialogue Manager in F# 
          </li>
          <li>
            Comparison with Rasa and Alexa Conversations
          </li>
        </ul>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-4" class="level1 step" data-x="6000">
        <h1><a href="#slide-4">Self-Management</a></h1>
        <div style="text-align: center;"> <img src="images/robot.png" style="width: 1000px;text-align: center;">
        </div>
      </section>
      <section id="slide-5" class="level1 step" data-x="8000">
        <h1><a href="#slide-5">Self-Management</a></h1>
        <blockquote> Self-management can be defined as the methods, skills, and
          strategies by which
          individuals effectively direct their own activities toward the
          achievement of
          specific objectives. It usually includes goal-setting, planning,
          scheduling, task
          tracking, self-evaluation, self-intervention, and self-development. In
          health
          care, self-management typically refers to the training, skill
          acquisition, and
          interventions through which patients who suffer from a disease or a
          chronic
          condition may take care of themselves and manage their illnesses. </blockquote>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-6" class="level1 step" data-x="10000">
        <h1><a href="#slide-6">Self-Management</a></h1>
        <blockquote>Many prevalent chronic conditions, such as heart disease,
          diabetes, and arthritis, though unique in their own attributes and
          demands, share common challenges associated with their management.
          These include dealing with <b>symptoms</b> and disability; <b>monitoring
            physical indicators;</b> managing complex <b>medication regimens</b>;
          maintaining proper levels of <b>nutrition</b>, <b>diet</b>, and <b>exercise</b>;
          adjusting to the <b>psychological and social demands</b>, including
          difficult lifestyle adjustments; and engaging in effective
          interactions with health care providers.4,5</blockquote>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      
      <section id="slide-7" class="level1 step" data-x="12000">
        <h1><a href="#slide-7">Self-Management</a></h1>
        <ul>
          <li> Many smartphone apps for physical health self-management...
            <ul>
              <li>Flaredown™</li>
              <li>Manage My Pain™</li>
              <li>SuperBetter™</li>
              <li>Symple&trade;</li>
              <li>CareClinic&trade;</li>
            </ul>
          </li>
        </ul>
        <div class="slide-img"><img src="images/mmp.png" class="slide-img" style="width:1000px;height:500px;"></div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-8" class="level1 step" data-x="14000">
        <h1><a href="#slide-8">Self-Management</a></h1>
        Mental health self-management apps:
        <ul>
          <li>Stop.Breath.Think&trade;</li>
          <li>Happify&trade;</li>
          <li>Gratitude&trade;</li>
          <li>Pathways&trade;</li>
          <li>Daylio&trade;</li>
        </ul>
        Mood journals, meditation, self-affirmation 
        <div class="slide-img"><img src="images/daylio.png" class="slide-img"></div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-9" class="level1 step" data-x="16000">
        <h1><a href="#slide-9">Selma</a></h1>
         <h3>Research shows using an avatar or virtual agent increases program compliance</h3>
        <div class="slide-img"><img src="images/selma.png" class="slide-img"></div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-55" class="level1 step" data-x="18000">
        <h1><a href="#slide-55">WebSharper</a></h1>
        <h2>Managing the complexity of web development</h2>
        <div class="slide-img"><img src="images/braincog.png" style="width:700px"/></div>
       
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-56" class="level1 step" data-x="20000">
        <h1><a href="#slide-56">WebSharper</a></h1>
        <h2>.NET Web Development is hard for a poor robot...</h2>
        <div style="float: left;">
          <h3>Multiple languages:</h3>
          <ul>
            <li>
              HTML
            </li>
            <li>
              CSS
            </li>
            <li>
              JavaScript (and/or TypeScript) (and/or JSX)
            </li>
            <li>
              Razor
            </li>
            <li>
              C#
            </li>
            <li>
              SQL
            </li>
          </ul>
          <h3>Multiple frameworks:</h3>
          <ul>
            <li>
              React / Angular / Vue
            </li>
            <li>
              jQuery (may still be needed)
            </li>
            <li>
              Bootstrap
            </li>
            <li>
              ASP.NET Core
            </li>
            <li>
              Entity Framework
            </li>
            ...testing frameworks too
            <li>xUnit, Selenium,...</li>
          </ul>
        </div>
        <div class="slide-img"><img src="images/depressed.png" style="width:800px"/></div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-57" class="level1 step" data-x="22000">
        <h1><a href="#slide-57">WebSharper</a></h1>
        <h2>.NET Web Development is hard for a poor monster...</h2>
        <div style="float: left;">
          <h3>Multiple language types:</h3>
          <ul>
            <li>Compiled/Interpreted/Transpiled</li>
            <li>
              Object-oriented
            </li>
            <li>
              Markup
            </li>
            <li>
              Statically-typed
            </li>
            <li>
              Dynamically-typed
            </li>
            <li>
              Relational
            </li>
          </ul>
          <h3>Multiple concepts:</h3>
          <ul>
            <li>
              DOM and Virtual DOM
            </li>
            <li>
              MVC, Routes and HTTP server concepts
            </li>
            <li>
              Promises / Async
            </li>
            <li>
            Dependency Injection
            </li>
            <li>
              Object-Relational Mapper
            </li>
            <li>Domain ???</li>
          </ul>
        </div>
        <div class="slide-img"><img src="images/sadelmo.png" style="width:450px"/></div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-58" class="level1 step" data-x="24000">
        <h1><a href="#slide-58">WebSharper</a></h1>
        <h2>What .NET web development feels like now</h2>
        <iframe width="1500" height="900" src="https://www.youtube.com/embed/Moh2l7udjio?controls=0&amp;start=41" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-59" class="level1 step" data-x="26000">
        <h1><a href="#slide-59">WebSharper</a></h1>
        <h2 class="xtlt">Managing the cognitive load of .NET web development</h2>
        <div class="slide-img fade-in"><img src="images/happy.png" style="width:800px;float:left"/></div>
        <div>
          <ul>
            <li>Use <b>ONE</b> language (mostly) for solution. </li>
            <li>Use <b>ONE</b> framework for solution components. </li>
            <li>A single set of concepts, idioms, models, abstractions.</li>
            <li>Compile F# to JavaScript to run in browser.</li>
            <li>Pure F# libraries for JavaScript interop including native jQuery.</li>
            <li>DSL for DOM manipulation.</li>
            <li>Functional reactive programming.</li>
            <li>Seamless connection between client-server code.</li>
          </ul>
        </div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>

      <section id="slide-60" class="level1 step" data-x="28000">
        <h1><a href="#slide-60">WebSharper</a></h1>
        <h2>Interop with JavaScript</h2>
        <pre><code class="fsharp">          
              let Mic = // https://github.com/wit-ai/microphone
                  Class "Mic"
                  |+> Instance [
                          "connect" => T<string> ^-> T<unit>
                          "start" => T<unit> ^-> T<unit>
                          "stop" => T<unit> ^-> T<unit>
                          "onaudiostart" =@ T<unit> ^-> T<unit> |> WithSourceName "onAudioStart"
                          "onaudioend" =@ T<unit> ^-> T<unit> |> WithSourceName "onAudioEnd"
                          "onconnecting" =@ T<unit> ^-> T<unit> |> WithSourceName "onConnecting"
                          "ondisconnected" =@ T<unit> ^-> T<unit> |> WithSourceName "onDisconnected"
                          "onready" =@ T<unit> ^-> T<unit> |> WithSourceName "onReady"
                          "onerror" =@ T<string> ^-> T<unit> |> WithSourceName "onError"
                          "onresult" =@ (T<obj> * T<obj>) ^-> T<unit> |> WithSourceName "onResult"
                      ]
                  |+> Static [ Constructor (T<unit>) 
                    |> WithInline "new Wit.Microphone(document.getElementById(\"microphone\"))"]
          </code>
        </pre>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      
      <section id="slide-61" class="level1 step" data-x="30000">
        <h1><a href="#slide-61">WebSharper</a></h1>
        <h2>Interop with JavaScript</h2>
        <pre><code class="fsharp">          
        let initMic interpret  = // Initialize the CUI Mic
            CUI <- { CUI with Mic = Some(Mic()) }
            let mic = CUI.Mic.Value
            do mic.onConnecting <- (fun _ -> MicState <- MicConnecting; debug "Mic connecting...")
            do mic.onDisconnected <- (fun _ -> MicState <- MicDisconnected;debug "Mic disconnected.")
            ...
            do mic.onResult <- (fun i e -> 
                match ClientState with
                | ClientReady ->
                    if not (isNull i || isNull e) then 
                        MicState <- MicResult(i,e) 
                        debug <| sprintf "Mic result: %A %A." i e; interpret (i,e)
                    else 
                        debug "Mic: No result returned."        
                | ClientUnderstand -> echo "I'm still trying to understand what you said before."
                | ClientNotInitialzed -> error "Client is not intialized."
                )
            do mic.Connect("...client key...")
          </code>
        </pre>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-99" class="level1 step" data-x="46000">
        <h1><a href="#slide-99">WebSharper</a></h1>
        <h2>Selma client code example</h2>
        <pre><code class="fsharp">          
          let initSpeech() =
            let voices = synth.GetVoices() |> toArray         
            if voices.Length > 0 then
                do voices |> Array.iter(fun v-> 
                    if CUI.Voice = None && (v.Name.Contains "Microsoft Zira" || v.Name.ToLower().Contains "female") then
                        CUI <- { CUI with Voice = Some v }; debug <| sprintf "Using browser speech synthesis voice %s." CUI.Voice.Value.Name
                    )
                if CUI.Voice <> None then
                    CUI.Avatar.NativeVoice <- true
                    CUI.Avatar.NativeVoiceName <- CUI.Voice.Value.Name
                    debug <| sprintf "Using browser speech synthesis voice %s." CUI.Voice.Value.Name
            if CUI.Voice = None then  
                debug "No female browser speech synthesis voice is available. Using CMU SLT Female voice via TTS."
          </code>
        </pre>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-100" class="level1 step" data-x="48000">
        <h1><a href="#slide-100">WebSharper</a></h1>
        <h2>Selma server code example</h2>
        <pre><code class="fsharp">          
          [&lt;Rpc&gt;]
            let addSymptomJournalEntry (user:string) (name:string) (location:string option) (magnitude:int option) : Async<unit Option> =
                pgdb
                |> Sql.query "INSERT INTO public.physical_symptom_journal(user_name, name, date, magnitude, location) VALUES (@u, @n, @d, @m, @l);"
                |> Sql.parameters [
                    "u", Sql.string user
                    "n", Sql.string name
                    "d", Sql.timestamp (DateTime.Now) 
                    "m", if magnitude.IsSome then Sql.int(magnitude.Value) else Sql.dbnull
                    "l", if location.IsSome then Sql.string (location.Value) else Sql.dbnull
                ]
                |> Sql.executeNonQueryAsync
                |> Async.map(
                    function 
                    | Ok n -> (if n > 0 then infof "Added symptom {0} for user {1} to database." [name;user]; Some() else None) 
                    | Error exn -> errex "Did not add symptom {0} for user {1} to database" exn [name;user]; None)        
          </code>
        </pre>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-101" class="level1 step" data-x="50000">
        <h1><a href="#slide-101">WebSharper</a></h1>
        <h2 class="xtlt">WebSharper drastically reduces the cognitive load of .NET web-based CUIs and dialogue systems.</h2>
        <div class="slide-img"><img src="images/brain1.png" style="width:600px"/></div>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-102" class="level1 step" data-x="52000">
        <h1><a href="#slide-102">Selma Dialogue Manager</a></h1>
        <h2>Competing dialogue systems</h2>
        <ul>
          <li>Alexa, Google DialogFlow, Rasa (open-source)</li>
          <li>Use NLU models at the discourse or conversation level.</li>
          <li>Many are GUI-based to be user-friendly</li>
          <li>MS Bot Framework is an entire multi-language framework (C#, Python) for chatbots</li>
          <li>May use external markup languages like YAML</li>
          <li>Developer writes Python or JavaScript or C# code to implement actions.</li>
          <li>System is inherently imperative, event-based, relies on mutable state</li>
          <li>...remember what we were saying about cognitive load?</li>
        </ul>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-103" class="level1 step" data-x="54000">
        <h1><a href="#slide-103">Selma Dialogue Manager</a></h1>
        <h2>F# dialogue manager implementation</h2>
        <pre><code class="fsharp">        
          let (|PropNotSet|_|) (n:string) :Utterance -> Utterance option =
          function
          | m when not (haveProp n) -> Some m
          | _ -> None
       
      let (|Assert|_|) :Utterance -> Utterance option =
          function
          | PropSet "user" m when tasks.Count = 0 -> 
              popc()
              Some m
          | _ -> None

      let (|Response|_|) (n:string) :Utterance -> (Utterance * obj option) option =
          function
          | PropSet "user" m when haveTask n && tasks.Count > 0  && tasks.Peek().Name = n -> 
              popc()
              popq()
              if haveProp n then
                  let d = props.[n]
                  deleteProp n
                  Some(m, Some d)
              else Some(m, None)
          | _ -> None
</code></pre>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
      <section id="slide-104" class="level1 step" data-x="56000">
        <h1><a href="#slide-104">Selma Dialogue Manager</a></h1>
        <h2>F# dialogue manager implementation</h2>
        <ul>
          <li>
            Declarative
        </li>
        <li>
          Avoid state mutation
      </li>
      <li>
        Uses pure F#
    </li>
    <li>
      Use external NLU services like Wit.ai
  </li>
      </ul>
        <footer><img src="images/fsharp.png" class="footer-img"></footer>
      </section>
    </div>
    <!-- Extra modules
     Load highlight.js, mermaid.js and markdown.js from extras.     See also src/plugins/extras/extras.js -->
    <script type="text/javascript" src="extras/highlight/highlight.pack.js"></script>
    <script type="text/javascript" src="extras/mermaid/mermaid.min.js"></script>
    <script type="text/javascript" src="extras/markdown/markdown.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript" src="https://textillate.js.org/assets/jquery.fittext.js"></script>
    <script type="text/javascript" src="https://textillate.js.org/assets/jquery.lettering.js"></script>
    <script type="text/javascript" src="https://textillate.js.org/jquery.textillate.js"></script>
    <!--
         To make all described above really work, you need to include impress.js in the page.         You also need to call a `impress().init()` function to initialize impress.js presentation.
         And you should do it in the end of your document.      -->
    <script type="text/javascript" src="js/impress.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
      impress().init();
      $(function () {
	      $('.tlt').textillate();
      })
    </script>
    <div class="fallback-message"> impress.js is not sported by 2 your browser,
      sorry. </div>
  </body>
</html>
