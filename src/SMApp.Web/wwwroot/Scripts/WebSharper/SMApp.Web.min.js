(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5;a=self;b=a.SMApp=a.SMApp||{};c=b.Web=b.Web||{};d=c.ClientExtensions=c.ClientExtensions||{};e=c._Html=c._Html||{};f=c.htmModule=c.htmModule||{};g=a.StartupCode$SMApp_Web$ClientExtensions=a.StartupCode$SMApp_Web$ClientExtensions||{};h=b.Bootstrap=b.Bootstrap||{};i=h.Controls=h.Controls||{};j=a.StartupCode$SMApp_Web$Bootstrap=a.StartupCode$SMApp_Web$Bootstrap||{};k=c.NLU=c.NLU||{};l=k.Intent=k.Intent||{};m=k.Trait=k.Trait||{};n=k.Entity=k.Entity||{};o=k.Meaning=k.Meaning||{};p=k.Question=k.Question||{};q=k.Voice=k.Voice||{};r=q["Entity'"]=q["Entity'"]||{};s=k.Text=k.Text||{};t=s["Meaning'"]=s["Meaning'"]||{};u=s["Intent'"]=s["Intent'"]||{};v=s["Entity'"]=s["Entity'"]||{};w=a.StartupCode$SMApp_Web$NLU=a.StartupCode$SMApp_Web$NLU||{};x=c.CUI=c.CUI||{};y=x.MicState=x.MicState||{};z=x.ClientState=x.ClientState||{};A=x.Interpreter=x.Interpreter||{};B=x.CUI=x.CUI||{};C=a.StartupCode$SMApp_Web$CUI=a.StartupCode$SMApp_Web$CUI||{};D=c.Main=c.Main||{};E=a.StartupCode$SMApp_Web$Main=a.StartupCode$SMApp_Web$Main||{};F=c.Client=c.Client||{};G=a.StartupCode$SMApp_Web$Client=a.StartupCode$SMApp_Web$Client||{};H=a.SMApp$Web_GeneratedPrintf=a.SMApp$Web_GeneratedPrintf||{};I=a.WebSharper;J=I&&I.Strings;K=a.IntelliFactory;L=K&&K.Runtime;M=I&&I.Utils;N=a.console;O=a.jQuery;P=I&&I.Arrays;Q=I&&I.List;R=I&&I.Seq;S=I&&I.UI;T=S&&S.Doc;U=S&&S.AttrModule;V=I&&I.Collections;W=V&&V.Map;X=I&&I.Concurrency;Y=I&&I.Random;Z=I&&I.Operators;_0=I&&I.Remoting;_1=_0&&_0.AjaxRemotingProvider;_2=a.Wit;_3=a.document;_4=I&&I.Unchecked;_5=V&&V.Dictionary;d.replace_tok=function(_6,_7,_8){return J.Replace(_8,_6,_7);};d.toLower=function(_6){return _6.toLowerCase();};d.debug=function(_6,_7){d.info((((L.Curried3(function(_8,_9,_){return _8("DEBUG: "+M.toSafe(_9)+": "+M.prettyPrint(_));}))(a.id))(_6.toUpperCase()))(_7));};d.error=function(_6){N.error(_6);};d.info=function(_6){N.info(_6);};d.jserror=function(_6){O.error(_6);};d.toArray=function(_6){return P.map(a.id,O.makeArray(_6));};d["Terminal.EchoHtml'"]=function(_6,_7){_6.pause();_6.echo(_7,d.rawOpt());_6.resume();};d["Terminal.Echo'"]=function(_6,_7){_6.pause();_6.echo(_7);_6.resume();};d.rawOpt=function(){g.$cctor();return g.rawOpt;};e=c._Html=L.Class({toString:function(){return e.toString(this);}},null,e);e.toString=function(_6){function _7(_8){return function(_9){var _,$,ba,bb,bc,bd,be;$=J.replicate(_8," ");switch(_9.$==0?_9.$1.$==1?_9.$1.$0.$==2?_9.$1.$1.$==0?(_=[_9.$1.$0.$0,_9.$0],1):(_=[_9.$1,_9.$0],2):(_=[_9.$1,_9.$0],2):(_=[_9.$1,_9.$0],2):_9.$==2?(_=_9.$0,3):(_=[_9.$0,_9.$1],0)){case 0:return _[0]+"=\""+_[1]+"\"";case 1:ba=_[1];return $+"<"+ba+">"+_[0]+"</"+ba+">\r\n";case 2:bb=_[1];bc=Q.partition(function(bf){return bf.$==1;},_[0]);bd=bc[1];be=bc[0];return bd.$==0?$+"<"+bb+(be.$===0?"":" "+J.concat(" ",Q.ofSeq(R.delay(function(){return R.map(function(bf){return(_7(0))(bf);},be);}))))+"/>\r\n":$+"<"+bb+(be.$===0?"":" "+J.concat(" ",Q.ofSeq(R.delay(function(){return R.map(function(bf){return(_7(0))(bf);},be);}))))+">\r\n"+J.concat("",Q.ofSeq(R.delay(function(){return R.map(function(bf){return(_7(_8+1))(bf);},bd);})))+$+"</"+bb+">\r\n";case 3:return $+_+"\r\n";}};}return(_7(0))(_6);};f.alt=function(_6){return new e({$:1,$0:"alt",$1:_6});};f.src=function(_6){return new e({$:1,$0:"src",$1:_6});};f.cls=function(_6){return new e({$:1,$0:"class",$1:_6});};f.str=function(_6){return e.toString(_6);};f.op_PercentEquals=function(_6,_7){return new e({$:1,$0:_6,$1:_7});};f.op_Splice=function(_6){var _7;return Q.ofArray([new e({$:2,$0:(_7=_6,a.String(_7))})]);};f.strong=function(){g.$cctor();return g.strong;};f.h4=function(){g.$cctor();return g.h4;};f.h3=function(){g.$cctor();return g.h3;};f.h2=function(){g.$cctor();return g.h2;};f.h1=function(){g.$cctor();return g.h1;};f.li=function(){g.$cctor();return g.li;};f.ul=function(){g.$cctor();return g.ul;};f.th=function(){g.$cctor();return g.th;};f.td=function(){g.$cctor();return g.td;};f.tr=function(){g.$cctor();return g.tr;};f.a=function(){g.$cctor();return g.a;};f.p=function(){g.$cctor();return g.p;};f.area=function(){g.$cctor();return g.area;};f.map=function(){g.$cctor();return g.map;};f.img=function(){g.$cctor();return g.img;};f.tfoot=function(){g.$cctor();return g.tfoot;};f.tbody=function(){g.$cctor();return g.tbody;};f.thead=function(){g.$cctor();return g.thead;};f.table=function(){g.$cctor();return g.table;};f.span=function(){g.$cctor();return g.span;};f.section=function(){g.$cctor();return g.section;};f.br=function(){g.$cctor();return g.br;};f.div=function(){g.$cctor();return g.div;};f.body=function(){g.$cctor();return g.body;};f.style=function(){g.$cctor();return g.style;};f.title=function(){g.$cctor();return g.title;};f.head=function(){g.$cctor();return g.head;};f.html=function(){g.$cctor();return g.html;};f.elem=function(_6,_7){return new e({$:0,$0:_6,$1:_7});};g.$cctor=function(){var _6;g.$cctor=a.ignore;g.rawOpt=(_6={},_6.raw=true,_6);g.html=function(_7){return f.elem("html",_7);};g.head=function(_7){return f.elem("head",_7);};g.title=function(_7){return f.elem("title",_7);};g.style=function(_7){return f.elem("style",_7);};g.body=function(_7){return f.elem("body",_7);};g.div=function(_7){return f.elem("div",_7);};g.br=function(_7){return f.elem("br",_7);};g.section=function(_7){return f.elem("section",_7);};g.span=function(_7){return f.elem("span",_7);};g.table=function(_7){return f.elem("table",_7);};g.thead=function(_7){return f.elem("thead",_7);};g.tbody=function(_7){return f.elem("tbody",_7);};g.tfoot=function(_7){return f.elem("tfoot",_7);};g.img=function(_7){return f.elem("img",_7);};g.map=function(_7){return f.elem("map",_7);};g.area=function(_7){return f.elem("area",_7);};g.p=function(_7){return f.elem("p",_7);};g.a=function(_7){return f.elem("a",_7);};g.tr=function(_7){return f.elem("tr",_7);};g.td=function(_7){return f.elem("td",_7);};g.th=function(_7){return f.elem("th",_7);};g.ul=function(_7){return f.elem("ul",_7);};g.li=function(_7){return f.elem("li",_7);};g.h1=function(_7){return f.elem("h1",_7);};g.h2=function(_7){return f.elem("h1",_7);};g.h3=function(_7){return f.elem("h1",_7);};g.h4=function(_7){return f.elem("h1",_7);};g.strong=function(_7){return f.elem("strong",_7);};};i.Radio=function(_6,_7,_8,_9,_){return T.Element("div",new Q.T({$:1,$0:(i.cls())("radio"),$1:_7}),[T.Element("label",_9,[T.Radio(_,true,_8),T.TextNode(_6)])]);};i.Checkbox=function(_6,_7,_8,_9,_){return T.Element("div",new Q.T({$:1,$0:(i.cls())("checkbox"),$1:_7}),[T.Element("label",_9,[T.CheckBox(_,_8),T.TextNode(_6)])]);};i.TextArea=function(_6,_7,_8,_9,_){return T.Element("div",new Q.T({$:1,$0:(i.cls())("form-group"),$1:_7}),[T.Element("label",_9,[T.TextNode(_6)]),T.InputArea(new Q.T({$:1,$0:(i.cls())("form-control"),$1:_}),_8)]);};i.InputPassword=function(_6,_7,_8,_9,_){return T.Element("div",new Q.T({$:1,$0:(i.cls())("form-group"),$1:_7}),[T.Element("label",_9,[T.TextNode(_6)]),T.PasswordBox(new Q.T({$:1,$0:(i.cls())("form-control"),$1:_}),_8)]);};i.Input=function(_6,_7,_8,_9,_){return T.Element("div",new Q.T({$:1,$0:(i.cls())("form-group"),$1:_7}),[T.Element("label",_9,[T.TextNode(_6)]),T.Input(new Q.T({$:1,$0:(i.cls())("form-control"),$1:_}),_8)]);};i.Container=function(_6){return T.Element("div",[(i.cls())("container")],_6);};i.Class=function(){j.$cctor();return j.Class;};i.cls=function(){j.$cctor();return j.cls;};j.$cctor=function(){j.$cctor=a.ignore;j.cls=U.Class;j.Class=U.Class;};l=k.Intent=L.Class({toString:function(){return(((L.Curried3(function(_6,_7,_8){return _6("Intent("+M.toSafe(_7)+", "+H.p$2(_8)+")");}))(a.id))(this.get_Name()))(this.get_Confidence());},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,l);m=k.Trait=L.Class({toString:function(){return(((L.Curried3(function(_6,_7,_8){return _6("Trait("+M.toSafe(_7)+", "+M.prettyPrint(_8)+")");}))(a.id))(this.get_Name()))(this.get_Value());},get_Value:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,m);n=k.Entity=L.Class({toString:function(){return((((L.Curried(function(_6,_7,_8,_9){return _6("Entity("+M.toSafe(_7)+", "+M.toSafe(_8)+", "+H.p$2(_9)+")");},4))(a.id))(this.get_Name()))(this.get_Value()))(this.get_Confidence());},get_Confidence:function(){return(this.get_Unwrap())[2];},get_Value:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2];}},null,n);o=k.Meaning=L.Class({toString:function(){return((((L.Curried(function(_6,_7,_8,_9){return _6(H.p(_7)+" "+H.p$3(_8)+" "+H.p$5(_9));},4))(a.id))(this.get_Intent()))(this.get_Trait()))(this.get_Entities());},get_Entities:function(){var _6;_6=(this.Unwrap())[2];return _6!=null?{$:1,$0:Q.sortBy(function(_7){return _7.get_Name();},_6.$0)}:null;},get_Trait:function(){return(this.Unwrap())[1];},get_Intent:function(){return(this.Unwrap())[0];},Unwrap:function(){return[this.$0,this.$1,this.$2];}},null,o);p=k.Question=L.Class({toString:function(){return(((L.Curried3(function(_6,_7,_8){return _6("Name: "+M.toSafe(_7)+" Text: "+M.toSafe(_8));}))(a.id))(this.get_Name()))(this.get_Text());},get_Text:function(){return(this.Unwrap())[1];},get_Name:function(){return(this.Unwrap())[0];},Unwrap:function(){return[this.$0,this.$1];}},null,p);r.New=function(_6,_7,_8,_9,_){return{body:_6,end:_7,start:_8,suggested:_9,value:_};};q["Intent'"]=function(_6,_7){return!(_7.intent==null)?{$:1,$0:new l({$:0,$0:d.toLower(_7.intent.value),$1:null})}:null;};q["Trait'"]=function(_6){return!(_6.greetings==null)?{$:1,$0:new m({$:0,$0:"greetings",$1:d.toLower(_6.contact.value)})}:null;};q["Entity'$1"]=function(_6){return!(_6.contact==null)?{$:1,$0:new n({$:0,$0:"contact",$1:d.toLower(_6.contact.value),$2:null})}:null;};t=s["Meaning'"]=L.Class({get_TopIntent:function(){return Q.head(Q.sortBy(function(_6){return _6.get_Confidence();},this.get_Intents()));},get_Entities:function(){return(this.get_Unwrap())[1];},get_Intents:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,t);u=s["Intent'"]=L.Class({get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,u);v=s["Entity'"]=L.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,v);s.HasMeaning=function(_6){var _7,_8,_9,_,$,ba;return _6!=null&&_6.$==1&&(_6.$0.$0.$==0&&(_6.$0.$1.get_Length()>0&&(_7=_6.$0.$1,true)))?{$:1,$0:new o({$:0,$0:null,$1:null,$2:{$:1,$0:Q.map(function(bb){return new n({$:0,$0:d.toLower(bb.get_Role()),$1:bb.get_Value(),$2:{$:1,$0:bb.get_Confidence()}});},Q.filter(function(bb){return bb.get_Confidence()>s.entityConfidenceThreshold();},_7))}})}:_6!=null&&_6.$==1&&(_6.$0.$1.$==0&&(_6.$0.$0.get_Length()>0&&_6.$0.get_TopIntent().get_Confidence()>s.intentConfidenceThreshold()&&(_8=[_6.$0.$0,_6],true)))?(_9=_8[1],{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:d.toLower(_9.$0.get_TopIntent().get_Name()),$1:{$:1,$0:_9.$0.get_TopIntent().get_Confidence()}})},$1:null,$2:null})}):_6!=null&&_6.$==1&&(_6.$0.$0.get_Length()>0&&_6.$0.$1.get_Length()>0&&_6.$0.get_TopIntent().get_Confidence()>s.intentConfidenceThreshold()&&(_=[_6.$0.$1,_6.$0.$0,_6],true))?($=_[2],(ba=Q.map(function(bb){return new n({$:0,$0:d.toLower(bb.get_Role()),$1:bb.get_Value(),$2:{$:1,$0:bb.get_Confidence()}});},Q.filter(function(bb){return bb.get_Confidence()>s.entityConfidenceThreshold();},$.$0.get_Entities())),{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:d.toLower($.$0.get_TopIntent().get_Name()),$1:{$:1,$0:$.$0.get_TopIntent().get_Confidence()}})},$1:null,$2:{$:1,$0:ba}})})):null;};s.entityConfidenceThreshold=function(){w.$cctor();return w.entityConfidenceThreshold;};s.set_entityConfidenceThreshold=function(_6){w.$cctor();w.entityConfidenceThreshold=_6;};s.intentConfidenceThreshold=function(){w.$cctor();return w.intentConfidenceThreshold;};s.set_intentConfidenceThreshold=function(_6){w.$cctor();w.intentConfidenceThreshold=_6;};s.QuickPrograms=function(_6){return _6==="programs"?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"Program",$1:null})},$1:null,$2:null})}:null;};s.QuickNumber=function(_6){var _7,_8,_9;return(_8=s.One(_6),_8!=null&&_8.$==1?(_7=_8.$0,true):(_9=s.Two(_6),_9!=null&&_9.$==1&&(_7=_9.$0,true)))?{$:1,$0:_7}:null;};s.Three=function(_6){var _7;return _6==="3"||_6==="three"?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$1:null,$2:{$:1,$0:Q.ofArray([new n({$:0,$0:"wit/ordinal",$1:"three",$2:{$:1,$0:1}})])}})}:null;};s.Two=function(_6){var _7;return _6==="2"||_6==="two"?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$1:null,$2:{$:1,$0:Q.ofArray([new n({$:0,$0:"wit/ordinal",$1:"two",$2:{$:1,$0:1}})])}})}:null;};s.One=function(_6){var _7;return _6==="1"||_6==="one"?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$1:null,$2:{$:1,$0:Q.ofArray([new n({$:0,$0:"wit/ordinal",$1:"one",$2:{$:1,$0:1}})])}})}:null;};s.QuickNo=function(_6){var _7;return _6==="no"||(_6==="NO"||(_6==="No"||(_6==="nope"||(_6==="no way"||(_6==="nah"||(_6==="don't do it"||_6==="stop"))))))?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"no",$1:{$:1,$0:1}})},$1:null,$2:null})}:null;};s.QuickYes=function(_6){var _7;return _6==="yes"||(_6==="YES"||(_6==="Yes"||(_6==="YEs"||(_6==="ok"||(_6==="sure"||(_6==="yeah"||(_6==="yep"||(_6==="uh huh"||(_6==="go ahead"||_6==="go")))))))))?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"yes",$1:{$:1,$0:1}})},$1:null,$2:null})}:null;};s.QuickHelp=function(_6){var _7;return _6==="help"||(_6==="help me"||(_6==="what's this?"||_6==="huh"))?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"help",$1:{$:1,$0:1}})},$1:null,$2:null})}:null;};s.QuickHello=function(_6){var _7;return _6==="hello"||(_6==="hey"||(_6==="yo"||_6==="hi"))?{$:1,$0:new o({$:0,$0:{$:1,$0:new l({$:0,$0:"hello",$1:{$:1,$0:1}})},$1:null,$2:null})}:null;};s.Voices=function(_6){return _6==="voices"?{$:1,$0:null}:null;};s.Debug=function(_6){return _6==="debug"?{$:1,$0:null}:null;};s.Blank=function(_6){return _6===""?{$:1,$0:null}:null;};k.No=function(_6){var _7,_8,_9,_,$,ba;return(_8=k.Intent$1("no",_6),_8!=null&&_8.$==1&&(_8.$0[0]==null&&(_8.$0[1]==null&&(_7=_6,true))))?{$:1,$0:_7}:(_=k.Intent$1("noresponse",_6),_!=null&&_.$==1&&(_.$0[0]==null&&(_.$0[1]==null&&(_9=_6,true))))?{$:1,$0:_9}:(ba=k.Intent$1("NoResponse",_6),ba!=null&&ba.$==1&&(ba.$0[0]==null&&(ba.$0[1]==null&&($=_6,true))))?{$:1,$0:$}:null;};k.Yes=function(_6){var _7,_8,_9,_,$,ba;return(_8=k.Intent$1("yes",_6),_8!=null&&_8.$==1&&(_8.$0[0]==null&&(_8.$0[1]==null&&(_7=_6,true))))?{$:1,$0:_7}:(_=k.Intent$1("yesresponse",_6),_!=null&&_.$==1&&(_.$0[0]==null&&(_.$0[1]==null&&(_9=_6,true))))?{$:1,$0:_9}:(ba=k.Intent$1("YesResponse",_6),ba!=null&&ba.$==1&&(ba.$0[0]==null&&(ba.$0[1]==null&&($=_6,true))))?{$:1,$0:$}:null;};k.EntityManyofMany=function(_6,_7){return{$:1,$0:W.OfArray(P.ofSeq(Q.map(function(_8){return Q.exists(function(_9){return _9.get_Name()===_8;},_7)?[_8,{$:1,$0:Q.filter(function(_9){return _9.get_Name()===_8;},_7)}]:[_8,null];},_6)))};};k.EntityManyOf1=function(_6,_7){var _8;return _7!=null&&_7.$==1&&(Q.exists(function(_9){return _9.get_Name()===_6;},_7.$0)&&(_8=_7.$0,true))?{$:1,$0:Q.filter(function(_9){return _9.get_Name()===_6;},_8)}:null;};k.Entity1Of1=function(_6,_7){var _8;return _7!=null&&_7.$==1&&(_7.$0.$==1&&(_7.$0.$1.$==0&&(_7.$0.$0.get_Name()===_6&&(_8=_7.$0.$0,true))))?{$:1,$0:_8}:null;};k.Intent$1=function(_6,_7){var _8;return _7.get_Intent()!=null&&_7.get_Intent().$0.get_Name()===_6?(_8=_7.Unwrap(),{$:1,$0:[_8[1],_8[2]]}):null;};w.$cctor=function(){w.$cctor=a.ignore;w.intentConfidenceThreshold=0.85;w.entityConfidenceThreshold=0.85;};y.MicReady={$:5};y.MicAudioEnd={$:4};y.MicAudioStart={$:3};y.MicDisconnected={$:2};y.MicConnecting={$:1};y.MicNotInitialized={$:0};z.ClientUnderstand={$:2};z.ClientReady={$:1};z.ClientNotInitialzed={$:0};A=x.Interpreter=L.Class({get_Options:function(){return(this.get_Unwrap())[2];},get_Text:function(){return(this.get_Unwrap())[1];},get_Voice:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1[0],this.$1[1]];}},null,A);B=x.CUI=L.Class({SayVoices:function(){var _6,_7,_8;_6=this;_7=a.speechSynthesis.getVoices();!(_7==null)?(_8=d.toArray(_7),_6.Say((function(_9){return function(_){return _9("There are currently "+a.String(_)+" voices installed on this computer or device.");};}(a.id))(P.length(_8))),P.iteri(function(_9,_){return _6.Say(((((L.Curried(function($,ba,bb,bc){return $("Voice "+a.String(ba)+". Name: "+M.toSafe(bb)+", Local: "+M.prettyPrint(bc)+".");},4))(a.id))(_9))(_.name))(_.localService));},_8)):void 0;},Wait:function(_6){this.Wait$1(function(){X.Start(_6,null);});},Wait$1:function(_6){this["Echo'"]("please wait...");this.Term.pause();_6();this.Term.resume();},sayRandom:function(_6,_7){this.Say(x.getRandomPhrase(_6,_7));},Say:function(_6){var _7,_8,_9;_7=this.Voice;_7!=null&&_7.$==1?(_8=_7.$0,X.Start((_9=null,X.Delay(function(){var _;_=new a.SpeechSynthesisUtterance(_6);_.voice=_8;a.speechSynthesis.speak(_);return X.Zero();})),null),this.Caption?this["Echo'"](_6):void 0):this["Echo'"](_6);},Debug:function(_6,_7){d.debug(_6,_7);},"EchoHtml'":function(_6){var _7,_8;_7=(_8={},_8.raw=true,_8);this.Term.disable();this.Term.echo(_6,_7);this.Term.enable();},"Echo'":function(_6){this.Term.disable();this.Term.echo(_6);this.Term.enable();}},null,B);B.New=function(_6,_7,_8,_9){return new B({Voice:_6,Mic:_7,Term:_8,Caption:_9});};x.waitAddPhrases=function(){C.$cctor();return C.waitAddPhrases;};x.waitRetrievePhrases=function(){C.$cctor();return C.waitRetrievePhrases;};x.helpPhrases=function(){C.$cctor();return C.helpPhrases;};x.helloUserPhrases=function(){C.$cctor();return C.helloUserPhrases;};x.helloPhrases=function(){C.$cctor();return C.helloPhrases;};x["getRandomPhrase'"]=function(_6){return d.replace_tok("$0","",R.nth(x.rng().Next(0,_6.get_Length()),_6));};x.getRandomPhrase=function(_6,_7){return d.replace_tok("$0",_7,R.nth(x.rng().Next(0,_6.get_Length()),_6));};x.rng=function(){C.$cctor();return C.rng;};C.$cctor=function(){C.$cctor=a.ignore;C.rng=new Y.New();C.helloPhrases=Q.ofArray(["Welcome!","Welcome, my name is Selma.","Welcome to Selma. How can I help?","Hello this is Selma, how can I help?","Hello, I am Selma. How can I help?","Hello, I am Selma. How may I help you now?","I'm Selma. Tell me your name so we can get started."]);C.helloUserPhrases=Q.ofArray(["Hi $0, welcome back.","Welcome $0, nice to see you again.","Hello $0.","Good to see you $0."]);C.helpPhrases=Q.ofArray(["What can I help you with $0?"]);C.waitRetrievePhrases=Q.ofArray(["Ok, let me check that $0 for you","Please wait while I check that $0 for you.","Wait while I check that $0.","Ok let me see if I can find that $0."]);C.waitAddPhrases=Q.ofArray(["Ok, let me add that $0 for you","Please wait while I add that $0 for you.","Wait while I add that $0."]);};D.update=function(_6,_7,_8,_9,_){var $,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY;function bZ(cg){return _7.ContainsKey(cg);}function b0(cg,ch){return _7.Add(cg,ch);}function b1(cg){_7.Remove(cg);}function b2(cg){return _7.get_Item(cg);}function b3(){return b2("user");}function b4(){_.shift();}function b5(){_8.shift();}function b6(cg){var ch;ch=D.getQuestion(cg);ch==null?(function(ci){return function(cj){return ci("No such question: "+M.toSafe(cj));};}(Z.FailWith))(cg):_8.unshift(ch.$0);}function b7(cg){_6.Say(cg);}function b8(cg){_9.unshift(cg);b7(cg);}function b9(cg,ch){var ci;ci=x.getRandomPhrase(cg,ch);_9.unshift(ci);return _6.Say(ci);}function b_(cg,ch){b0(cg,ch);b6(cg);D.debug((function(ci){return function(cj){return ci("Added question: "+H.p$8(cj)+".");};}(a.id))(_8[0]));return b8(d.replace_tok("$0",ch,D.getQuestion(cg).$0.get_Text()));}function b$(cg,ch){return bZ(cg)?{$:1,$0:ch}:null;}function ca(cg,ch){return!bZ(cg)?{$:1,$0:ch}:null;}function cb(cg){var ch,ci;return(ci=b$("user",cg),ci!=null&&ci.$==1&&(_8.length===0&&(ch=ci.$0,true)))?(b4(),{$:1,$0:ch}):null;}function cc(cg,ch){var ci,cj,ck;return(cj=b$("user",ch),cj!=null&&cj.$==1&&(D.haveQuestion(cg)&&_8.length>0&&_8[0].get_Name()===cg&&(ci=cj.$0,true)))?(b4(),b5(),bZ(cg)?(ck=_7.get_Item(cg),(b1(cg),{$:1,$0:[ci,{$:1,$0:ck}]})):{$:1,$0:[ci,null]}):null;}function cd(cg,ch){var ci,cj,ck;return(cj=ca("user",ch),cj!=null&&cj.$==1&&(D.haveQuestion(cg)&&_8.length>0&&_8[0].get_Name()===cg&&(ci=cj.$0,true)))?(b4(),b5(),bZ(cg)?(ck=_7.get_Item(cg),(b1(cg),{$:1,$0:[ci,{$:1,$0:ck}]})):{$:1,$0:[ci,null]}):null;}function ce(cg){var ch,ci;return(ci=ca("user",cg),ci!=null&&ci.$==1&&(_8.length===0&&(ch=ci.$0,true)))?(b4(),{$:1,$0:ch}):null;}function cf(cg){var ch;return cg!=null&&cg.$==1&&(typeof cg.$0=="string"&&(ch=cg.$0,true))?{$:1,$0:ch}:null;}D.debug((function(cg){return function(ch){return cg("Starting context: "+M.prettyPrint(ch)+".");};}(a.id))(_));D.debug((function(cg){return function(ch){return cg("Starting questions: "+M.prettyPrint(ch)+".");};}(a.id))(_8));$=Q.ofSeq(R.take(_.length>=5?5:_.length,_));$.$==1&&(bb=(bc=ca("started",$.$0),bc!=null&&bc.$==1?{$:1,$0:bc.$0}:null),bb!=null&&bb.$==1&&(bd=ce(bb.$0),bd!=null&&bd.$==1&&(be=k.Intent$1("hello",bd.$0),be!=null&&be.$==1&&(be.$0[1]==null&&$.$1.$==0))))?(_7.Add("started",true),b9(x.helloPhrases(),"")):$.$==1&&(bg=ce($.$0),bg!=null&&bg.$==1&&(bh=k.Intent$1("hello",bg.$0),bh!=null&&bh.$==1&&(bh.$0[1]==null&&$.$1.$==0)))?b8("Hello, tell me your name to get started."):$.$==1&&(bj=ce($.$0),bj!=null&&bj.$==1&&(bk=k.Intent$1("hello",bj.$0),bk!=null&&bk.$==1&&(bl=k.Entity1Of1("contact",bk.$0[1]),bl!=null&&bl.$==1&&($.$1.$==0&&(bi=bl.$0,true)))))?(bm=bi.get_Value(),X.Start((bn=null,X.Delay(function(){b9(x.waitRetrievePhrases(),"user name");return X.Bind((new _1.New()).Async("SMApp.Web:SMApp.Web.Server.getUser:1074459287",[bm]),function(cg){var ch;return cg==null?(b8((function(ci){return function(cj){return ci("Sorry I did not find the user name "+M.toSafe(cj)+".");};}(a.id))(bm)),b_("addUser",bm),X.Zero()):(ch=cg.$0,X.Bind((new _1.New()).Async("SMApp.Web:SMApp.Web.Server.updateUserLastLogin:1519316473",[ch.Name]),function(){_7.Add("user",ch);b9(x.helloUserPhrases(),(function(ci){return function(cj){return ci(M.prettyPrint(cj));};}(a.id))(_7.get_Item("user")));return ch.LastLoggedIn!=null?X.Bind((new _1.New()).Async("SMApp.Web:SMApp.Web.Server.humanize:866543865",[ch.LastLoggedIn.$0]),function(ci){b8((function(cj){return function(ck){return cj("You last logged in "+M.toSafe(ck)+".");};}(a.id))(ci));return X.Zero();}):X.Zero();}));});})),null)):$.$==1&&(bp=k.Yes($.$0),bp!=null&&bp.$==1&&(bq=cd("addUser",bp.$0),bq!=null&&bq.$==1&&(br=cf(bq.$0[1]),br!=null&&br.$==1&&($.$1.$==0&&(bo=br.$0,true)))))?X.Start((bs=null,X.Delay(function(){b9(x.waitAddPhrases(),"user");return X.Bind((new _1.New()).Async("SMApp.Web:SMApp.Web.Server.addUser:1519316473",[bo]),function(cg){return cg==null?(b8((function(ch){return function(ci){return ch("Sorry I was not able to add the user "+M.toSafe(ci)+" to the system.");};}(a.id))(bo)),X.Zero()):(b0("user",bo),b8((function(ch){return function(ci){return ch("Hello "+M.prettyPrint(ci)+", nice to meet you.");};}(a.id))(_7.get_Item("user"))),X.Zero());});})),null):$.$==1&&(bu=k.No($.$0),bu!=null&&bu.$==1&&(bv=cd("addUser",bu.$0),bv!=null&&bv.$==1&&(bw=cf(bv.$0[1]),bw!=null&&bw.$==1&&($.$1.$==0&&(bt=bw.$0,true)))))?b8((function(cg){return function(ch){return cg("Ok I did not add the user "+M.toSafe(ch)+". But you must login for me to help you.");};}(a.id))(bt)):$.$==1&&((by=ce($.$0),by!=null&&by.$==1)&&$.$1.$==0)?b8("Could you introduce yourself so we can get started?"):$.$==1&&(bA=cb($.$0),bA!=null&&bA.$==1&&(bB=k.Intent$1("hello",bA.$0),bB!=null&&bB.$==1&&(bB.$0[0]==null&&(bC=k.Entity1Of1("contact",bB.$0[1]),bC!=null&&bC.$==1&&($.$1.$==0&&(bz=bC.$0,true))))))?X.Start((bD=null,X.Delay(function(){return X.Bind((new _1.New()).Async("SMApp.Web:SMApp.Web.Server.getUser:1074459287",[bz.get_Value()]),function(cg){return cg==null?(b8((function(ch){return function(ci){return ch("Sorry, the user "+M.toSafe(ci)+" does not exist.");};}(a.id))(bz.get_Value())),X.Zero()):(b_("switchUser",cg.$0.Name),X.Zero());});})),null):$.$==1&&(bF=k.Yes($.$0),bF!=null&&bF.$==1&&(bG=cc("switchUser",bF.$0),bG!=null&&bG.$==1&&(bH=cf(bG.$0[1]),bH!=null&&bH.$==1&&($.$1.$==0&&(bE=bH.$0,true)))))?(_7.set_Item("user",bE),b8((function(cg){return function(ch){return cg("Ok I switched to user "+M.prettyPrint(ch)+".");};}(a.id))(bE))):$.$==1&&(bJ=k.No($.$0),bJ!=null&&bJ.$==1&&(bK=cc("switchUser",bJ.$0),bK!=null&&bK.$==1&&(bL=cf(bK.$0[1]),bL!=null&&bL.$==1&&($.$1.$==0&&(bI=bL.$0,true)))))?b8((function(cg){return function(ch){return cg("Ok I did not switch to user "+M.toSafe(ch)+".");};}(a.id))(bI)):$.$==1&&(bN=cb($.$0),bN!=null&&bN.$==1&&(bO=k.Intent$1("symptom",bN.$0),bO!=null&&bO.$==1&&(bP=k.Entity1Of1("pain",bO.$0[1]),bP!=null&&bP.$==1&&($.$1.$==0&&(bM=bP.$0,true)))))?X.Start((bQ=null,X.Delay(function(){b8("Ok I'll add that entry to your symptom journal");b8((function(cg){return function(ch){return cg("I see this is the 3rd time today you've had pain "+M.toSafe(ch));};}(a.id))(b3()));b_("painVideo","");return X.Zero();})),null):$.$==1&&(bS=k.Yes($.$0),bS!=null&&bS.$==1&&((bT=cc("painVideo",bS.$0),bT!=null&&bT.$==1)&&$.$1.$==0))?_6["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"):$.$==1&&(bV=cb($.$0),bV!=null&&bV.$==1&&(bW=k.Intent$1("medjournal",bV.$0),bW!=null&&bW.$==1&&((bX=bW.$0[1],bX!=null&&bX.$==1)&&($.$1.$==0&&(bU=bW.$0[1].$0,true)))))?(b8("ok I added that entry to your medication journal."),b8("You should be careful not to take too many painkillers over a short period of time.")):(b4(),D.debug("Main interpreter did not understand utterance."),b8("Sorry I didn't understand what you meant."),_8.length>0?(bY=R.nth(0,_8),bZ(bY.get_Name())?b8(d.replace_tok("$0",_7.get_Item(bY.get_Name()),bY.get_Text())):b8(bY.get_Text())):void 0);D.debug((function(cg){return function(ch){return cg("Ending context: "+M.prettyPrint(ch)+".");};}(a.id))(_));D.debug((function(cg){return function(ch){return cg("Ending questions: "+M.prettyPrint(ch)+".");};}(a.id))(_8));};D.haveQuestion=function(_6){return Q.exists(function(_7){return _7.get_Name()===_6;},D.questions());};D.getQuestion=function(_6){return R.tryFind(function(_7){return _7.get_Name()===_6;},D.questions());};D.questions=function(){E.$cctor();return E.questions;};D.debug=function(_6){d.debug("Main",_6);};E.$cctor=function(){E.$cctor=a.ignore;E.questions=Q.ofArray([new p({$:0,$0:"addUser",$1:"Do you want me to add the user $0?"}),new p({$:0,$0:"switchUser",$1:"Do you want me to switch to the user $0?"}),new p({$:0,$0:"painSurvey",$1:"Would you like to take a short survey on your pain symptoms so I can understand them better."}),new p({$:0,$0:"painVideo",$1:"Would you like to see a video about pain management that might help you?"}),new p({$:0,$0:"medReminder",$1:"Would you like me to add a reminder about your meds so you won't forget them later?"})]);};F.run=function(){var _6,_7;_6=L.ThisFunc(function(_8,_9){return((F.Main().get_Text())(_8))(_9);});_7=F.Main().get_Options();a.$("#main").terminal(_6,_7);return T.get_Empty();};F.Main=function(){G.$cctor();return G.Main;};F.initMic=function(_6){var _7,_8;F.set_CUI((_7={$:1,$0:new _2.Microphone(_3.getElementById("microphone"))},B.New(F.CUI().Voice,_7,F.CUI().Term,F.CUI().Caption)));_8=F.CUI().Mic.$0;_8.onconnecting=function(){F.set_MicState(y.MicConnecting);return F.debug("Mic connecting...");};_8.ondisconnected=function(){F.set_MicState(y.MicDisconnected);return F.debug("Mic disconnected.");};_8.onaudiostart=function(){F.set_MicState(y.MicAudioStart);return F.debug("Mic audio start...");};_8.onaudioend=function(){F.set_MicState(y.MicAudioEnd);return F.debug("Mic audio end.");};_8.onerror=function(_9){F.set_MicState({$:6,$0:_9});return F.debug((function(_){return function($){return _("Mic error : "+M.toSafe($)+".");};}(a.id))(_9));};_8.onready=function(){F.set_MicState(y.MicReady);return F.debug("Mic ready.");};_8.onresult=function(_9,_){return F.ClientState().$==2?F.echo("I'm still trying to understand what you said before."):F.ClientState().$==0?d.error("Client is not intialized."):!(_9==null||_==null)?(F.set_MicState({$:7,$0:_9,$1:_}),F.debug((((L.Curried3(function($,ba,bb){return $("Mic result: "+M.prettyPrint(ba)+" "+M.prettyPrint(bb)+".");}))(a.id))(_9))(_)),_6(_8,[_9,_])):F.debug("Mic: No result returned.");};_8.connect("4Y2BLQY5TWLIN7HFIV264S53MY4PCUAT");};F.sayRandom=function(_6,_7){F.say(x.getRandomPhrase(_7,_6));};F.sayVoices=function(){var _6;_6=d.toArray(a.speechSynthesis.getVoices());F["say'"]((function(_7){return function(_8){return _7("There are currently "+a.String(_8)+" voices installed on this computer or device.");};}(a.id))(P.length(_6)));P.iteri(function(_7,_8){return F["say'"](((((L.Curried(function(_9,_,$,ba){return _9("Voice "+a.String(_)+". Name: "+M.toSafe($)+", Local: "+M.prettyPrint(ba)+".");},4))(a.id))(_7))(_8.name))(_8.localService));},_6);};F.say=function(_6){F.Responses().unshift(_6);F["say'"](_6);};F["say'"]=function(_6){var _7,_8,_9;_7=F.CUI().Voice;_7!=null&&_7.$==1?(_8=_7.$0,X.Start((_9=null,X.Delay(function(){var _;_=new a.SpeechSynthesisUtterance(_6);_.voice=_8;a.speechSynthesis.speak(_);F.CUI().Caption?d["Terminal.Echo'"](F.CUI().Term,_6):void 0;return X.Zero();})),null)):d["Terminal.Echo'"](F.CUI().Term,_6);};F.initSpeech=function(){var _6;_6=d.toArray(F.synth().getVoices());P.iter(function(_7){if(_4.Equals(F.CUI().Voice,null)&&(_7.name.indexOf("Microsoft Zira")!=-1||_7.name.toLowerCase().indexOf("female")!=-1)){F.set_CUI(B.New({$:1,$0:_7},F.CUI().Mic,F.CUI().Term,F.CUI().Caption));F.debug((function(_8){return function(_9){return _8("Using voice "+M.toSafe(_9)+".");};}(a.id))(F.CUI().Voice.$0.name));}},_6);_4.Equals(F.CUI().Voice,null)&&P.length(_6)>0?(F.set_CUI(B.New({$:1,$0:P.find(function(_7){return _7["default"];},_6)},F.CUI().Mic,F.CUI().Term,F.CUI().Caption)),F.debug((function(_7){return function(_8){return _7("Using default voice "+M.toSafe(_8)+".");};}(a.id))(F.CUI().Voice.$0.name))):_4.Equals(F.CUI().Voice,null)?F.echo("No speech synthesis voice is available. Install speech synthesis on this device or computer to use the voice output feature of Selma."):void 0;};F.synth=function(){G.$cctor();return G.synth;};F.push=function(_6){F.Context().unshift(_6);return F.Context();};F.Props=function(){G.$cctor();return G.Props;};F.Responses=function(){G.$cctor();return G.Responses;};F.Questions=function(){G.$cctor();return G.Questions;};F.Context=function(){G.$cctor();return G.Context;};F.wait=function(_6){d["Terminal.Echo'"](F.CUI().Term,"please wait");F.CUI().Term.pause();_6();F.CUI().Term.resume();};F.debug=function(_6){d.debug("CLIENT",_6);};F.echo=function(_6){if(!(F.CUI().Term==null))d["Terminal.EchoHtml'"](F.CUI().Term,(function(_7){return function(_8){return _7(M.prettyPrint(_8));};}(a.id))(_6));};F.ClientState=function(){G.$cctor();return G.ClientState;};F.set_ClientState=function(_6){G.$cctor();G.ClientState=_6;};F.MicState=function(){G.$cctor();return G.MicState;};F.set_MicState=function(_6){G.$cctor();G.MicState=_6;};F.CUI=function(){G.$cctor();return G.CUI;};F.set_CUI=function(_6){G.$cctor();G.CUI=_6;};G.$cctor=function(){var _6;G.$cctor=a.ignore;function _7(_9,_){var $,ba,bb,bc,bd,be,bf,bg,bh,bi;$=_[0];ba=_[1];F.debug((((L.Curried3(function(bj,bk,bl){return bj("Voice: "+M.prettyPrint(bk)+" "+M.prettyPrint(bl));}))(a.id))($))(ba));bb=(bc=q["Intent'"]($,ba),bc!=null&&bc.$==1?{$:1,$0:bc.$0}:null);bd=(be=q["Trait'"](ba),be!=null&&be.$==1?{$:1,$0:be.$0}:null);bf=(bg=q["Entity'$1"](ba),bg!=null&&bg.$==1?{$:1,$0:Q.ofArray([bg.$0])}:null);return bb==null&&(bd==null&&bf==null)?null:(F.debug(((((L.Curried(function(bj,bk,bl,bm){return bj("Voice: "+H.p(bk)+" "+H.p$3(bl)+" "+H.p$5(bm));},4))(a.id))(bb))(bd))(bf)),bi=F.push(new o({$:0,$0:bb,$1:bd,$2:bf})),D.update(F.CUI(),F.Props(),F.Questions(),F.Responses(),bi));}function _8(_9,_){var $,ba,bb,bc,bd,be,bf,bg,bh,bi;F.set_CUI(B.New(F.CUI().Voice,F.CUI().Mic,_9,F.CUI().Caption));_4.Equals(F.CUI().Mic,null)?F.initMic(_7):void 0;_4.Equals(F.CUI().Voice,null)?F.initSpeech():void 0;F.ClientState().$===0?F.set_ClientState(z.ClientReady):void 0;return($=s.Blank(_),$!=null&&$.$==1)?F["say'"]("Tell me what you want me to do or ask me a question."):(ba=s.Debug(_),ba!=null&&ba.$==1)?(F.debug((function(bj){return function(bk){return bj("Context: "+M.prettyPrint(bk));};}(a.id))(F.Context())),F.debug((function(bj){return function(bk){return bj("Questions: "+M.prettyPrint(bk));};}(a.id))(F.Questions()))):(bb=s.Voices(_),bb!=null&&bb.$==1)?F.sayVoices():F.ClientState().$==1?(bd=s.QuickHello(_),bd!=null&&bd.$==1?(bc=bd.$0,true):(be=s.QuickHelp(_),be!=null&&be.$==1?(bc=be.$0,true):(bf=s.QuickYes(_),bf!=null&&bf.$==1?(bc=bf.$0,true):(bg=s.QuickNo(_),bg!=null&&bg.$==1&&(bc=bg.$0,true)))))?(F.debug((function(bj){return function(bk){return bj("Quick Text: "+H.p$7(bk)+".");};}(a.id))(bc)),bh=F.push(bc),D.update(F.CUI(),F.Props(),F.Questions(),F.Responses(),bh),F.set_ClientState(z.ClientReady)):F.CUI().Wait((bi=null,X.Delay(function(){F.set_ClientState(z.ClientUnderstand);return X.Combine(X.Bind((new _1.New()).Async("SMApp.Web:SMApp.Web.Server.GetMeaning:1095959165",[_]),function(bj){var bk,bl,bm;bk=s.HasMeaning(bj);return bk!=null&&bk.$==1?(bl=bk.$0,(F.debug(((((L.Curried(function(bn,bo,bp,bq){return bn("Text: "+H.p(bo)+" "+H.p$3(bp)+" "+H.p$5(bq));},4))(a.id))(bl.get_Intent()))(bl.get_Trait()))(bl.get_Entities())),bm=F.push(bl),D.update(F.CUI(),F.Props(),F.Questions(),F.Responses(),bm),X.Zero())):(F.debug("Text: Did not receive a meaning from the server."),F["say'"]("Sorry I did not understand what you said."),X.Zero());}),X.Delay(function(){F.set_ClientState(z.ClientReady);return X.Zero();}));}))):F.ClientState().$==0?d.error("Client is not initialized."):F["say'"]("I'm still trying to understand what you said before.");}G.CUI=B.New(null,null,null,false);G.MicState=y.MicNotInitialized;G.ClientState=z.ClientNotInitialzed;G.Context=[];G.Questions=[];G.Responses=[];G.Props=new _5.New$5();G.synth=a.speechSynthesis;G.Main=new A({$:0,$0:function(_9){return function(_){return _7(_9,_);};},$1:[function(_9){return function(_){return _8(_9,_);};},(_6={},_6.name="Main",_6.greetings="Welcome to Selma. Enter 'hello' or 'hello my name is...(you)' to initialize speech recognition, or enter help for more assistance.",_6.prompt=">",_6)]});};H.p$8=function(_6){return"Question ("+M.prettyPrint(_6.$0)+", "+M.prettyPrint(_6.$1)+")";};H.p$2=function(_6){return _6==null?"null":"Some "+M.prettyPrint(_6.$0);};H.p$1=function(_6){return"Intent ("+M.prettyPrint(_6.$0)+", "+H.p$2(_6.$1)+")";};H.p=function(_6){return _6==null?"null":"Some "+H.p$1(_6.$0);};H.p$4=function(_6){return"Trait ("+M.prettyPrint(_6.$0)+", "+M.prettyPrint(_6.$1)+")";};H.p$3=function(_6){return _6==null?"null":"Some "+H.p$4(_6.$0);};H.p$6=function(_6){return"Entity ("+M.prettyPrint(_6.$0)+", "+M.prettyPrint(_6.$1)+", "+H.p$2(_6.$2)+")";};H.p$5=function(_6){return _6==null?"null":"Some "+M.printList(function(_7){return H.p$6(_7);},_6.$0);};H.p$7=function(_6){return"Meaning ("+H.p(_6.$0)+", "+H.p$3(_6.$1)+", "+H.p$5(_6.$2)+")";};}());
