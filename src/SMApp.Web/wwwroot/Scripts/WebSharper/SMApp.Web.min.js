(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a=self;b=a.SMApp=a.SMApp||{};c=b.Web=b.Web||{};d=c.User=c.User||{};e=c.Meaning=c.Meaning||{};f=c.Intent=c.Intent||{};g=c.Entity=c.Entity||{};h=c.Resource=c.Resource||{};i=c.Client=c.Client||{};j=a.StartupCode$SMApp_Web$Client=a.StartupCode$SMApp_Web$Client||{};k=a.IntelliFactory;l=k&&k.Runtime;m=a.WebSharper;n=m&&m.List;o=m&&m.UI;p=o&&o.Doc;q=m&&m.Concurrency;r=m&&m.Remoting;s=r&&r.AjaxRemotingProvider;d.New=function(t){return{UserName:t};};e=c.Meaning=l.Class({get_TopIntent:function(){return n.head(n.sortBy(function(t){return t.get_Confidence();},this.get_Intents()));},get_Entities:function(){return(this.get_Unwrap())[1];},get_Intents:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,e);f=c.Intent=l.Class({get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1];}},null,f);g=c.Entity=l.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,g);h.New=function(t,u,v){return{Name:t,Description:u,Url:v};};i.Term=function(){var t,u;t=l.ThisFunc(function(){return null;});u=i.baseOpt();a.$("#main").terminal(t,u);return p.get_Empty();};i.baseOpt=function(){j.$cctor();return j.baseOpt;};i.Main=function(t,u){var v,w;function x(y){return y.get_TopIntent().get_Name()==="Hello"&&y.get_TopIntent().get_Confidence()>0.8?{$:1,$0:y.get_Entities()}:null;}v=u==="help"?{$:1,$0:"This is the help function"}:null;v!=null&&v.$==1?t.echo(v.$0):q.Start((w=null,q.Delay(function(){t.disable();return q.Combine(q.Bind((new s.New()).Async("SMApp.Web:SMApp.Web.Server.GetMeaning:222565848",[u]),function(y){var z,A;return y!=null&&y.$==1&&(A=x(y.$0),A!=null&&A.$==1&&(z=A.$0,true))?(t.echo("This is the hello intent"),q.Zero()):(t.echo("This is the whatever intent"),q.Zero());}),q.Delay(function(){t.enable();return q.Zero();}));})),null);};j.$cctor=function(){var t;j.$cctor=a.ignore;j.baseOpt=(t={},t.name="_",t.greetings="Welcome to Selma",t.onInit=function(u){var v;return u.push(function(w){return i.Main(this,w);},(v={},v.name="Main",v.prompt=">",v));},t);};}());
